/* ========================================================================
 * B-JUI: bjui-all.js  v1.2
 * Copyright 2014 K'naan.
 * Licensed under Apache 
 * ======================================================================== */
/**
 * jQuery: jquery.cookie.js  v1.2
*/
jQuery.cookie=function(b,j,m){if(typeof j!="undefined"){m=m||{};if(j===null){j="";m.expires=-1}var e="";if(m.expires&&(typeof m.expires=="number"||m.expires.toUTCString)){var f;if(typeof m.expires=="number"){f=new Date();f.setTime(f.getTime()+(m.expires*24*60*60*1000))}else{f=m.expires}e="; expires="+f.toUTCString()}var l=m.path?"; path="+m.path:"";var g=m.domain?"; domain="+m.domain:"";var a=m.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(j),e,l,g,a].join("")}else{var d=null;if(document.cookie&&document.cookie!=""){var k=document.cookie.split(";");for(var h=0;h<k.length;h++){var c=jQuery.trim(k[h]);if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}};
/**
 * B-JUI: bjui-core.js  v1.2
*/
+function(a){"use strict";var b={JSPATH:"BJUI/",PLUGINPATH:"BJUI/plugins/",IS_DEBUG:false,KeyPressed:{ctrl:false,shift:false},keyCode:{ENTER:13,ESC:27,END:35,HOME:36,SHIFT:16,CTRL:17,TAB:9,LEFT:37,RIGHT:39,UP:38,DOWN:40,DELETE:46,BACKSPACE:8},eventType:{initUI:"bjui.initUI",beforeInitUI:"bjui.beforeInitUI",afterInitUI:"bjui.afterInitUI",ajaxStatus:"bjui.ajaxStatus",resizeGrid:"bjui.resizeGrid",beforeAjaxLoad:"bjui.beforeAjaxLoad",afterDragDialog:"bjui.afterDragDialog",beforeLoadNavtab:"bjui.beforeLoadNavtab",beforeLoadDialog:"bjui.beforeLoadDialog",afterLoadNavtab:"bjui.afterLoadNavtab",afterLoadDialog:"bjui.afterLoadDialog",beforeCloseNavtab:"bjui.beforeCloseNavtab",beforeCloseDialog:"bjui.beforeCloseDialog",afterCloseNavtab:"bjui.afterCloseNavtab",afterCloseDialog:"bjui.afterCloseDialog"},pageInfo:{pageCurrent:"pageCurrent",pageSize:"pageSize",orderField:"orderField",orderDirection:"orderDirection"},alertMsg:{displayPosition:"topcenter",alertTimeout:6000},ajaxTimeout:30000,statusCode:{ok:200,error:300,timeout:301,info:601,warn:602},keys:{statusCode:"statusCode",message:"message"},ui:{windowWidth:0,showSlidebar:true,clientPaging:true,overwriteHomeTab:false},debug:function(c){if(this.IS_DEBUG){if(typeof(console)!="undefined"){console.log(c)}else{alert(c)}}},loginInfo:{title:"登录提示",okName:"重新登录",msg:"会话超时，请重新登录",okCall:null},loadLogin:function(){var c=this.loginInfo;a(document).alertmsg("warn",c.msg,{okName:c.okName,title:c.title,okCall:c.okCall})},init:function(c){var d=a.extend({},c);a.extend(b.statusCode,d.statusCode);a.extend(b.pageInfo,d.pageInfo);a.extend(b.alertMsg,d.alertMsg);a.extend(b.loginInfo,d.loginInfo);a.extend(b.ui,d.ui);if(d.JSPATH){this.JSPATH=d.JSPATH}if(d.PLUGINPATH){this.PLUGINPATH=d.PLUGINPATH}if(d.ajaxTimeout){this.ajaxTimeout=d.ajaxTimeout}this.IS_DEBUG=d.debug||false;this.initEnv();if((!a.cookie||!a.cookie("bjui_theme"))&&d.theme){a(this).theme("setTheme",d.theme)}},initEnv:function(){a(window).resize(function(){var c=a(this).width();if(b.ui.windowWidth){if(b.ui.windowWidth>600&&b.ui.windowWidth<c){c=b.ui.windowWidth}}b.initLayout(c);setTimeout(function(){a(this).trigger(b.eventType.resizeGrid)},30)});setTimeout(function(){var c=a(window).width();if(b.ui.windowWidth){if(b.ui.windowWidth>600&&b.ui.windowWidth<c){c=b.ui.windowWidth}}b.initLayout(c);a(document).initui()},10)},initLayout:function(l){var p=l-(b.ui.showSlidebar?a("#bjui-sidebar").width()+6:6),k=a(window).height()-a("#bjui-header").height()-a("#bjui-footer").outerHeight(),o=a("#bjui-navtab").find(".tabsPageHeader").height();if(b.ui.windowWidth){a("#bjui-window").width(l)}b.windowWidth=l;a("#bjui-container").height(k);a("#bjui-navtab").width(p);a("#bjui-leftside, #bjui-sidebar, #bjui-sidebar-s, #bjui-splitBar, #bjui-splitBarProxy").css({height:"100%"});a("#bjui-navtab .tabsPageContent").height(k-o);setTimeout(function(){a("#bjui-navtab > .tabsPageContent > .navtabPage").resizePageH();a("#bjui-navtab > .tabsPageContent > .navtabPage").find(".bjui-layout").resizePageH()},10);var r=a("body").data("bjui.navbar.width"),e=a("#bjui-header"),d=e.find(".bjui-navbar-toggle"),h=e.find(".bjui-navbar-logo"),n=a("#bjui-navbar-collapse"),m=n.find(".bjui-navbar-right");if(!r){r={logoW:h.outerWidth(),navW:m.outerWidth()};a("body").data("bjui.navbar.width",r)}if(r){if(l-r.logoW<r.navW){d.show();n.addClass("collapse menu")}else{d.hide();n.removeClass("collapse menu in")}}var q=a("#bjui-hnav-navbar-box"),c=q.find("> #bjui-hnav-navbar"),j=q.prev(),f=q.next(),i=q.width(),g=0;c.find("> li").each(function(s){var t=a(this);g+=t.outerWidth();if(g>i){f.show();q.data("hnav.move",true).data("hnav.liw",g)}else{j.hide();f.hide();q.removeData("hnav.move")}})},regional:{},setRegional:function(c,d){b.regional[c]=d},getRegional:function(e){if(String(e).indexOf(".")>=0){var f,c=String(e).split(".");for(var d=0;d<c.length;d++){if(!f){f=b.regional[c[d]]}else{f=f[c[d]]}}return f}else{return b.regional[e]}},doRegional:function(d,c){a.each(c,function(f,e){d=d.replaceAll("#"+f+"#",e)});return d}};window.BJUI=b}(jQuery);
/**
 * B-JUI: bjui-regional.zh-CN.js  v1.2
 */
+function(a){"use strict";a(function(){BJUI.setRegional("alertmsg",{title:{error:"错误提示",info:"信息提示",warn:"警告信息",correct:"成功信息",confirm:"确认信息"},btnMsg:{ok:"确定",yes:"是",no:"否",cancel:"取消"}});BJUI.setRegional("dialog",{close:"关闭",maximize:"最大化",restore:"还原",minimize:"最小化",title:"弹出窗口"});BJUI.setRegional("orderby",{asc:"升序",desc:"降序"});BJUI.setRegional("pagination",{total:"总记录数/总页数",first:"首页",last:"末页",prev:"上一页",next:"下一页",jumpto:"输入跳转页码，回车确认",jump:"跳转",page:"页",refresh:"刷新"});BJUI.setRegional("datagrid",{asc:"升序",desc:"降序",showhide:"显示/隐藏 列",filter:"过滤",clear:"清除",lock:"锁定列",unlock:"解除锁定",add:"添加",edit:"编辑",save:"保存",update:"更新",cancel:"取消",del:"删除",prev:"上一条",next:"下一条",refresh:"刷新",query:"查询","import":"导入","export":"导出",all:"全部","true":"是","false":"否",selectMsg:"未选中任何行！",editMsg:"请先保存编辑行！",saveMsg:"没有需要保存的行！",delMsg:"确定要删除该行吗？",delMsgM:"确定要删除选中行？"});BJUI.setRegional("progressmsg","正在努力加载数据，请稍等...");BJUI.setRegional("datepicker",{close:"关闭",prev:"上月",next:"下月",clear:"清空",ok:"确定",dayNames:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]});BJUI.setRegional("navtabCM",{refresh:"刷新本标签",close:"关闭本标签",closeother:"关闭其他标签",closeall:"关闭所有标签"});BJUI.setRegional("dialogCM",{refresh:"刷新本窗口",close:"关闭本窗口",closeother:"关闭其他窗口",closeall:"关闭所有窗口"});BJUI.setRegional("upload",{upConfirm:"开始上传",upPause:"暂停上传",upCancel:"取消上传"});BJUI.setRegional("statusCode_503","服务器当前负载过大或者正在维护！");BJUI.setRegional("ajaxnosend","与服务器的通信中断，请检查URL链接或服务器状态！");BJUI.setRegional("sessiontimeout","会话超时，请重新登录！");BJUI.setRegional("plhmsg","占位符对应的选择器无有效值！");BJUI.setRegional("nocheckgroup",'未定义选中项的组名[复选框的"data-group"]！');BJUI.setRegional("notchecked","未选中任何一项！");BJUI.setRegional("selectmsg","请选择一个选项！");BJUI.setRegional("validatemsg","提交的表单中 [{0}] 个字段有错误，请更正后再提交！");BJUI.setRegional("uititle","青金所");BJUI.setRegional("maintab","我的主页");a.validator&&a.validator.config({defaultMsg:"{0}格式不正确",loadingMsg:"正在验证...",rules:{digits:[/^\d+$/,"请输入整数"],number:[/^[\-\+]?((([0-9]{1,3})([,][0-9]{3})*)|([0-9]+))?([\.]([0-9]+))?$/,"请输入有效的数字"],letters:[/^[a-z]+$/i,"{0}只能输入字母"],tel:[/^(?:(?:0\d{2,3}[\- ]?[1-9]\d{6,7})|(?:[48]00[\- ]?[1-9]\d{6}))$/,"电话格式不正确"],mobile:[/^1[3-9]\d{9}$/,"手机号格式不正确"],email:[/^[\w\+\-]+(\.[\w\+\-]+)*@[a-z\d\-]+(\.[a-z\d\-]+)*\.([a-z]{2,4})$/i,"邮箱格式不正确"],qq:[/^[1-9]\d{4,}$/,"QQ号格式不正确"],date:[/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/,"请输入正确的日期，例：yyyy-MM-dd"],time:[/^(2[0123]|(1|0?)[0-9]){1}:([0-5][0-9]){1}:([0-5][0-9]){1}$/,"请输入正确的时间，例：HH:mm:ss"],datetime:[/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(2[0123]|(1|0?)[0-9]){1}:([0-5][0-9]){1}:([0-5][0-9]){1}$/,"请输入正确的日期时间，例：yyyy-MM-dd HH:mm:ss"],ID_card:[/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[A-Z])$/,"请输入正确的身份证号码"],url:[/^((http[s]?|ftp):\/\/)?[^\/\.:]+?\..+\w$/i,"网址格式不正确"],postcode:[/^[1-9]\d{5}$/,"邮政编码格式不正确"],chinese:[/^[\u0391-\uFFE5]+$/,"请输入中文"],username:[/^\w{3,12}$/,"请输入3-12位数字、字母、下划线"],password:[/^(?!\d+$)(?![a-zA-Z]+$)([0-9a-zA-Z]{6,30})$/,"密码由6-30位数字、字母组成"],bankcard:[/^(\d{16}|\d{19})$/,"请输入16或19位数字"],pattern:function(c,d){if(!d){return true}var b=c.value.parseDate(d);return(!b?this.renderMsg("错误的日期时间格式！",d):true)},accept:function(b,d){if(!d){return true}var c=d[0];return(c==="*")||(new RegExp(".(?:"+(c||"png|jpg|jpeg|gif")+")$","i")).test(b.value)||this.renderMsg("只接受{1}后缀",c.replace("|",","))}}});a.validator&&a.validator.config({messages:{required:"{0}不能为空",remote:"{0}已被使用",integer:{"*":"请输入正确的数值","+":"请输入正确的数值","+0":"请输入正确的数值","-":"请输入正确的数值","-0":"请输入正确的数值"},match:{eq:"{0}与{1}不一致",neq:"{0}与{1}不能相同",lt:"{0}必须小于{1}",gt:"{0}必须大于{1}",lte:"{0}必须小于或等于{1}",gte:"{0}必须大于或等于{1}"},range:{rg:"请输入{1}到{2}的数",gte:"请输入大于或等于{1}的数",lte:"请输入小于或等于{1}的数"},checked:{eq:"请选择{1}项",rg:"请选择{1}到{2}项",gte:"请至少选择{1}项",lte:"请最多选择{1}项"},length:{eq:"请输入{1}个字符",rg:"请输入{1}到{2}个字符",gte:"请至少输入{1}个字符",lte:"请最多输入{1}个字符",eq_2:"",rg_2:"",gte_2:"",lte_2:""}}})})}(jQuery);
/**
 * B-JUI: bjui-frag.js  v1.2
 */
+function(a){"use strict";BJUI.setRegional("alertmsg",{title:{error:"Error",info:"Info",warn:"Warning",correct:"Correct",confirm:"Confirm"},btnMsg:{ok:"OK",yes:"YES",no:"NO",cancel:"Cancel"}});BJUI.setRegional("dialog",{close:"Close",maximize:"Maximize",restore:"Restore",minimize:"Minimize",title:"Popup window"});BJUI.setRegional("orderby",{asc:"Asc",desc:"Desc"});BJUI.setRegional("pagination",{first:"First page",last:"Last page",prev:"Prev page",next:"Next page",jumpto:"Jump page number",jump:"Jump"});BJUI.setRegional("progressmsg","Data loading, please waiting...");BJUI.setRegional("datepicker",{close:"Close",prev:"Prev month",next:"Next month",clear:"Clear",ok:"OK",dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});BJUI.setRegional("navtabCM",{refresh:"Refresh navtab",close:"Close navtab",closeother:"Close other navtab",closeall:"Close all navtab"});BJUI.setRegional("dialogCM",{refresh:"Refresh dialog",close:"Close dialog",closeother:"Close other dialog",closeall:"Close all dialog"});BJUI.setRegional("upload",{upConfirm:"Start upload",upPause:"Pause upload",upCancel:"Cancel upload"});BJUI.setRegional("statusCode_503","The current server load is too large or is down for maintenance!");BJUI.setRegional("ajaxnosend","Communication with the server is interrupted, please check the URL link or server status!");BJUI.setRegional("sessiontimeout","Session timeout, please login!");BJUI.setRegional("plhmsg","Placeholder corresponding selector None Valid!");BJUI.setRegional("nocheckgroup",'Undefined group name selected item [check box "data-group"]!');BJUI.setRegional("notchecked","Unchecked any one!");BJUI.setRegional("selectmsg","Please select one option!");BJUI.setRegional("validatemsg","Submitted form data has [{0}] field an error, please after modified submitting!");BJUI.setRegional("uititle","B-JUI");BJUI.setRegional("maintab","My home");window.FRAG={dialog:'<div class="bjui-dialog bjui-dialog-container" style="top:150px; left:300px;">'+'    <div class="dialogHeader" onselectstart="return false;" oncopy="return false;" onpaste="return false;" oncut="return false;">'+'        <a class="close dia-close" href="#close" title="#close#"><i class="fa fa-times-circle"></i></a>'+'        <a class="maximize" href="#maximize" title="#maximize#"><i class="fa fa-plus-circle"></i></a>'+'        <a class="restore" href="#restore" title="#restore#"><i class="fa fa-history"></i></a>'+'        <a class="minimize" href="#minimize" title="#minimize#"><i class="fa fa-minus-circle"></i></a>'+'        <h1><span><i class="fa fa-th-large"></i></span> <span class="title">#title#</span></h1>'+"    </div>"+'    <div class="dialogContent unitBox"></div>'+'    <div class="resizable_h_l" tar="nw"></div>'+'    <div class="resizable_h_r" tar="ne"></div>'+'    <div class="resizable_h_c" tar="n"></div>'+'    <div class="resizable_c_l" tar="w" style="height:100%;"></div>'+'    <div class="resizable_c_r" tar="e" style="height:100%;"></div>'+'    <div class="resizable_f_l" tar="sw"></div>'+'    <div class="resizable_f_r" tar="se"></div>'+'    <div class="resizable_f_c" tar="s"></div>'+"</div>",taskbar:'<div id="bjui-taskbar" style="left:0px; display:none;">'+'    <div class="taskbarContent">'+"        <ul></ul>"+"    </div>"+'    <div class="taskbarLeft taskbarLeftDisabled"><i class="fa fa-angle-double-left"></i></div>'+'    <div class="taskbarRight"><i class="fa fa-angle-double-right"></i></div>'+"</div>",splitBar:'<div id="bjui-splitBar"></div>',splitBarProxy:'<div id="bjui-splitBarProxy"></div>',resizable:'<div id="bjui-resizable" class="bjui-resizable"></div>',alertBackground:'<div class="bjui-alertBackground"></div>',maskBackground:'<div class="bjui-maskBackground bjui-ajax-mask"></div>',maskProgress:'<div class="bjui-maskProgress bjui-ajax-mask"><i class="fa fa-cog fa-spin"></i>&nbsp;&nbsp;#msg#<div class="progressBg"><div class="progress"></div></div></div>',progressBar_custom:'<div id="bjui-progressBar-custom" class="progressBar"><i class="fa fa-cog fa-spin"></i> <span></span></div>',dialogMask:'<div class="bjui-dialogBackground"></div>',orderby:'<a href="javascript:;" class="order asc" data-order-direction="asc" title="#asc#"><i class="fa fa-angle-up"></i></a>'+'<a href="javascript:;" class="order desc" data-order-direction="desc" title="#desc#"><i class="fa fa-angle-down"></i></a>',slidePanel:'<div class="panel panel-default">'+'    <div class="panel-heading">'+'        <h4 class="panel-title"><a data-toggle="collapse" data-parent="#bjui-accordionmenu" href="##id#" class="#class#">#icon#&nbsp;#title#<b>#righticon#</b></a></h4>'+"    </div>"+'    <div id="#id#" class="panel-collapse collapse#bodyclass#">'+'        <div class="panel-body">'+"        </div>"+"    </div>"+"</div>",pagination:'<ul class="pagination">'+'    <li class="j-first">'+'        <a class="first" href="javascript:;"><i class="fa fa-step-backward"></i> #first#</a>'+'        <span class="first"><i class="fa fa-step-backward"></i> #first#</span>'+"    </li>"+'    <li class="j-prev">'+'        <a class="previous" href="javascript:;"><i class="fa fa-backward"></i> #prev#</a>'+'        <span class="previous"><i class="fa fa-backward"></i> #prev#</span>'+"    </li>"+"    #pageNumFrag#"+'    <li class="j-next">'+'        <a class="next" href="javascript:;">#next# <i class="fa fa-forward"></i></a>'+'        <span class="next">#next# <i class="fa fa-forward"></i></span>'+"    </li>"+'    <li class="j-last">'+'        <a class="last" href="javascript:;">#last# <i class="fa fa-step-forward"></i></a>'+'        <span class="last">#last# <i class="fa fa-step-forward"></i></span>'+"    </li>"+'    <li class="jumpto"><span class="p-input"><input class="form-control input-sm-pages" type="text" size="2.6" value="#pageCurrent#" title="#jumpto#"></span><a class="goto" href="javascript:;" title="#jump#"><i class="fa fa-chevron-right"></i></a></li>'+"</ul>",alertBoxFrag:'<div id="bjui-alertMsgBox" class="bjui-alert"><div class="alertContent"><div class="#type#"><div class="alertInner"><h1><i class="fa #fa#"></i>#title#</h1><div class="msg">#message#</div></div><div class="toolBar"><ul>#btnFragment#</ul></div></div></div></div>',alertBtnFrag:'<li><button class="btn btn-#class#" rel="#callback#" type="button">#btnMsg#</button></li>',calendarFrag:'<div id="bjui-calendar">'+'    <div class="main">'+'        <a class="close" href="javascript:;" title="#close#"><i class="fa fa-times-circle"></i></a>'+'        <div class="head">'+'            <table width="100%" border="0" cellpadding="0" cellspacing="2">'+"                <tr>"+'                    <td width="20"><a class="prev" href="javascript:;" title="#prev#"><i class="fa fa-arrow-left"></i></a></td>'+'                    <td><select name="year"></select></td>'+'                    <td><select name="month"></select></td>'+'                    <td width="20"><a class="next" href="javascript:;" title="#next#"><i class="fa fa-arrow-right"></i></a></td>'+"                </tr>"+"            </table>"+"        </div>"+'        <div class="body">'+'            <dl class="dayNames"><dt>7</dt><dt>1</dt><dt>2</dt><dt>3</dt><dt>4</dt><dt>5</dt><dt>6</dt></dl>'+'            <dl class="days"><!-- date list --></dl>'+'            <div style="clear:both;height:0;line-height:0"></div>'+"        </div>"+'        <div class="foot">'+'            <table class="time">'+"                <tr>"+"                    <td>"+'                        <input type="text" class="hh" maxlength="2" data-type="hh" data-start="0" data-end="23">:<input'+'                         type="text" class="mm" maxlength="2" data-type="mm" data-start="0" data-end="59">:<input'+'                         type="text" class="ss" maxlength="2" data-type="ss" data-start="0" data-end="59">'+"                    </td>"+'                    <td><ul><li class="up" data-add="1">&and;</li><li class="down">&or;</li></ul></td>'+"                </tr>"+"            </table>"+'            <button type="button" class="clearBtn btn btn-orange">#clear#</button>'+'            <button type="button" class="okBtn btn btn-default">#ok#</button>'+"        </div>"+'        <div class="tm">'+'            <ul class="hh">'+"                <li>0</li>"+"                <li>1</li>"+"                <li>2</li>"+"                <li>3</li>"+"                <li>4</li>"+"                <li>5</li>"+"                <li>6</li>"+"                <li>7</li>"+"                <li>8</li>"+"                <li>9</li>"+"                <li>10</li>"+"                <li>11</li>"+"                <li>12</li>"+"                <li>13</li>"+"                <li>14</li>"+"                <li>15</li>"+"                <li>16</li>"+"                <li>17</li>"+"                <li>18</li>"+"                <li>19</li>"+"                <li>20</li>"+"                <li>21</li>"+"                <li>22</li>"+"                <li>23</li>"+"            </ul>"+'            <ul class="mm">'+"                <li>0</li>"+"                <li>5</li>"+"                <li>10</li>"+"                <li>15</li>"+"                <li>20</li>"+"                <li>25</li>"+"                <li>30</li>"+"                <li>35</li>"+"                <li>40</li>"+"                <li>45</li>"+"                <li>50</li>"+"                <li>55</li>"+"            </ul>"+'            <ul class="ss">'+"                <li>0</li>"+"                <li>10</li>"+"                <li>20</li>"+"                <li>30</li>"+"                <li>40</li>"+"                <li>50</li>"+"            </ul>"+"        </div>"+"    </div>"+"</div>",spinnerBtn:'<ul class="bjui-spinner"><li class="up" data-add="1">&and;</li><li class="down">&or;</li></ul>',lookupBtn:'<a class="bjui-lookup" href="javascript:;" data-toggle="lookupbtn"><i class="fa fa-search"></i></a>',dateBtn:'<a class="bjui-lookup" href="javascript:;" data-toggle="datepickerbtn"><i class="fa fa-calendar"></i></a>',navtabCM:'<ul id="bjui-navtabCM">'+'    <li rel="reload"><span class="icon"><i class="fa fa-refresh"></i></span><span class="title">#refresh#</span></li>'+'    <li rel="closeCurrent"><span class="icon"><i class="fa fa-remove"></i></span><span class="title">#close#</li>'+'    <li rel="closeOther"><span class="icon"><i class="fa fa-remove"></i></span><span class="title">#closeother#</li>'+'    <li rel="closeAll"><span class="icon"><i class="fa fa-remove"></i></span><span class="title">#closeall#</li>'+"</ul>",dialogCM:'<ul id="bjui-dialogCM">'+'    <li rel="reload"><span class="icon"><i class="fa fa-refresh"></i></span><span class="title">#refresh#</span></li>'+'    <li rel="closeCurrent"><span class="icon"><i class="fa fa-remove"></i></span><span class="title">#close#</span></li>'+'    <li rel="closeOther"><span class="icon"><i class="fa fa-remove"></i></span><span class="title">#closeother#</span></li>'+'    <li rel="closeAll"><span class="icon"><i class="fa fa-remove"></i></span><span class="title">#closeall#</span></li>'+"</ul>",externalFrag:'<iframe src="{url}" style="width:100%;height:{height};" frameborder="no" border="0" marginwidth="0" marginheight="0"></iframe>',uploadTemp:'<div id="{fileId}" class="item">'+'    <div class="info">'+'        <span class="up_filename">{fileName}</span><span class="up_confirm" title="#upConfirm#"><i class="fa fa-play-circle-o"></i></span><span class="up_pause" title="#upPause#"><span class="glyphicon glyphicon-pause"></span></span><span class="up_cancel" title="#upCancel#"><i class="fa fa-times-circle-o"></i></span>'+"    </div>"+'    <div class="preview"><span class="img"></span></div>'+'    <div class="progress"><div class="bar"></div></div>'+'    <span class="percent">{percent}</span>'+'    <span class="filesize"><span class="uploadedsize">{uploadedSize}</span>/<span class="totalsize">{fileSize}</span></span>'+"</div>",uploadFrag:'<input class="bjui-upload-select-file" style="display:none;" type="file" name="fileselect[]" #multi# accept="#accept#">'+'<a href="javascript:void(0)" class="btn btn-default bjui-upload-select">#btnTxt#</a>'+'<div class="queue"></div>',statusCode_503:"HTTP status 503, #statusCode_503#",sessionTimout:"#sessiontimeout#",alertPlhMsg:"#plhmsg#",alertNoCheckGroup:"#nocheckgroup#",alertNotChecked:"#notchecked#",alertSelectMsg:"#selectmsg#",validateErrorMsg:"#validatemsg#",uiTitle:"#uititle#",mainTabTitle:"#mynavtab#"}}(jQuery);
/**
 * B-JUI: bjui-extends.js  v1.2
 */
+function(a){"use strict";a.fn.extend({ajaxUrl:function(c){var b=a(this);b.trigger(BJUI.eventType.beforeAjaxLoad);if(c.loadingmask){b.trigger(BJUI.eventType.ajaxStatus)}a.ajax({type:c.type||"GET",url:c.url,data:c.data||{},cache:false,async:c.async!=undefined?c.async:true,dataType:"html",timeout:BJUI.ajaxTimeout,success:function(e){var g=e.toJson(),f=b.find("> .bjui-ajax-mask"),d=b.find(".swfupload");if(d.length>0){d.remove()}if(!g[BJUI.keys.statusCode]){b.empty().html(e).append(f).initui();if(a.isFunction(c.callback)){c.callback(e)}}else{switch(g[BJUI.keys.statusCode]){case BJUI.statusCode.error:if(g[BJUI.keys.message]){b.alertmsg("error",g[BJUI.keys.message])}break;case BJUI.statusCode.info:if(g[BJUI.keys.message]){b.alertmsg("info",g[BJUI.keys.message])}break;case BJUI.statusCode.warn:if(g[BJUI.keys.message]){b.alertmsg("warn",g[BJUI.keys.message])}break;case BJUI.statusCode.timeout:if(b.closest(".bjui-dialog").length){b.dialog("closeCurrent")}if(b.closest(".navtab-panel").length){b.navtab("closeCurrentTab")}a("body").alertmsg("info",(g[BJUI.keys.message]||BJUI.regional.sessiontimeout));BJUI.loadLogin();break}if(!b.closest(".bjui-layout").length){if(b.closest(".bjui-dialog").length){b.dialog("closeCurrent")}if(b.closest(".navtab-panel").length){b.navtab("closeCurrentTab")}}f.fadeOut("normal",function(){a(this).remove()})}},error:function(f,d,e){b.bjuiajax("ajaxError",f,d,e);if(!b.closest(".bjui-layout").length){if(b.closest(".navtab-panel").length){b.navtab("closeCurrentTab")}else{b.dialog("closeCurrent")}}b.trigger("bjui.ajaxError")},statusCode:{0:function(f,d,e){b.alertmsg("error",BJUI.regional.ajaxnosend)},503:function(f,d,e){b.alertmsg("error",BJUI.regional.statusCode_503)}}})},loadUrl:function(b,c,d){a(this).ajaxUrl({url:b,data:c,callback:d})},doAjax:function(e){var d=a(this),b,c;if(!e.url){BJUI.debug("The ajax url is undefined!");return}if(!e.callback){BJUI.debug("The ajax callback is undefined!");return}else{e.callback=e.callback.toFunc()}if(e.loadingmask){b=d.getPageTarget();b.trigger(BJUI.eventType.ajaxStatus);c=b.find("> .bjui-ajax-mask")}if(!e.type){e.type="POST"}if(!e.dataType){e.dataType="json"}if(!e.cache){e.cache=false}e.timeout=BJUI.ajaxTimeout;e.success=function(f){if(d.data("validator")!=undefined){d.data("validator").holdSubmit(false)}if(c){if(e.callback){a.when(e.callback(f)).done(function(){b.trigger("bjui.ajaxStop")})}else{b.trigger("bjui.ajaxStop")}}else{e.callback(f)}};e.error=e.error||function(h,f,g){d.bjuiajax("ajaxError",h,f,g);if(c){b.trigger("bjui.ajaxError")}};e.statusCode={0:function(h,f,g){d.alertmsg("error",BJUI.regional.ajaxnosend)},503:function(h,f,g){d.alertmsg("error",BJUI.regional.statusCode_503)}};a.ajax(e)},getPageTarget:function(){var b;if(this.closest(".bjui-layout").length){b=this.closest(".bjui-layout")}else{if(this.closest(".navtab-panel").length){b=a.CurrentNavtab}else{b=a.CurrentDialog}}return b},resizePageH:function(){return this.each(function(){if(a(this).closest(".tab-content").length){return}var g=a(this),d=g.find("> .bjui-pageHeader"),b=g.find("> .bjui-pageContent"),c=g.find("> .bjui-pageFooter"),f=d.outerHeight()||0,e=c.outerHeight()||0;if(g.hasClass("navtabPage")&&g.is(":hidden")){g.show();f=d.outerHeight()||0;e=c.outerHeight()||0;g.hide()}if(c.css("bottom")){e+=parseInt(c.css("bottom"))||0}if(e==0&&g.hasClass("dialogContent")){e=5}b.css({top:f,bottom:e})})},getMaxIndexObj:function(c){var d=0,b=0;c.each(function(f){var e=parseInt(a(this).css("zIndex"))||1;if(d<e){d=e;b=f}});return c.eq(b)},serializeJson:function(){var c={};var b=this.serializeArray();a.each(b,function(){if(c[this.name]!==undefined){if(!c[this.name].push){c[this.name]=[c[this.name]]}c[this.name].push(this.value||"")}else{c[this.name]=this.value||""}});return c},isTag:function(b){if(!b){return false}if(!a(this).prop("tagName")){return false}return a(this)[0].tagName.toLowerCase()==b?true:false},isBind:function(b){var c=a(this).data("events");return c&&b&&c[b]},log:function(b){return this.each(function(){if(console){console.log("%s: %o",b,this)}})},openPostWindow:function(e){var d=a('<form method="post" action="'+e.url+'" target="_blank" style="display:none;"></form>');for(var c in e.data){var b=a('<input type="hidden" name="'+c+'" value="'+e.data[c]+'" />');d.append(b)}a("body").append(d);d.trigger("submit").remove()},subStr:function(j,b,d){var c=/[\u4e00-\u9fa5]/g;var e="";var h=0;var g=j.replace(c,"**").length;for(var f=0;f<j.length;f++){if(c.test(j.charAt(f))){h+=2}else{h+=1}e+=j.charAt(f);if(h>=b){break}}if(d&&g>b){e+="..."}return e}});a.extend(String.prototype,{isPositiveInteger:function(){return(new RegExp(/^[1-9]\d*$/).test(this))},isInteger:function(){return(new RegExp(/^\d+$/).test(this))},isNumber:function(){return(new RegExp(/^([-]{0,1}(\d+)[\.]+(\d+))|([-]{0,1}(\d+))$/).test(this))},isNormalID:function(){return(new RegExp(/^[a-zA-Z][0-9a-zA-Z_-]*$/).test(this))},includeChinese:function(){return(new RegExp(/[\u4E00-\u9FA5]/).test(this))},trim:function(){return this.replace(/(^\s*)|(\s*$)|\r|\n/g,"")},startsWith:function(b){return this.indexOf(b)===0},endsWith:function(b){var c=this.length-b.length;return c>=0&&this.lastIndexOf(b)===c},replaceSuffix:function(b){return this.replace(/\[[0-9]+\]/,"["+b+"]").replaceAll("#index#",b)},replaceSuffix2:function(b){return this.replace(/\-(i)([0-9]+)$/,"-i"+b).replaceAll("#index#",b)},trans:function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"')},encodeTXT:function(){return(this).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll(" ","&nbsp;")},replaceAll:function(c,b){return this.replace(new RegExp(c,"gm"),b)},replacePlh:function(b){b=b||a(document);return this.replace(/{\/?[^}]*}/g,function(c){var d=b.find(c.replace(/[{}]+/g,""));return d&&d.val()?d.val():c})},replaceMsg:function(b){return this.replace(new RegExp("({.*})","g"),b)},replaceTm:function(b){if(!b){return this}return this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_-]*})","g"),function(c){return b[c.replace(/[{}]+/g,"")]})},replaceTmById:function(b){var c=b||a(document);return this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_-]*})","g"),function(d){var e=c.find("#"+d.replace(/[{}]+/g,""));return e.val()?e.val():d})},isFinishedTm:function(){return !(new RegExp("{/?[^}]*}").test(this))},skipChar:function(b){if(!this||this.length===0){return""}if(this.charAt(0)===b){return this.substring(1).skipChar(b)}return this},isValidPwd:function(){return(new RegExp(/^([_]|[a-zA-Z0-9]){6,32}$/).test(this))},isValidMail:function(){return(new RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/).test(this.trim()))},isSpaces:function(){for(var b=0;b<this.length;b+=1){var c=this.charAt(b);if(c!=" "&&c!="\n"&&c!="\t"&&c!="\r"){return false}}return true},isPhone:function(){return(new RegExp(/(^([0-9]{3,4}[-])?\d{3,8}(-\d{1,6})?$)|(^\([0-9]{3,4}\)\d{3,8}(\(\d{1,6}\))?$)|(^\d{3,8}$)/).test(this))},isUrl:function(){return(new RegExp(/^[a-zA-z]+:\/\/([a-zA-Z0-9\-\.]+)([-\w .\/?%&=:]*)$/).test(this))},isExternalUrl:function(){return this.isUrl()&&this.indexOf("://"+document.domain)==-1},toBool:function(){return(this.toLowerCase()==="true")?true:false},toJson:function(){var b=this;try{if(typeof b=="object"){b=b.toString()}if(!b.trim().match("^{(.+:.+,*){1,}}$")){return this}else{return JSON.parse(this)}}catch(c){return this}},toObj:function(){var c=null;try{c=(new Function("return "+this))()}catch(b){c=this;BJUI.debug('String toObj：Parse "String" to "Object" error! Your str is: '+this)}return c},toFunc:function(){if(!this||!this.length){return undefined}if(this.startsWith("function")){return(new Function("return "+this))()}try{var d=this.split("."),c=window;for(var b=0;b<d.length;b++){c=c[d[b]]}if(typeof c==="function"){return c}}catch(f){return undefined}},setUrlParam:function(j,h){var f="",b=this;if(b.indexOf("?")!=-1){f=b.substr(b.indexOf("?")+1)}else{return b+"?"+j+"="+h}var d="",k="",e,g="0";if(f.indexOf("&")!=-1){e=f.split("&");for(var c in e){if(e[c].split("=")[0]==j){k=h;g="1"}else{k=e[c].split("=")[1]}d=d+e[c].split("=")[0]+"="+k+"&"}d=d.substr(0,d.length-1);if(g=="0"){if(d==f){d=d+"&"+j+"="+h}}}else{if(f.indexOf("=")!=-1){e=f.split("=");if(e[0]==j){k=h;g="1"}else{k=e[1]}d=e[0]+"="+k;if(g=="0"){if(d==f){d=d+"&"+j+"="+h}}}else{d=j+"="+h}}return b.substr(0,b.indexOf("?"))+"?"+d}});a.extend(Function.prototype,{toFunc:function(){return this}});a.extend(Array.prototype,{remove:function(b){if(b<0){return this}else{return this.slice(0,b).concat(this.slice(b+1,this.length))}},unique:function(){var b=new Array();this.sort();for(var c=0;c<this.length;c++){if(this[c]==this[c+1]){continue}b[b.length]=this[c]}return b},myIndexOf:function(d){if(!this||!this.length){return -1}for(var c=0,b;b=this[c];c++){if(b==d){return c}}return -1},toJson:function(){var c={};var b=this;a.each(b,function(){if(c[this.name]!==undefined){if(!c[this.name].push){c[this.name]=[c[this.name]]}c[this.name].push(this.value||"")}else{c[this.name]=this.value||""}});return c}});a.isJson=function(d){var b=true;try{b=a.parseJSON(d)}catch(c){return false}return b?true:false};a.hasFlash=(function(){var b=0,c=0;if(document.all){var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(e){b=1;VSwf=e.GetVariable("$version");c=parseInt(VSwf.split(" ")[1].split(",")[0])}}else{if(navigator.plugins&&navigator.plugins.length>0){var e=navigator.plugins["Shockwave Flash"];if(e){b=1;var f=e.description.split(" ");for(var d=0;d<f.length;++d){if(isNaN(parseInt(f[d]))){continue}c=parseInt(f[d])}}}}return{f:b,v:c}})();a.digitUppercase=function(e){var o=["角","分"];var h=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"];var l=[["元","万","亿","兆"],["","拾","佰","仟"]];var k=e<0?"负":"";var b=e;e=Math.abs(e);var q="";var d=String(e).split(".");for(var g=0;g<o.length;g++){if(d[1]){var m=String(d[1]).charAt(g)?String(d[1]).charAt(g):0;q+=(h[m]+o[g]).replace(/零./,"")}}q=q||"整";e=Math.floor(e);for(var g=0;g<l[0].length&&e>0;g++){var c="";for(var f=0;f<l[1].length&&e>0;f++){c=h[e%10]+l[1][f]+c;e=Math.floor(e/10)}q=c.replace(/(零.)*零$/,"").replace(/^$/,"零")+l[0][g]+q}if(b>100000000000000){return"--"}else{return k+q.replace(/(零.)*零元/,"元").replace(/(零.)+/g,"零").replace(/^整$/,"零元整")}}}(jQuery);
/**
 * B-JUI: bjui-basedrag.js  v1.2
 */
+function(a){"use strict";function c(c){var d=arguments,e=c;return this.each(function(){var f=a(this),g=a.extend({},f.data(),"object"==typeof c&&c),h=f.data("bjui.basedrag");h||f.data("bjui.basedrag",h=new b(this,g)),"string"==typeof e&&a.isFunction(h[e])?([].shift.apply(d),d?h[e].apply(h,d):h[e]()):h.init()})}var d,b=function(b,c){this.$element=a(b),this.options=c};b.prototype.init=function(){var a=this;this.options.$obj=this.$element,this.options.obj&&(this.options.$obj=this.options.obj),this.options.event?this.start(this.options.event):this.$element.find(this.options.selector).bind("mousedown",function(b){a.start.apply(a,[b])})},b.prototype.start=function(){document.onselectstart=function(){return!1};var c=this;this.options.oleft=parseInt(this.$element.css("left"))||0,this.options.otop=parseInt(this.$element.css("top"))||0,a(document).bind("mouseup.bjui.basedrag",function(a){c.stop.apply(c,[a])}).bind("mousemove.bjui.basedrag",function(a){c.drag.apply(c,[a])})},b.prototype.drag=function(b){var c,d,e,f;return b||(b=window.event),c=this.options,d=c.oleft+(b.pageX||b.clientX)-c.event.pageX,e=c.otop+(b.pageY||b.clientY)-c.event.pageY,1>e&&(e=0),"horizontal"==c.move?c.minW&&d>=parseInt(this.options.$obj.css("left"))+c.minW&&c.maxW&&d<=parseInt(this.options.$obj.css("left"))+c.maxW?this.$element.css("left",d):c.scop&&c.relObj&&(d-parseInt(c.relObj.css("left"))>c.cellMinW?this.$element.css("left",d):this.$element.css("left",d)):"vertical"==c.move?this.$element.css("top",e):(f=c.selector?this.options.$obj.find(c.selector):this.options.$obj,d>=2*-f.outerWidth()/3&&e>=0&&d+f.outerWidth()/3<a(window).width()&&e+f.outerHeight()<a(window).height()&&this.$element.css({left:d,top:e})),c.drag&&c.drag.apply(this.$element,[this.$element,b]),this.preventEvent(b)},b.prototype.stop=function(b){return a(document).unbind("mousemove.bjui.basedrag").unbind("mouseup.bjui.basedrag"),this.options.stop&&this.options.stop.apply(this.$element,[this.$element,b]),this.options.event&&this.destroy(),document.onselectstart=function(){return!0},this.preventEvent(b)},b.prototype.preventEvent=function(a){return a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),!1},b.prototype.destroy=function(){this.$element.removeData("bjui.basedrag"),this.options.nounbind||this.$element.unbind("mousedown")},d=a.fn.basedrag,a.fn.basedrag=c,a.fn.basedrag.Constructor=b,a.fn.basedrag.noConflict=function(){return a.fn.basedrag=d,this}}(jQuery);
/**
 * B-JUI: bjui-slidebar.js  v1.2
 */
+function(a){"use strict";function c(c){var d=arguments,e=c;return this.each(function(){var f=a(this),g=a.extend({},f.data(),"object"==typeof c&&c),h=f.data("bjui.slidebar");h||f.data("bjui.slidebar",h=new b(this,g)),"string"==typeof e&&a.isFunction(h[e])?([].shift.apply(d),d?h[e].apply(h,d):h[e]()):h.init()})}var b,d;a(function(){a("#bjui-leftside").after("<!-- Adjust the width of Left slide -->").after(FRAG.splitBar).after(FRAG.splitBarProxy)}),b=function(b,c){this.$element=a(b),this.$bar=this.$element.find("#bjui-sidebar"),this.$sbar=this.$element.find("#bjui-sidebar-s"),this.$lock=this.$bar.find("> .toggleCollapse > .lock"),this.$navtab=a("#bjui-navtab"),this.$collapse=this.$sbar.find(".collapse"),this.$split=a("#bjui-splitBar"),this.$split2=a("#bjui-splitBarProxy"),this.isfloat=!1,this.options=c},b.prototype.lock=function(){var b=this,c=b.$bar.outerWidth()+4,d=BJUI.windowWidth-a("#bjui-sidebar").width()-6;b.faLock(),b.hoverLock(),b.$sbar.animate({left:-10},20),b.$bar.removeClass("shadown"),b.isfloat=!1,b.$navtab.animate({left:c,width:d},500,function(){a(window).trigger(BJUI.eventType.resizeGrid)}),b.$split.show()},b.prototype.unlock=function(){var b=this,c=0-b.$bar.outerWidth()-0,d=BJUI.windowWidth-6;b.faUnLock(),b.hoverUnLock(),b.$navtab.animate({left:6,width:d},400),b.$bar.animate({left:c},500,function(){b.$sbar.animate({left:0},200),b.$split.hide(),a(window).trigger(BJUI.eventType.resizeGrid)}),b.isfloat=!1},b.prototype.float=function(){var a=this;a.$sbar.animate({left:-10},200),a.$bar.addClass("shadown").animate({left:0},500),a.isfloat=!0},b.prototype.hideFloat=function(){var a=this,b=0-a.$bar.outerWidth()-0;a.$bar.animate({left:b-10},500,function(){a.$sbar.animate({left:0},100)}),a.isfloat=!1},b.prototype.hoverLock=function(){var a=this;a.$lock.hover(function(){a.tipUnLock(),a.faUnLock()},function(){a.tipLock(),a.faLock()})},b.prototype.hoverUnLock=function(){var a=this;a.$lock.hover(function(){a.tipLock(),a.faLock()},function(){a.tipUnLock(),a.faUnLock()})},b.prototype.tipLock=function(){this.$lock.tooltip("destroy").tooltip({title:"保持锁定，始终显示导航栏",container:"body"})},b.prototype.tipUnLock=function(){this.$lock.tooltip("destroy").tooltip({title:"解除锁定，自动隐藏导航栏",container:"body"})},b.prototype.faLock=function(){this.$lock.find("> i").attr("class","fa fa-lock")},b.prototype.faUnLock=function(){this.$lock.find("> i").attr("class","fa fa-unlock-alt")},b.prototype.init=function(){var b=this;BJUI.ui.showSlidebar?b.hoverLock():b.unlock(),this.$lock.off("click.bjui.slidebar").on("click.bjui.slidebar",function(){b.isfloat?b.lock():b.unlock(),BJUI.ui.showSlidebar=!BJUI.ui.showSlidebar}),this.$collapse.hover(function(){b.float(),b.$navtab.click(function(){b.isfloat&&b.hideFloat()})}),this.$split.mousedown(function(c){b.$split2.each(function(){var d=a(this);return setTimeout(function(){d.show()},100),d.css({visibility:"visible",left:b.$split.css("left")}).basedrag(a.extend(b.options,{obj:b.$bar,move:"horizontal",event:c,stop:function(){var c,d,e,f;a(this).css("visibility","hidden"),c=parseInt(a(this).css("left"))-parseInt(b.$split.css("left")),d=b.$bar.outerWidth()+c,e=parseInt(b.$navtab.css("left"))+c,f=b.$navtab.outerWidth()-c,b.$bar.css("width",d),b.$split.css("left",a(this).css("left")),b.$navtab.css({left:e,width:f})}})),!1})}),a("#bjui-hnav-navbar-box").length&&b.moveHnav()},b.prototype.moveHnav=function(){var b=a("#bjui-hnav-navbar-box"),c=b.find("> #bjui-hnav-navbar"),d=b.prev(),e=b.next();d.hover(function(){c.stop().animate({left:0},2e3,function(){d.hide()})},function(){c.stop(),b.data("hnav.move")&&e.show()}).on("click",function(){return c.stop().animate({left:0},"fast",function(){d.hide()}),!1}),e.hover(function(){c.stop().animate({left:b.width()-b.data("hnav.liw")-10},2e3,function(){e.hide()})},function(){c.stop(),"0px"!=c.css("left")&&d.show()}).on("click",function(){return c.stop().animate({left:b.width()-b.data("hnav.liw")-10},"fast",function(){e.hide()}),!1})},b.prototype.initHnav=function(){var f,g,h,i,b=this,c=b.$element.text().trim(),d=b.$element.parent(),e=a("#bjui-accordionmenu");f=d.find("> .items > ul.ztree"),g=d.find("> .items > ul.menu-items"),(f.length||g.length)&&(f.length&&(i=f),g.length&&(i=i?i.add(g):g,g.find("a").each(function(){var b=a(this),c=b.data("options");!b.data("icon.init")&&c&&"string"==typeof c&&(c=c.toObj(),c&&c.faicon&&(c.faicon=c.faicon.trim(),c.faicon.startsWith("fa-")&&(c.faicon=c.faicon.substr(3)),b.prepend('<i class="fa fa-'+c.faicon+'"></i>').data("icon.init",!0).attr("title",b.text())))})),e.empty(),i.each(function(b){var f,g,i,d=a(this),j=d.data("faicon"),l=(d.data("faiconClose"),j?j:"dot-circle-o");d.data("tit")&&(c=d.data("tit")),g=b?"collapsed":"",i=b?"":" in",f=FRAG.slidePanel.replaceAll("#id#","bjui-collapse"+b).replaceAll("#title#",c).replaceAll("#righticon#",'<i class="fa fa-angle-down"></i>').replaceAll("#class#",g).replaceAll("#bodyclass#",i),f=l?f.replaceAll("#icon#",'<i class="fa fa-'+l+'"></i>'):f.replaceAll("#icon#",""),h=a(f),h.find("> .panel-collapse > .panel-body").append(d.removeAttr("data-noinit")),e.append(h),b||h.collapse("show")}),a("#bjui-sidebar").initui(),d.addClass("active").data("bjui.slidebar.hnav.panels",e.find("> .panel")).siblings().removeClass("active"))},d=a.fn.slidebar,a.fn.slidebar=c,a.fn.slidebar.Constructor=b,a.fn.basedrag.noConflict=function(){return a.fn.slidebar=d,this},a(document).one(BJUI.eventType.afterInitUI,function(){a("#bjui-leftside").slidebar({minW:150,maxW:700})}),a(document).on("click.bjui.slidebar.data-api",'[data-toggle="slidebar"]',function(b){var d=a(this).parent(),e=a("#bjui-accordionmenu"),f=d.data("bjui.slidebar.hnav.panels");e.find("> .panel").detach(),f&&f.length?(e.append(f),d.addClass("active").siblings().removeClass("active")):c.call(a(this),"initHnav"),b.preventDefault()})}(jQuery);
/**
 * B-JUI: bjui-contextmenu.js  v1.2
 */
+function(a){"use strict";function f(b){var c=arguments,d=b;return this.each(function(){var f=a(this),g=a.extend({},e.DEFAULTS,f.data(),"object"==typeof b&&b),h=f.data("bjui.contextmenu");h||f.data("bjui.contextmenu",h=new e(this,g)),"string"==typeof d&&a.isFunction(h[d])?([].shift.apply(c),c?h[d].apply(h,c):h[d]()):h.init()})}var b,c,d,e,g;a(function(){var e=function(){b=a('<div id="bjui-contextmenu"></div>').hide(),c=a('<div id="bjui-contextmenuShadow"></div>').hide(),d=[],a("body").append("<!-- contextmenu -->").append(b).append(c)};e()}),e=function(b,c){this.$element=a(b),this.options=c},e.DEFAULTS={id:void 0,shadow:!0,bindings:{},ctrSub:null},e.prototype.init=function(){var c,a=this,b=this.options;b.id&&(d.push({id:b.id,shadow:b.shadow,bindings:b.bindings||{},ctrSub:b.ctrSub}),c=d.length-1,this.$element.on("contextmenu",function(d){return a.display(c,this,d,b),!1}))},e.prototype.display=function(e,f,g){var m,n,i=this,j=d[e],k=BJUI.regional[j.id],l=FRAG[j.id];a.each(k,function(a){l=l.replace("#"+a+"#",k[a])}),b.html(l),a.each(j.bindings,function(c,d){a('[rel="'+c+'"]',b).on("click",function(){i.hide(),d(a(f),a("#bjui-"+j.id))})}),m=g.pageX,n=g.pageY,a(window).width()<m+b.width()&&(m-=b.width()),a(window).height()<n+b.height()&&(n-=b.height()),b.css({left:m,top:n}).show(),j.shadow&&c.css({width:b.width(),height:b.height(),left:m+3,top:n+3}).show(),a(document).one("click",i.hide),a.isFunction(j.ctrSub)&&j.ctrSub(a(f),a("#bjui-"+j.id))},e.prototype.hide=function(){b.hide(),c.hide()},e.prototype.show=function(b){var c=this;b.items&&b.items.length&&c.$element.on("contextmenu",function(d){var e=!0;return b.exclude&&c.$element.find(b.exclude).each(function(){return this==d.target||a(this).find(d.target).length?(e=!1,void 0):void 0}),e?(c.custom(b.items,d),!1):(d.stopPropagation(),!e)})},e.prototype.custom=function(d,e){var f,g,i,h,j,k;b.empty().html("<ul></ul>"),f=this,g=f.options,h=b.find("> ul"),a.each(d,function(b,c){var d="";c.icon&&(d='<i class="fa fa-'+c.icon+'"></i>'),"diver"==c.title?i=a('<li class="diver"></li>'):(i=a('<li><span class="icon">'+d+'</span><span class="title">'+c.title+"</span></li>"),c.func&&"string"==typeof c.func&&(c.func=c.func.toFunc()),c.func&&i.on("click",function(){f.hide(),c.func(f.$element,i)})),i.appendTo(h)}),j=e.pageX,k=e.pageY,a(window).width()<j+b.width()&&(j-=b.width()),a(window).height()<k+b.height()&&(k-=b.height()),b.css({left:j,top:k}).show(),g.shadow&&c.css({width:b.width(),height:b.height(),left:j+3,top:k+3}).show(),a(document).one("click",f.hide)},g=a.fn.contextmenu,a.fn.contextmenu=f,a.fn.contextmenu.Constructor=e,a.fn.contextmenu.noConflict=function(){return a.fn.contextmenu=g,this}}(jQuery);
/**
 * B-JUI: bjui-navtab.js  v1.2
 */
+function(g){"use strict";var i,k,q,c,j,d,a,m,h,n,f,b;var o;g(function(){var r=function(){i=0;c=g("#bjui-navtab");j=c.find(".navtab-tab");d=c.find(".navtab-panel");a=c.find(".tabsLeft");m=c.find(".tabsRight");h=c.find(".tabsMore");n=c.find(".tabsMoreList");f=j.find("li:first");b=n.find("li:first");a.click(function(){g(this).navtab("scrollPrev")});m.click(function(){g(this).navtab("scrollNext")});h.click(function(){n.show()});g(document).on("click.bjui.navtab.switchtab",function(v){var u=v.target.tagName=="I"?g(v.target).parent():g(v.target);if(h[0]!=u[0]){n.hide()}});var t,s;f.navtab("contextmenu",f).click(function(){g(this).navtab("switchTab","main")}).find("> a > span").html(function(v,u){return(t=u.replace("#maintab#",BJUI.regional.maintab))});s=g.extend({},p.DEFAULTS,f.data(),{id:"main",title:t});f.data("initOptions",s).data("options",s);if(f.attr("data-url")){g(document).one(BJUI.eventType.initUI,function(u){f.removeAttr("data-url").navtab("reload",s)})}setTimeout(function(){var u=g.parseJSON(g.cookie("navtaboptions"));u?g(document).navtab(u):f.navtab("switchTab","main")},100);b.click(function(){if(g(this).hasClass("active")){n.hide()}else{g(this).navtab("switchTab","main")}}).find("> a").html(function(v,u){return u.replace("#maintab#",BJUI.regional.maintab)})};r()});var p=function(s,r){this.$element=g(s);this.options=r;this.tools=this.TOOLS()};p.DEFAULTS={id:undefined,title:"New tab",url:undefined,type:"GET",data:{},loadingmask:true,fresh:false,autorefresh:false,onLoad:null,beforeClose:null,onClose:null};p.prototype.TOOLS=function(){var r=this;var s={getDefaults:function(){return p.DEFAULTS},getTabs:function(){return j.find("> li")},getPanels:function(){return d.find("> div")},getMoreLi:function(){return n.find("> li")},getTab:function(t){var u=this.indexTabId(t);if(u>=0){return this.getTabs().eq(u)}},getPanel:function(t){var u=this.indexTabId(t);if(u>=0){return this.getPanels().eq(u)}},getTabsW:function(u,t){return this.tabsW(this.getTabs().slice(u,t))},tabsW:function(t){var u=0;t.each(function(){u+=g(this).outerWidth(true)});return u},indexTabId:function(u){if(!u){return -1}var t=-1;this.getTabs().each(function(v){if(g(this).data("initOptions").id==u){t=v;return}});return t},getLeft:function(){return j.position().left},getScrollBarW:function(){return c.width()-55},visibleStart:function(){var w=this.getLeft(),u=0;var t=this.getTabs();for(var v=0;v<t.size();v++){if(u+w>=0){return v}u+=t.eq(v).outerWidth(true)}return 0},visibleEnd:function(){var w=this.getLeft(),u=0;var t=this.getTabs();for(var v=0;v<t.size();v++){u+=t.eq(v).outerWidth(true);if(u+w>this.getScrollBarW()){return v}}return t.size()},scrollPrev:function(){var t=this.visibleStart();if(t>0){this.scrollTab(-this.getTabsW(0,t-1))}},scrollNext:function(){var t=this.visibleEnd();if(t<this.getTabs().size()){this.scrollTab(-this.getTabsW(0,t+1)+this.getScrollBarW())}},scrollTab:function(u,t){j.animate({left:u},200,function(){r.tools.ctrlScrollBtn()})},scrollCurrent:function(){var t=this.tabsW(this.getTabs()),u=this.getScrollBarW();if(t<=u){this.scrollTab(0)}else{if(this.getLeft()<u-t){this.scrollTab(u-t)}else{if(i<this.visibleStart()){this.scrollTab(-this.getTabsW(0,i))}else{if(i>=this.visibleEnd()){this.scrollTab(u-this.getTabs().eq(i).outerWidth(true)-this.getTabsW(0,i))}}}}},ctrlScrollBtn:function(){var t=this.tabsW(this.getTabs());if(this.getScrollBarW()>t){a.hide();m.hide();j.parent().removeClass("tabsPageHeaderMargin")}else{a.show().removeClass("tabsLeftDisabled");m.show().removeClass("tabsRightDisabled");j.parent().addClass("tabsPageHeaderMargin");if(this.getLeft()>=0){a.addClass("tabsLeftDisabled")}else{if(this.getLeft()<=this.getScrollBarW()-t){m.addClass("tabsRightDisabled")}}}},switchTab:function(w){var v=this.getTabs().removeClass("active").eq(w).addClass("active"),u=this.getPanels(),x=u.eq(w),t=r.options.onSwitch?r.options.onSwitch.toFunc():null;if(v.data("reloadFlag")){u.hide();x.show();r.refresh(v.data("initOptions").id)}else{u.hide();if(x.find(".bjui-ajax-mask").length){x.show()}else{x.addClass("fade").removeClass("in").show();if(g.support.transition){x.one("bsTransitionEnd",function(){x.addClass("in")}).emulateTransitionEnd(10)}else{x.removeClass("fade")}}}this.getMoreLi().removeClass("active").eq(w).addClass("active");i=w;this.scrollCurrent();k=v;g.CurrentNavtab=q=x;if(t){t.apply(r)}x.trigger("bjui.navtab.switch")},closeTab:function(w,u){var A=this.getTabs().eq(w);var v=this.getMoreLi().eq(w);var B=this.getPanels().eq(w);var C=A.data("options");var x=C.beforeClose?C.beforeClose.toFunc():null;var z=C.onClose?C.onClose.toFunc():null;var t=true;if(x){t=x.apply(r,[B])}if(!t){r.tools.switchTab(w);return}A.remove();v.remove();B.trigger(BJUI.eventType.beforeCloseNavtab).remove();if(o){clearInterval(o)}if(z){z.apply(r)}if(i>=w){i--}if(u){var y=this.indexTabId(u);if(y>0){i=y}}i>0?g.cookie("navtaboptions",JSON.stringify(this.getTabs().eq(i).data("options"))):g.cookie("navtaboptions",null);this.scrollCurrent();this.switchTab(i)},closeOtherTab:function(t){t=t||i;this.getTabs().each(function(u){if(u>0&&t!=u){g(this).find("> .close").trigger("click")}})},loadUrlCallback:function(t){t.find(":button.btn-close").click(function(){r.closeCurrentTab()})},reload:function(v,t){t=t||v.data("reloadFlag");var u=v.data("options");if(t){v.data("reloadFlag",false);var w=r.tools.getPanel(u.id);if(v.hasClass("external")){r.openExternal(u.url,w)}else{r.tools.reloadTab(w,u)}}},reloadTab:function(w,t){var v=t.onLoad?t.onLoad.toFunc():null,u=t.autorefresh&&(isNaN(String(t.autorefresh))?15:t.autorefresh);w.trigger(BJUI.eventType.beforeLoadNavtab).ajaxUrl({type:(t.type||"GET"),url:t.url,data:t.data||{},loadingmask:t.loadingmask,callback:function(x){r.tools.loadUrlCallback(w);if(v){v.apply(r,[w])}if(o){clearInterval(o)}if(u){o=setInterval(function(){w.navtab("refresh")},u*1000)}if(BJUI.ui.clientPaging&&w.data("bjui.clientPaging")){w.pagination("setPagingAndOrderby",w)}}})}};return s};p.prototype.contextmenu=function(s){var r=this;s.contextmenu({id:"navtabCM",bindings:{reload:function(v,u){var w=u.find('[rel="reload"]');if(!w.hasClass("disabled")){r.refresh(v.data("initOptions").id)}},closeCurrent:function(w,u){var v=w.data("initOptions").id;if(v){r.closeTab(v)}else{r.closeCurrentTab()}},closeOther:function(w,u){if(w.index()==0){r.closeAllTab()}else{var v=r.tools.indexTabId(w.data("initOptions").id);r.tools.closeOtherTab(v>0?v:i)}},closeAll:function(v,u){r.closeAllTab()}},ctrSub:function(x,u){var y=u.find('[rel="reload"]');var z=u.find('[rel="closeCurrent"]');var A=u.find('[rel="closeOther"]');var w=u.find('[rel="closeAll"]');var v=r.tools.getTabs();if(x.index()==0){z.addClass("disabled");if(!x.data("url")){y.addClass("disabled")}}if(!x.hasClass("active")){y.addClass("disabled");if(!x.data("url")){y.addClass("disabled")}}}})};p.prototype.openTab=function(){var x=this,z=this.$element,B=this.options,w=this.tools;if(!B.url&&B.href){B.url=B.href}if(!B.url){BJUI.debug("Navtab Plugin: Error trying to open a navtab, url is undefined!");return}else{B.url=decodeURI(B.url).replacePlh(z.closest(".unitBox"));if(!B.url.isFinishedTm()){z.alertmsg("error",(B.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)));BJUI.debug("Navtab Plugin: The new navtab's url is incorrect, url: "+B.url);return}B.url=encodeURI(B.url)}var s=B.id?w.indexTabId(B.id):i;if(!B.id&&!BJUI.ui.overwriteHomeTab&&s==0){B.id="navtab";s=-1}if(s>=0){if(!B.id){delete B.id}var y=w.getTabs().eq(s);var A=w.getPanels().eq(s);var r=y.data("initOptions");var v=g.extend({},r,B);if(r.fresh||B.fresh||r.url!=B.url){x.reload(v)}i=s}else{var u='<li><a href="javascript:" title="#title#"><span>#title#</span></a><span class="close">&times;</span></li>';var y=g(u.replaceAll("#title#",B.title));var A=g('<div class="navtabPage unitBox"></div>');var t=g('<li><a href="javascript:" title="#title#">#title#</a></li>'.replaceAll("#title#",B.title));y.appendTo(j);A.appendTo(d);t.appendTo(n);y.data("options",B).data("initOptions",B);if(B.external||(B.url&&B.url.isExternalUrl())){y.addClass("external");this.openExternal(B.url,A)}else{y.removeClass("external");w.reloadTab(A,B)}i=w.getTabs().length-1;this.contextmenu(y);y.on("click",function(D){var C=g(D.target);if(C.hasClass("close")){x.closeTab(B.id)}else{if(C.closest("li").hasClass("active")){g(document).trigger("click");return false}else{x.switchTab(B.id)}}});t.on("click",function(){x.switchTab(B.id)})}w.switchTab(i);w.scrollCurrent();if(w.getTabs().length>2){w.closeTab(1)}};p.prototype.closeTab=function(r){var s=this.tools.indexTabId(r);if(s>0){this.tools.closeTab(s)}};p.prototype.closeCurrentTab=function(r){if(i>0){this.tools.closeTab(i,r)}};p.prototype.closeAllTab=function(){this.tools.getTabs().find("> .close").each(function(){g(this).trigger("click")})};p.prototype.reloadFlag=function(s){var r=s.split(",");for(var t=0;t<r.length;t++){var u=this.tools.getTab(r[t].trim());if(u){if(this.tools.indexTabId(r[t])==i){this.tools.reload(u,true)}else{u.data("reloadFlag",true)}}}};p.prototype.switchTab=function(r){var s=this.tools.indexTabId(r);this.tools.switchTab(s)};p.prototype.scrollPrev=function(){this.tools.scrollPrev()};p.prototype.scrollNext=function(){this.tools.scrollNext()};p.prototype.refresh=function(r){var s,t;if(!r){s=k}else{if(typeof r=="string"){s=this.tools.getTab(r)}else{s=r}}if(s&&s.length){t=this.tools.getPanel(s.data("initOptions").id);t.removeData("bjui.clientPaging");this.reload(s.data("initOptions"))}};p.prototype.reload=function(t,r){var v=this;var s=g.extend({},typeof t=="object"&&t);var w=s.id?this.tools.getTab(s.id):this.tools.getTabs().eq(i);if(w){var u=w.data("initOptions")||{},y=g.extend({},u,s);var x=function(){if(u.title!=y.title){w.find("> a").attr("title",y.title).find("> span").html(y.title)}if(!r){w.data("initOptions",y)}w.data("options",y);v.tools.reload(w,true)};if(s.reloadWarn){this.$element.alertmsg("confirm",s.reloadWarn,{okCall:function(){x()}})}else{x()}}};p.prototype.reloadForm=function(s,v){var A=g.extend({},typeof v=="object"&&v);var w,z;if(typeof v=="string"){w=this.tools.getTab(v);z=this.tools.getPanel(v)}else{w=A.id?this.tools.getTab(A.id):this.tools.getTabs().eq(i);z=A.id?this.tools.getPanel(A.id):this.tools.getPanels().eq(i)}if(w&&z){if(!w.hasClass("external")){var t=z.find("#pagerForm"),u={},r={};if(t.attr("action")){A.url=t.attr("action")}if(t&&t.length){r=t.serializeJson();if(!v||!v.type){A.type=t.attr("method")||"POST"}if(s){var y=BJUI.pageInfo;for(var x in y){u[y[x]]=r[y[x]]}}else{u=r}A.data=g.extend({},A.data||{},u)}}this.reload(A,true)}};p.prototype.getCurrentPanel=function(){return this.tools.getPanels().eq(i)};p.prototype.checkTimeout=function(){var r=JSON.parse(q.html());if(r&&r[BJUI.keys.statusCode]==BJUI.statusCode.timeout){this.closeCurrentTab()}};p.prototype.openExternal=function(r,t){var s=t.closest(".navtab-panel").height();t.html(FRAG.externalFrag.replaceAll("{url}",r).replaceAll("{height}",s+"px"))};function l(s){var r=arguments;var t=s;return this.each(function(){var w=g(this);var u=g.extend({},p.DEFAULTS,typeof s=="object"&&s);var v=w.data("bjui.navtab");if(!v){w.data("bjui.navtab",(v=new p(this,u)))}if(typeof t=="string"&&g.isFunction(v[t])){[].shift.apply(r);if(!r){v[t]()}else{v[t].apply(v,r)}}else{g.cookie("navtaboptions",JSON.stringify(u));v=new p(this,u);v.openTab()}})}var e=g.fn.navtab;g.fn.navtab=l;g.fn.navtab.Constructor=p;g.fn.navtab.noConflict=function(){g.fn.navtab=e;return this};g(document).on("click.bjui.navtab.data-api",'[data-toggle="navtab"]',function(v){var u=g(this),r=u.attr("href"),t=u.data(),s=t.options;if(s){if(typeof s=="string"){s=s.toObj()}if(typeof s=="object"){g.extend(t,s)}}if(!t.title){t.title=u.text()}if(r&&!t.url){t.url=r}l.call(u,t);v.preventDefault()})}(jQuery);
/**
 * B-JUI: bjui-dialog.js  v1.2
 */
+function(g){"use strict";var c;var f,h,d;g(function(){var i=function(){c=g("#bjui-resizable");h="dialogShadow";d=b.ZINDEX;g("body").append("<!-- dialog resizable -->").append(FRAG.resizable)};i()});var b=function(j,i){this.$element=g(j);this.options=i;this.tools=this.TOOLS()};b.DEFAULTS={id:"dialog",title:"New Dialog",url:undefined,type:"GET",data:{},loadingmask:true,width:500,height:300,minW:65,minH:40,max:false,mask:false,resizable:true,drawable:true,maxable:true,minable:true,fresh:false,onLoad:null,beforeClose:null,onClose:null};b.ZINDEX=30;b.prototype.TOOLS=function(){var i=this;var j={getDefaults:function(){return b.DEFAULTS},init:function(o){var m=i.options.width>i.options.minW?i.options.width:i.options.minW;var l=i.options.height>i.options.minH?i.options.height:i.options.minH;var n=g(window).width(),k=g(window).height(),p=i.options.max?0:((k-l)/3);if(m>n){m=n}if(l>k){l=k}o.height(l).width(m).show().css({left:(n-m)/2,top:0,opacity:0.1}).animate({top:p>0?p:0,opacity:1}).addClass(h).find("> .dialogContent").height(l-g("> .dialogHeader",o).outerHeight()-6);g("body").find("> .bjui-dialog-container").not(o).removeClass(h)},reload:function(o,l){var k=o.find("> .dialogContent"),n;l=l||o.data("initOptions");n=l.onLoad?l.onLoad.toFunc():null;o.trigger(BJUI.eventType.beforeLoadDialog);if(l.url){k.ajaxUrl({type:l.type||"GET",url:l.url,data:l.data||{},loadingmask:l.loadingmask,callback:function(p){if(n){n.apply(i,[o])}if(BJUI.ui.clientPaging&&o.data("bjui.clientPaging")){o.pagination("setPagingAndOrderby",o)}}})}else{if(l.target){var m=g(l.target).html()||o.data("bjui.dialog.target");g(l.target).empty();o.data("bjui.dialog.target",m);k.trigger(BJUI.eventType.beforeAjaxLoad).html(m).initui();if(n){n.apply(i,[o])}}}},resizeContent:function(n,m,k){var l=n.find("> .dialogContent");l.css({width:(m-12),height:(k-n.find("> .dialogHeader").outerHeight()-6)}).resizePageH();g(window).trigger(BJUI.eventType.resizeGrid)}};return j};b.prototype.open=function(){var k=this,i=k.options,m=g("body"),l=m.data(i.id);if(!i.target||!g(i.target).length){if(!i.url&&i.href){i.url=i.href}if(!i.url){BJUI.debug("Dialog Plugin: Error trying to open a dialog, url is undefined!");return}else{i.url=decodeURI(i.url).replacePlh(k.$element.closest(".unitBox"));if(!i.url.isFinishedTm()){k.$element.alertmsg("error",(i.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)));BJUI.debug("Dialog Plugin: The new dialog's url is incorrect, url: "+i.url);return}i.url=encodeURI(i.url)}}else{i.url=undefined}if(l){var o=l.data("initOptions")||i;this.switchDialog(l);if(l.is(":hidden")){l.show()}if(o.fresh||i.fresh||!o.url||o.url!=i.url){k.reload(i);l.data("initOptions",i)}}else{var n=BJUI.regional.dialog;var j=FRAG.dialog.replace("#close#",n.close).replace("#maximize#",n.maximize).replace("#restore#",n.restore).replace("#minimize#",n.minimize).replace("#title#",n.title);l=g(j).data("options",i).data("initOptions",i).css("zIndex",(d+=1)).hide().appendTo(m);l.find("> .dialogHeader > h1 > span.title").html(i.title);this.tools.init(l);if(i.maxable){l.find("a.maximize").show()}else{l.find("a.maximize").hide()}if(i.minable){l.find("a.minimize").show()}else{l.find("a.minimize").hide()}if(i.max){k.maxsize(l)}if(i.mask){this.addMask(l)}else{if(i.minable&&g.fn.taskbar){this.$element.taskbar({id:i.id,title:i.title})}}l.on("click",function(p){if(!g(p.target).data("bjui.dialog")){if(f&&f[0]!=l[0]){k.switchDialog(l)}}}).on("click",".btn-close",function(p){k.close(l);p.preventDefault()}).on("click",".dialogHeader > a",function(q){var p=g(this);if(p.hasClass("close")){k.close(l)}if(p.hasClass("minimize")){k.minimize(l)}if(p.hasClass("maximize")){k.switchDialog(l);k.maxsize(l)}if(p.hasClass("restore")){k.restore(l)}g(document).trigger("click");q.preventDefault();q.stopPropagation()}).on("dblclick",".dialogHeader > h1",function(p){if(i.maxable){if(l.find("> .dialogHeader > a.restore").is(":hidden")){l.find("a.maximize").trigger("click")}else{l.find("> .dialogHeader > a.restore").trigger("click")}}}).on("mousedown.bjui.dialog.drag",".dialogHeader > h1",function(p){k.switchDialog(l);if(!i.drawable||l.data("max")){return}l.data("bjui.dialog.task",true);setTimeout(g.proxy(function(){if(l.data("bjui.dialog.task")){k.drag(p,l)}},k),150);p.preventDefault()}).on("mouseup.bjui.dialog.drag",".dialogHeader > h1",function(p){l.data("bjui.dialog.task",false)}).on("mousedown.bjui.dialog.resize",'div[class^="resizable"]',function(q){if(!i.drawable||l.data("max")){return}var p=g(this);k.switchDialog(l);k.resizeInit(q,g("#bjui-resizable"),l,p);p.show();q.preventDefault()}).on("mouseup.bjui.dialog.resize",'div[class^="resizable"]',function(p){p.preventDefault()});m.data(i.id,l);this.tools.reload(l,i)}g.CurrentDialog=f=l};b.prototype.addMask=function(i){var j=i.data("bjui.dialog.mask");i.wrap('<div style="z-index:'+d+'" class="bjui-dialog-wrap"></div>');i.find("> .dialogHeader > a.minimize").hide();if(!j||!j.length){j=g(FRAG.dialogMask);j.css("zIndex",1).show().insertBefore(i);i.data("bjui.dialog.mask",j)}};b.prototype.refresh=function(m){if(m&&typeof m=="string"){var j=m.split(",");for(var k=0;k<j.length;k++){var l=g("body").data(j[k].trim());if(l){l.removeData("bjui.clientPaging");this.tools.reload(l)}}}else{f.removeData("bjui.clientPaging");this.tools.reload(f)}};b.prototype.reload=function(k,i){var m=this;var j=g.extend({},typeof k=="object"&&k);var n=(j.id&&g("body").data(j.id))||m.getCurrent();if(n&&n.length){var l=n.data("initOptions"),p=g.extend({},l,j);var o=function(){var q=n.find("> .dialogContent");if(l.width!=p.width){if(!p.max){n.animate({width:p.width},"normal",function(){q.width(p.width)})}else{n.width(p.width);q.width(p.width)}}if(l.height!=p.height){if(!p.max){n.animate({height:p.height},"normal",function(){q.height(p.height-n.find("> .dialogHeader").outerHeight()-6).resizePageH()})}else{n.height(p.height);q.height(p.height-n.find("> .dialogHeader").outerHeight()-6)}}if(l.maxable!=p.maxable){if(p.maxable){n.find("a.maximize").show()}else{n.find("a.maximize").hide()}}if(l.minable!=p.minable){if(p.minable){n.find("a.minimize").show()}else{n.find("a.minimize").hide()}}if(l.max!=p.max&&p.max){setTimeout(m.maxsize(n),10)}if(l.mask!=p.mask){if(p.mask){m.addMask(n);if(g.fn.taskbar){m.$element.taskbar("closeDialog",p.id)}}else{if(p.minable&&g.fn.taskbar){m.$element.taskbar({id:p.id,title:p.title})}}}if(l.title!=p.title){n.find("> .dialogHeader > h1 > span.title").html(p.title);n.taskbar("changeTitle",p.id,p.title)}n.data("options",p);if(!i){n.data("initOptions",p)}m.tools.reload(n,p)};if(p.reloadWarn){n.alertmsg("confirm",p.reloadWarn,{okCall:function(){o()}})}else{o()}}};b.prototype.reloadForm=function(k,n){var j,q;if(typeof n=="string"){j=g("body").data(n);q=j.data("options")}else{if(typeof n=="object"){j=(n.id&&g("body").data(n.id))||this.getCurrent()}}if(j){if(typeof n=="object"){if(n.title){j.find("> .dialogHeader > h1 > span.title").html(n.title)}q=g.extend({},n,j.data("options"))}var l=j.find("#pagerForm"),m={},i={};if(l.attr("action")){q.url=l.attr("action")}if(l&&l.length){i=l.serializeJson();if(!n||!n.type){q.type=l.attr("method")||"POST"}if(k){var p=BJUI.pageInfo;for(var o in p){m[p[o]]=i[p[o]]}}else{m=i}q.data=g.extend({},q.data||{},m)}this.reload(q,true)}};b.prototype.getCurrent=function(){return f};b.prototype.switchDialog=function(k){var i=k.css("zIndex");if(f&&f!=k){var j=f.css("zIndex");f.css("zIndex",i);k.css("zIndex",j);g.CurrentDialog=f=k;if(g.fn.taskbar){this.$element.taskbar("switchTask",k.data("options").id)}}k.addClass(h);g("body").find("> .bjui-dialog-container").not(k).removeClass(h)};b.prototype.close=function(n){var k=this;var j=(typeof n=="string")?g("body").data(n):n;var p=j.data("bjui.dialog.mask");var q=j.data("options");var l=j.data("bjui.dialog.target");var m=q.beforeClose?q.beforeClose.toFunc():null;var o=q.onClose?q.onClose.toFunc():null;var i=true;if(!j||!q){return}if(m){i=m.apply(k,[j])}if(!i){k.switchDialog(j);return}if(q.target&&l){g(q.target).html(l)}if(p&&p.length){p.remove();j.unwrap()}else{if(g.fn.taskbar){this.$element.taskbar("closeDialog",q.id)}}j.animate({top:-j.outerHeight(),opacity:0.1},"normal",function(){g("body").removeData(q.id);j.trigger(BJUI.eventType.beforeCloseDialog).remove();if(o){o.apply(k)}var s=g("body").find(".bjui-dialog-container");var r=undefined;if(s.length){r=k.$element.getMaxIndexObj(s)}else{d=b.ZINDEX;f=null}if(r&&r.is(":visible")){k.switchDialog(r)}})};b.prototype.closeCurrent=function(){this.close(f)};b.prototype.checkTimeout=function(){var j=f.find("> .dialogContent");var i=JSON.parse(j.html());if(i&&i[BJUI.keys.statusCode]==BJUI.statusCode.timeout){this.closeCurrent()}};b.prototype.maxsize=function(j){j.data("original",{top:j.css("top"),left:j.css("left"),width:j.css("width"),height:j.css("height")}).data("max",true);j.find("> .dialogHeader > a.maximize").hide();j.find("> .dialogHeader > a.restore").show();var k=g(window).width();var i=g(window).height()-g("#bjui-taskbar").height()-1;j.css({top:0,left:0,width:k,height:i});this.tools.resizeContent(j,k,i)};b.prototype.restore=function(l){var i=l.data("original");var j=parseInt(i.width);var k=parseInt(i.height);l.css({top:i.top,left:i.left,width:j,height:k});this.tools.resizeContent(l,j,k);l.find("> .dialogHeader > a.maximize").show();l.find("> .dialogHeader > a.restore").hide();l.data("max",false)};b.prototype.minimize=function(i){i.hide();if(g.fn.taskbar){this.$element.taskbar("minimize",i)}};b.prototype.drag=function(k,j){var i=g("#bjui-dialogProxy");j.find("> .dialogContent").css("opacity",".3");j.basedrag({selector:"> .dialogHeader",stop:function(){j.css({left:j.css("left"),top:j.css("top")}).find("> .dialogContent").css("opacity",1);j.trigger(BJUI.eventType.afterDragDialog)},event:k,nounbind:true})};b.prototype.resizeDialog=function(q,k,l){var j;var m=parseInt(q.css("left"));var n=parseInt(q.css("top"));var p=parseInt(q.css("height"));var i=parseInt(q.css("width"));if(l=="n"||l=="nw"){j=parseInt(k.css("top"))-n}else{j=p-parseInt(k.css("height"))}if(n<0){n=0}k.css({top:n,left:m,width:i+2,height:p+1}).find("> .dialogContent").css("width",(i-10));if(l!="w"&&l!="e"){var o=k.find("> .dialogContent");o.css({height:p-k.find("> .dialogHeader").outerHeight()-6}).resizePageH()}g(window).trigger(BJUI.eventType.resizeGrid)};b.prototype.resizeInit=function(n,i,k,m){var j=this;var l=m.attr("tar");g("body").css("cursor",l+"-resize");i.css({top:k.css("top"),left:k.css("left"),height:k.outerHeight(),width:k.css("width")}).show();if(!this.options.dragCurrent){this.options.dragCurrent={$resizable:i,$dialog:k,target:l,oleft:parseInt(i.css("left"))||0,owidth:parseInt(i.css("width"))||0,otop:parseInt(i.css("top"))||0,oheight:parseInt(i.css("height"))||0,ox:n.pageX||n.screenX,oy:n.pageY||n.clientY};g(document).on("mouseup.bjui.dialog.resize",g.proxy(j.resizeStop,j));g(document).on("mousemove.bjui.dialog.resize",g.proxy(j.resizeStart,j))}};b.prototype.resizeStart=function(p){var o=this.options.dragCurrent;if(!o){return}if(!p){var p=window.event}var j=(p.pageX||p.screenX)-o.ox;var k=(p.pageY||p.clientY)-o.oy;var n=o.$dialog.data("bjui.dialog.mask");if(!n||!n.length){if((p.pageY||p.clientY)<=0||(p.pageY||p.clientY)>=(g(window).height()-o.$dialog.find("> .dialogHeader").outerHeight())){return}}var m=o.target;var l=o.owidth;var i=o.oheight;if(m!="n"&&m!="s"){l+=(m.indexOf("w")>=0)?-j:j}if(l>=this.options.minW){if(m.indexOf("w")>=0){o.$resizable.css("left",(o.oleft+j))}if(m!="n"&&m!="s"){o.$resizable.css("width",l)}}if(m!="w"&&m!="e"){i+=(m.indexOf("n")>=0)?-k:k}if(i>=this.options.minH){if(m.indexOf("n")>=0){o.$resizable.css("top",(o.otop+k))}if(m!="w"&&m!="e"){o.$resizable.css("height",i)}}};b.prototype.resizeStop=function(j){var i=this.options.dragCurrent;if(!i){return false}g(document).off("mouseup.bjui.dialog.resize");g(document).off("mousemove.bjui.dialog.resize");this.options.dragCurrent=null;this.resizeDialog(i.$resizable,i.$dialog,i.target);g("body").css("cursor","");i.$resizable.hide()};function e(j){var i=arguments;var k=j;return this.each(function(){var n=g(this);var l=g.extend({},b.DEFAULTS,typeof j=="object"&&j);var m=n.data("bjui.dialog");if(!m){n.data("bjui.dialog",(m=new b(this,l)))}if(typeof k=="string"&&g.isFunction(m[k])){[].shift.apply(i);if(!i){m[k]()}else{m[k].apply(m,i)}}else{m=new b(this,l);m.open()}})}var a=g.fn.dialog;g.fn.dialog=e;g.fn.dialog.Constructor=b;g.fn.dialog.noConflict=function(){g.fn.dialog=a;return this};g(document).on("click.bjui.dialog.data-api",'[data-toggle="dialog"]',function(m){var l=g(this),i=l.attr("href"),k=l.data(),j=k.options;if(j){if(typeof j=="string"){j=j.toObj()}if(typeof j=="object"){g.extend(k,j)}}if(!k.title){k.title=l.text()}if(i&&!k.url){k.url=i}e.call(l,k);m.preventDefault()})}(jQuery);
/**
 * B-JUI: bjui-taskbar.js  v1.2
 * reference: bjui-dialog.js
 */
+function(a){"use strict";function l(b){var c=arguments,d=b;return this.each(function(){var e=a(this),f=a.extend({},k.DEFAULTS,e.data(),"object"==typeof b&&b),g=e.data("bjui.taskbar");g?g.options.id!=f.id&&e.data("bjui.taskbar",g=new k(this,f)):e.data("bjui.taskbar",g=new k(this,f)),"string"==typeof d&&a.isFunction(g[d])?([].shift.apply(c),c?g[d].apply(g,c):g[d]()):g.init()})}var b,c,d,e,f,g,h,i,j,k,m;a(function(){var k=function(){b=a("#bjui-resizable"),c=a(FRAG.taskbar),d=c.find(".taskbarContent"),e=d.find("> ul"),f=c.find(".taskbarLeft"),g=c.find(".taskbarRight"),h="disabled",i="selected",j="taskbarMargin",a("body").append("<!-- dialog task bar -->").append(c),f.click(function(){a(this).taskbar("scrollLeft")}),g.click(function(){a(this).taskbar("scrollRight")})};k()}),k=function(b,c){this.$element=a(b),this.$task=null,this.options=c,this.tools=this.TOOLS()},k.DEFAULTS={id:void 0,title:void 0},k.prototype.init=function(){var d,b=this,c=e.find("#"+this.options.id);this.show(),c.length?c.find("> div > span.title").html(this.options.title):(d='<li id="#taskid#"><div class="taskbutton"><span><i class="fa fa-th-large"></i></span> <span class="title">#title#</span></div><div class="close"><i class="fa fa-times-circle"></i></div></li>',c=a(d.replace("#taskid#",this.options.id).replace("#title#",this.options.title)),c.appendTo(e)),this.contextmenu(c),this.switchTask(c),this.tools.scrollTask(c),c.click(function(d){if(a(d.target).closest("div").hasClass("close")||a(d.target).hasClass("close"))c.dialog("close",b.options.id);else{var e=a("body").data(b.options.id);c.hasClass("selected")?e.find(".dialogHeader a.minimize").trigger("click"):e.is(":hidden")?b.restoreDialog(e):(e.trigger("click"),c.addClass(i)),b.scrollCurrent(c)}return!1})},k.prototype.TOOLS=function(){var k={scrollCurrent:function(){var b,c,d,a=this.tasksW(this.getTasks());a>this.getTaskBarW()?(b=this,c=e.find("> li:last-child"),d=this.getTaskBarW()-c.position().left-c.outerWidth(!0),e.animate({left:d},200,function(){b.ctrlScrollBtn()})):this.ctrlScrollBtn()},getTaskBarW:function(){return d.width()-(f.is(":hidden")?f.width()+2:0)-(g.is(":hidden")?g.width()+2:0)},scrollTask:function(a){var c,b=this;a.position().left+this.getLeft()+a.outerWidth()>this.getBarWidth()?(c=this.getTaskBarW()-a.position().left-a.outerWidth(!0)-2,e.animate({left:c},200,function(){b.ctrlScrollBtn()})):a.position().left+this.getLeft()<0&&(c=this.getLeft()-(a.position().left+this.getLeft()),e.animate({left:c},200,function(){b.ctrlScrollBtn()}))},ctrlScrollBtn:function(){var a=this.tasksW(this.getTasks());this.getTaskBarW()>a?(d.removeClass(j),g.hide(),f.hide(),this.getTasks().eq(0).length&&this.scrollTask(this.getTasks().eq(0))):(d.addClass(j),g.show().removeClass(h),f.show().removeClass(h),this.getLeft()>=0&&f.addClass(h),this.getLeft()<=this.getTaskBarW()-a&&g.addClass(h))},getLeft:function(){return e.position().left},visibleStart:function(){var c,a=this.getLeft(),b=this.getTasks();for(c=0;c<b.size();c++)if(b.eq(c).position().left+b.eq(c).outerWidth(!0)+a>=0)return b.eq(c);return b.eq(0)},visibleEnd:function(){var c,a=this.getLeft(),b=this.getTasks();for(c=0;c<b.size();c++)if(b.eq(c).position().left+b.eq(c).outerWidth(!0)+a>this.getBarWidth())return b.eq(c);return b.eq(b.size()-1)},getTasks:function(){return e.find("> li")},tasksW:function(b){var c=0;return b.each(function(){c+=a(this).outerWidth(!0)}),c},getBarWidth:function(){return c.innerWidth()},getCurrent:function(){return e.find("li."+i)}};return k},k.prototype.contextmenu=function(b){var c=this;b.contextmenu({id:"dialogCM",bindings:{reload:function(a){a.dialog("refresh",c.options.id)},closeCurrent:function(a){var d=a.isTag("li")?a:c.tools.getCurrent();d.find(".close").trigger("click")},closeOther:function(b){var d=e.find("> li").not(b);d.each(function(){a(this).find(".close").trigger("click")})},closeAll:function(){var e=c.tools.getTasks();e.each(function(){a(this).find(".close").trigger("click")})}},ctrSub:function(a,b){var d=b.find('[rel="closeCurrent"]'),e=b.find('[rel="closeOther"]');c.tools.getCurrent().length?1==c.tools.getTasks().size()&&e.addClass(h):(d.addClass(h),e.addClass(h))}})},k.prototype.closeDialog=function(a){var b="string"==typeof a?this.getTask(a):a;b&&b.length&&(b.remove(),0==this.tools.getTasks().size()&&this.hide(),this.tools.scrollCurrent(),this.$element.removeData("bjui.taskbar"))},k.prototype.minimize=function(c){var d=this,e="string"==typeof c?a("body").data("dialog"):c,f=this.getTask(e.data("options").id);b.css({top:e.css("top"),left:e.css("left"),height:e.css("height"),width:e.css("width")}).show().animate({top:a(window).height()-60,left:f.position().left,width:f.outerWidth(),height:f.outerHeight()},250,function(){a(this).hide(),d.inactive(f)})},k.prototype.restoreDialog=function(c){var d=this.getTask(c.data("options").id);b.css({top:a(window).height()-60,left:d.position().left,height:d.outerHeight(),width:d.outerWidth()}).show().animate({top:c.css("top"),left:c.css("left"),width:c.css("width"),height:c.css("height")},250,function(){a(this).hide(),c.show()}),this.switchTask(d)},k.prototype.inactive=function(a){var b="string"==typeof a?this.getTask(a):a;b.removeClass(i)},k.prototype.scrollLeft=function(){var a=this.tools.visibleStart();this.tools.scrollTask(a)},k.prototype.scrollRight=function(){var a=this.tools.visibleEnd();this.tools.scrollTask(a)},k.prototype.scrollCurrent=function(a){this.tools.scrollTask(a)},k.prototype.switchTask=function(a){this.tools.getCurrent().removeClass(i);var b="string"==typeof a?this.getTask(a):a;b.addClass(i)},k.prototype.getTask=function(a){return e.find("#"+a)},k.prototype.changeTitle=function(a,b){var c=this.getTask(a);c&&b&&c.find(".title").html(b)},k.prototype.show=function(){c.is(":hidden")&&c.show().animate({bottom:0},500)},k.prototype.hide=function(){c.is(":visible")&&c.animate({bottom:-50},500,function(){c.hide()})},m=a.fn.taskbar,a.fn.taskbar=l,a.fn.taskbar.Constructor=k,a.fn.taskbar.noConflict=function(){return a.fn.taskbar=m,this}}(jQuery);
/**
 * B-JUI: bjui-ajax.js  v1.2
 */
+function(e){"use strict";var d;var b=function(g,f){var h=this;this.$element=e(g);this.options=f;this.tools=this.TOOLS()};b.DEFAULTS={reload:true,loadingmask:true};b.NAVTAB="navtab";b.prototype.TOOLS=function(){var f=this;var g={getPagerForm:function(l,h){var k=l.isTag("form")?l[0]:l.find("#pagerForm:first")[0];var j=e.extend({},BJUI.pageInfo);if(l.data("bjui.clientPaging")){h=e.extend({},l.data("bjui.clientPaging"),h);l.data("bjui.clientPaging",h)}if(k){for(var i in j){var m="";if(h&&h[i]){m=h[i]}if(!k[j[i]]){e('<input type="hidden" name="'+j[i]+'" value="'+m+'">').appendTo(e(k))}else{if(m){k[j[i]].value=m}}}}return k},getTarget:function(){if(f.$element.closest(".navtab-panel").length){return b.NAVTAB}else{return"dialog"}}};return g};b.prototype.ajaxForm=function(h){var i=this;var g=this.$element,l=h&&h.callback,j=g.attr("enctype");h=e.extend({},i.options,typeof h=="object"&&h);if(l){l=l.toFunc()}var f=function(n,o,m){if(n[BJUI.keys.statusCode]==BJUI.statusCode.timeout){g.alertmsg("info",n[BJUI.keys.message]||FRAG.sessionTimout);BJUI.loadLogin()}else{l?l.apply(i,[n,g]):e.proxy(i.ajaxCallback(n),i)}};var k=function(){var m={loadingmask:h.loadingmask,async:h.async!=undefined?h.async:true,type:g.attr("method"),url:g.attr("action"),callback:f,error:e.proxy(i.ajaxError,i)};if(j&&j=="multipart/form-data"){if(window.FormData){e.extend(m,{data:new FormData(g[0]),contentType:false,processData:false})}else{e.extend(m,{data:g.serializeArray(),files:g.find(":file"),iframe:true,processData:false})}}else{e.extend(m,{data:g.serializeArray()})}g.doAjax(m)};if(h.confirmMsg){g.alertmsg("confirm",h.confirmMsg,{okCall:k,cancelCall:function(){if(g.data("validator")!=undefined){g.data("validator").holdSubmit(false)}}})}else{k()}};b.prototype.ajaxDone=function(g){var f=this.$element;switch(g[BJUI.keys.statusCode]){case BJUI.statusCode.error:if(g[BJUI.keys.message]){f.alertmsg("error",g[BJUI.keys.message])}break;case BJUI.statusCode.info:if(g[BJUI.keys.message]){f.alertmsg("info",g[BJUI.keys.message])}break;case BJUI.statusCode.warn:if(g[BJUI.keys.message]){f.alertmsg("warn",g[BJUI.keys.message])}break;case BJUI.statusCode.timeout:f.alertmsg("info",g[BJUI.keys.message]||FRAG.sessionTimout);BJUI.loadLogin();break;default:if(g[BJUI.keys.message]){f.alertmsg("correct",g[BJUI.keys.message])}break}};b.prototype.ajaxError=function(i,f,g){var h=i.responseText.trim();if(h.startsWith("{")){this.ajaxDone(h.toObj())}else{this.$element.alertmsg("error","<div>Http status: "+i.status+" "+i.statusText+"</div>"+"<div>ajaxOptions: "+f+" </div>"+"<div>thrownError: "+g+" </div>"+"<div>"+h+"</div>")}};b.prototype.ajaxCallback=function(h){var i=this;var g=i.$element;var f=g.closest(".bjui-layout");i.ajaxDone(h);if(h[BJUI.keys.statusCode]==BJUI.statusCode.ok){if(f&&f.length){i.divCallback(h,f)}else{if(i.tools.getTarget()==b.NAVTAB){i.navtabCallback(h)}else{i.dialogCallback(h)}}}};b.prototype.divCallback=function(l,h){var j=this;var m,n;if(e.CurrentNavtab){n=e.CurrentNavtab.find('[data-toggle="ajaxsearch"]');m=n.data()}else{if(e.CurrentDialog){n=e.CurrentDialog.find('[data-toggle="ajaxsearch"]');m=$formDialog.data()}}if(l.tabid){setTimeout(function(){n?n.bjuiajax("doSearch",m):j.$element.navtab("reloadFlag",l.tabid)},100)}if(l.dialogid){setTimeout(function(){n?n.bjuiajax("doSearch",m):j.$element.dialog("refresh",l.dialogid)},100)}if(l.divid){setTimeout(function(){j.$element.bjuiajax("refreshDiv",l.divid)},100)}if(j.options.reload){var g=j.tools.getPagerForm(h);var f=null,k=null;if(g){f=g.attr("action");k=g.attr("method")||"GET"}else{f=h.data("url");k=h.data("type")||"GET"}if(f){h.ajaxUrl({url:f,type:k})}}if(j.options.reloadNavtab){setTimeout(function(){n?n.bjuiajax("doSearch",m):j.$element.navtab("refresh")},100)}if(l.forward){var i=function(){h.ajaxUrl({url:l.forward})};if(l.forwardConfirm){j.$element.alertmsg("confirm",l.forwardConfirm,{okCall:function(){i()}})}else{i()}}};b.prototype.navtabCallback=function(i){var j=this;var h,g;if(e.CurrentNavtab){g=e.CurrentNavtab.find('[data-toggle="ajaxsearch"]');h=g.data()}else{if(e.CurrentDialog){g=e.CurrentDialog.find('[data-toggle="ajaxsearch"]');h=$formDialog.data()}}if(i.tabid){setTimeout(function(){g?g.bjuiajax("doSearch",h):j.$element.navtab("reloadFlag",i.tabid)},100)}if(i.dialogid){setTimeout(function(){g?g.bjuiajax("doSearch",h):j.$element.dialog("refresh",i.dialogid)},100)}if(i.divid){setTimeout(function(){j.$element.bjuiajax("refreshDiv",i.divid)},100)}if(i.datagrid){setTimeout(function(){e.each(i.datagrid.join(","),function(k,l){e("#"+l.trim()).datagrid("refresh")})},100)}if(i.closeCurrent&&!i.forward){j.$element.navtab("closeCurrentTab")}else{if(j.options.reload){setTimeout(function(){g?g.bjuiajax("doSearch",h):j.$element.navtab("refresh")},100)}}if(i.forward){var f=function(){j.$element.navtab("reload",{url:i.forward})};if(i.forwardConfirm){j.$element.alertmsg("confirm",i.forwardConfirm,{okCall:function(){f()},cancelCall:function(){if(i.closeCurrent){j.$element.navtab("closeCurrentTab")}}})}else{f()}}};b.prototype.dialogCallback=function(i){var j=this;var h,g;if(e.CurrentNavtab){g=e.CurrentNavtab.find('[data-toggle="ajaxsearch"]');h=g.data()}else{if(e.CurrentDialog){g=e.CurrentDialog.find('[data-toggle="ajaxsearch"]');h=$formDialog.data()}}if(i.tabid){setTimeout(function(){g?g.bjuiajax("doSearch",h):j.$element.navtab("reloadFlag",i.tabid)},100)}if(i.dialogid){setTimeout(function(){g?g.bjuiajax("doSearch",h):j.$element.dialog("refresh",i.dialogid)},100)}if(i.divid){setTimeout(function(){j.$element.bjuiajax("refreshDiv",i.divid)},100)}if(i.closeCurrent&&!i.forward){j.$element.dialog("closeCurrent")}else{if(j.options.reload){setTimeout(function(){g?g.bjuiajax("doSearch",h):j.$element.dialog("refresh")},100)}}if(j.options.reloadNavtab){setTimeout(function(){g?g.bjuiajax("doSearch",h):j.$element.navtab("refresh")},100)}if(i.forward){var f=function(){j.$element.dialog("reload",{url:i.forward})};if(i.forwardConfirm){j.$element.alertmsg("confirm",i.forwardConfirm,{okCall:function(){f()}})}else{f()}}};b.prototype.pageCallback=function(g,j){var i=this;var k=e.extend({},b.DEFAULTS,g);var f=j||null;var h=null;if(f&&f.length){h=i.tools.getPagerForm(f,k);if(h){e.extend(k,e(h).data());i.reloadDiv(f,{type:e(h).attr("method")||"POST",url:e(h).attr("action"),data:e(h).serializeArray(),loadingmask:k.loadingmask})}else{i.reloadDiv(f,{type:f.attr("data-type")||"POST",url:f.attr("data-url"),loadingmask:k.loadingmask})}}else{if(i.tools.getTarget()==b.NAVTAB){f=e.CurrentNavtab;h=i.tools.getPagerForm(f,k);if(h){e.extend(k,e(h).data())}i.$element.navtab("reloadForm",false,k)}else{f=e.CurrentDialog;h=i.tools.getPagerForm(f,k);if(h){e.extend(k,e(h).data())}i.$element.dialog("reloadForm",false,k)}}};b.prototype.doSearch=function(h){var k=this,g=k.$element,j=null,m={pageCurrent:1},f=g.closest(".bjui-layout"),l=h.isValid;h=e.extend({},b.DEFAULTS,typeof h=="object"&&h);if(!h.url){h.url=g.attr("action")}if(!h.url){BJUI.debug("Error trying to submit form action: action url is undefined!");return}else{h.url=decodeURI(h.url).replacePlh(g.closest(".unitBox"));if(!h.url.isFinishedTm()){g.alertmsg("error",(h.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)));BJUI.debug("The submit form action is incorrect: "+h.url);return}h.url=encodeURI(h.url)}var i=function(){if(f&&f.length){j=k.tools.getPagerForm(f,m);var r=g.serializeJson(),q={};if(h.clearQuery){var p=BJUI.pageInfo;for(var o in p){q[p[o]]=r[p[o]]}var n=g.find('input[type="hidden"]');n.each(function(){q[e(this).attr("name")]=e(this).val()});r=q}k.reloadDiv(f,{type:g.attr("method")||"POST",url:h.url,data:r,loadingmask:h.loadingmask})}else{if(k.tools.getTarget()==b.NAVTAB){f=e.CurrentNavtab;j=k.tools.getPagerForm(f,m);g.navtab("reloadForm",h.clearQuery,h)}else{f=e.CurrentDialog;j=k.tools.getPagerForm(f,m);g.dialog("reloadForm",h.clearQuery,h)}}};if(!l){if(e.validator){g.isValid(function(n){if(n){i()}})}else{i()}}else{i()}};b.prototype.doLoad=function(h){var i=this,g=i.$element,f=h.target?e(h.target):null;h=e.extend({},b.DEFAULTS,typeof h=="object"&&h);if(!h.url){BJUI.debug("Error trying to open a ajax link: The url is undefined!");return}else{h.url=decodeURI(h.url).replacePlh(g.closest(".unitBox"));if(!h.url.isFinishedTm()){g.alertmsg("error",(h.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)));BJUI.debug("The ajax link incorrect: "+h.url);return}h.url=encodeURI(h.url)}if(!f||!f.length){BJUI.debug("Not set loaded 'ajax' content container, like [data-target].");return}if(f&&f.length){f.removeData("bjui.clientPaging");i.reloadDiv(f,h)}};b.prototype.refreshLayout=function(h){var i=this,g=i.$element,f=h.target?e(h.target):null;h=e.extend({},b.DEFAULTS,typeof h=="object"&&h);if(!f||!f.length){if(d){clearInterval(d)}BJUI.debug("Not set loaded 'ajax' content container, like [data-target].");return}if(f&&f.length){f.removeData("bjui.clientPaging");i.reloadDiv(f,e.extend({},f.data("options")||{},h))}};b.prototype.reloadDiv=function(f,g){var h=g.autorefresh&&(isNaN(String(g.autorefresh))?15:g.autorefresh);f.addClass("bjui-layout").data("options",g).ajaxUrl({type:g.type,url:g.url,data:g.data,loadingmask:g.loadingmask,callback:function(i){if(BJUI.ui.clientPaging&&f.data("bjui.clientPaging")){f.pagination("setPagingAndOrderby",f)}if(g.callback){g.callback.apply(this,[f])}if(d){clearInterval(d)}if(h){d=setInterval(function(){f.bjuiajax("refreshLayout",g)},h*1000)}}})};b.prototype.refreshDiv=function(h){if(h&&typeof h=="string"){var f=h.split(",");for(var g=0;g<f.length;g++){this.refreshLayout({target:"#"+f[g]})}}};b.prototype.doAjax=function(h){var i=this,g=i.$element;h=e.extend({},b.DEFAULTS,typeof h=="object"&&h);if(!h.url){BJUI.debug("Error trying to open a ajax link: url is undefined!");return}else{h.url=decodeURI(h.url).replacePlh(g.closest(".unitBox"));if(!h.url.isFinishedTm()){g.alertmsg("error",(h.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)));BJUI.debug("The ajax url is incorrect: "+h.url);return}h.url=encodeURI(h.url)}var j=h.callback&&h.callback.toFunc();var f=function(){g.doAjax({type:h.type,url:h.url,data:h.data,callback:j?j:e.proxy(function(k){i.ajaxCallback(k)},i)})};if(h.confirmMsg){g.alertmsg("confirm",h.confirmMsg,{okCall:function(){f()}})}else{f()}};b.prototype.doExport=function(i){var k=this,h=k.$element,g=i.target?e(i.target):null,j;if(!i.url){BJUI.debug("Error trying to open a ajax link: url is undefined!");return}else{i.url=decodeURI(i.url).replacePlh(h.closest(".unitBox"));if(!i.url.isFinishedTm()){h.alertmsg("error",(i.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)));BJUI.debug("The ajax url is incorrect: "+i.url);return}}var f=function(){if(!g||!g.length){if(k.tools.getTarget()==b.NAVTAB){g=e.CurrentNavtab}else{g=e.CurrentDialog}}j=k.tools.getPagerForm(g);if(j){i.url=encodeURI(i.url+(i.url.indexOf("?")==-1?"?":"&")+e(j).serialize())}e.fileDownload(i.url,{failCallback:function(l,m){if(l.trim().startsWith("{")){l=l.toObj()}k.ajaxDone(l)}})};if(i.confirmMsg){h.alertmsg("confirm",i.confirmMsg,{okCall:function(){f()}})}else{f()}};b.prototype.doExportChecked=function(i){var j=this,h=j.$element,g=i.target?e(i.target):null;if(!i.url){BJUI.debug("Error trying to open a export link: url is undefined!");return}else{i.url=decodeURI(i.url).replacePlh(h.closest(".unitBox"));if(!i.url.isFinishedTm()){h.alertmsg("error",(i.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)));BJUI.debug("The ajax url is incorrect: "+i.url);return}}var f=function(){if(!i.group){j.$element.alertmsg("error",i.warn||FRAG.alertNoCheckGroup.replace("#nocheckgroup#",BJUI.regional.nocheckgroup));return}if(!g||!g.length){if(j.tools.getTarget()==b.NAVTAB){g=e.CurrentNavtab}else{g=e.CurrentDialog}}var k=[];var l=g.find(":checkbox[name="+i.group+"]:checked");if(l.length==0){j.$element.alertmsg("error",FRAG.alertNotChecked.replace("#notchecked#",BJUI.regional.notchecked));return}l.each(function(){k.push(e(this).val())});i.url=i.url.setUrlParam((i.idname?i.idname:"ids"),k.join(","));e.fileDownload(i.url,{failCallback:function(m,n){if(m.trim().startsWith("{")){m=m.toObj()}j.ajaxDone(m)}})};if(i.confirmMsg){h.alertmsg("confirm",i.confirmMsg,{okCall:function(){f()}})}else{f()}};b.prototype.doAjaxChecked=function(i){var j=this,h=j.$element,g=i.target?e(i.target):null;i=e.extend({},b.DEFAULTS,typeof i=="object"&&i);if(!i.url){BJUI.debug("Error trying to open a del link: url is undefined!");return}else{i.url=decodeURI(i.url).replacePlh(h.closest(".unitBox"));if(!i.url.isFinishedTm()){h.alertmsg("error",(i.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)));BJUI.debug("The ajax url is incorrect: "+i.url);return}}var f=function(){if(!i.group){h.alertmsg("error",i.warn||FRAG.alertNoCheckGroup.replace("#nocheckgroup#",BJUI.regional.nocheckgroup));return}if(!g||!g.length){if(j.tools.getTarget()==b.NAVTAB){g=e.CurrentNavtab}else{g=e.CurrentDialog}}var k=[];var l=g.find(":checkbox[name="+i.group+"]:checked");var m=i.callback&&i.callback.toFunc();if(l.length==0){h.alertmsg("error",FRAG.alertNotChecked.replace("#notchecked#",BJUI.regional.notchecked));return}l.each(function(){k.push(e(this).val())});i.url=i.url.setUrlParam((i.idname?i.idname:"ids"),k.join(","));h.doAjax({type:i.type,url:i.url,data:i.data,callback:m?m:e.proxy(function(n){j.ajaxCallback(n)},j)})};if(i.confirmMsg){h.alertmsg("confirm",i.confirmMsg,{okCall:function(){f()}})}else{f()}};function c(g){var f=arguments;var h=g;return this.each(function(){var k=e(this);var i=e.extend({},b.DEFAULTS,k.data(),typeof g=="object"&&g);var j=k.data("bjui.bjuiajax");if(!j){k.data("bjui.bjuiajax",(j=new b(this,i)))}if(typeof h=="string"&&e.isFunction(j[h])){[].shift.apply(f);if(!f){j[h]()}else{j[h].apply(j,f)}}else{return}})}var a=e.fn.bjuiajax;e.fn.bjuiajax=c;e.fn.bjuiajax.Constructor=b;e.fn.bjuiajax.noConflict=function(){e.fn.bjuiajax=a;return this};e(document).on("submit.bjui.bjuiajax.data-api",'form[data-toggle="ajaxform"]',function(h){var g=e(this),f=g.data();c.call(g,"ajaxForm",f);h.preventDefault()});e(function(){if(e.validator){e(document).on(BJUI.eventType.initUI,function(f){e(f.target).find('form[data-toggle="ajaxsearch"]').each(function(){var g=e(this),h=g.data();h.isValid=true;g.validator({valid:function(i){c.call(g,"doSearch",h)}})})})}else{e(document).on("submit.bjui.bjuiajax.data-api",'form[data-toggle="ajaxsearch"]',function(h){var g=e(this),f=g.data();c.call(g,"doSearch",f);h.preventDefault()})}});e(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="reloadsearch"]',function(i){var h=e(this),g;var f=h.closest("form");if(!f||!f.length){return}if(!f.parents(".bjui-pageHeader").parent().hasClass("navtabPage")){f.parents(".bjui-pageHeader").parent().addClass("bjui-layout")}g=f.data();g.clearQuery=h.data("clearQuery")||true;c.call(f,"doSearch",g);i.preventDefault()});e(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="ajaxload"]',function(h){var g=e(this);var f=g.data();if(!f.url){f.url=g.attr("href")}c.call(g,"doLoad",f);h.preventDefault()});e(document).on(BJUI.eventType.initUI,function(g){var f=e(g.target).find('[data-toggle="autoajaxload"]');f.each(function(){var h=e(this),i=h.data();i.target=this;c.call(h,"doLoad",i)})});e(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="refreshlayout"]',function(h){var g=e(this);var f=g.data();c.call(g,"refreshLayout",f)});e(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="doajax"]',function(h){var g=e(this);var f=g.data();if(!f.url){f.url=g.attr("href")}c.call(g,"doAjax",f);h.preventDefault()});e(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="doexport"]',function(h){var g=e(this);var f=g.data();if(!f.url){f.url=g.attr("href")}c.call(g,"doExport",f);h.preventDefault()});e(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="doexportchecked"]',function(h){var g=e(this);var f=g.data();if(!f.url){f.url=g.attr("href")}c.call(g,"doExportChecked",f);h.preventDefault()});e(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="doajaxchecked"]',function(h){var g=e(this);var f=g.data();if(!f.url){f.url=g.attr("href")}c.call(g,"doAjaxChecked",f);h.preventDefault()})}(jQuery);
/**
 * B-JUI: bjui-alertmsg.js  v1.2
 */
+function(a){"use strict";function f(b){var c=arguments,d=b;return this.each(function(){var f=a(this),g=a.extend({},e.DEFAULTS,f.data(),"object"==typeof b&&b),h=new e(this,g);"string"==typeof d&&a.isFunction(h[d])&&([].shift.apply(c),c?h[d].apply(h,c):h[d]())})}var b,c,d,e,g;a(function(){var d=function(){b=a(FRAG.alertBoxFrag).hide().html(""),c=a(FRAG.alertBackground).hide().html(""),a("body").append("<!-- alert msg box -->").append(b).append("<!-- alert msg box mask bg -->").append(c)};d()}),e=function(b,c){this.$element=a(b),this.options=c,this.tools=this.TOOLS(),this.clearTime=null},e.DEFAULTS={displayPosition:"topcenter",displayMode:"slide",autoClose:null,alertTimeout:3e3,mask:null,types:{error:"error",info:"info",warn:"warn",correct:"correct",confirm:"confirm"},fas:{error:"fa-times-circle",info:"fa-info-circle",warn:"fa-exclamation-circle",correct:"fa-check-circle",confirm:"fa-question-circle"}},e.prototype.TOOLS=function(){var e=this,f=e.options,g={getTitle:function(a){return f.title||BJUI.regional.alertmsg.title[a]},keydownOk:function(a){return a.which==BJUI.keyCode.ENTER?(a.data.target.trigger("click"),!1):!0},keydownEsc:function(a){a.which==BJUI.keyCode.ESC&&a.data.target.trigger("click")},openPosition:function(){var a=BJUI.alertMsg.displayPosition,c=BJUI.alertMsg.displayMode,d=460,e=b.outerHeight(),g={},h={};switch(a?f.displayPosition&&"topcenter"!=f.displayPosition&&(a=f.displayPosition):a=f.displayPosition,c?f.displayMode&&"slide"!=f.displayMode&&(c=f.displayMode):c=f.displayMode,a){case"topleft":g={top:0-e,left:0,"margin-left":0},h={top:0};break;case"topcenter":g={top:0-e},h={top:0};break;case"topright":g={top:0-e,left:"auto",right:0,"margin-left":0},h={top:0};break;case"middleleft":g={top:"50%",left:0-d,"margin-left":0,"margin-top":0-e/2},h={left:0};break;case"middlecenter":g={top:"0","margin-top":0-e/2},h={top:"50%"};break;case"middleright":g={top:"50%",left:"auto",right:0-d,"margin-top":0-e/2},h={right:0};break;case"bottomleft":g={top:"auto",left:0,bottom:0-e,"margin-left":0},h={bottom:0};break;case"bottomcenter":g={top:"auto",bottom:0-e},h={bottom:0};break;case"bottomright":g={top:"auto",left:"auto",right:0,bottom:0-e,"margin-left":0},h={bottom:0}}"slide"==c?b.css(g).show().animate(h,500):"fade"==c?(g.opacity=.1,b.css(g).css(h).show().animate({opacity:1},500)):b.css(g).css(h).show()},closePosition:function(){var d=BJUI.alertMsg.displayPosition,e=BJUI.alertMsg.displayMode,g=460,h=b.outerHeight(),i={};switch(d?f.displayPosition&&"topcenter"!=f.displayPosition&&(d=f.displayPosition):d=f.displayPosition,e?f.displayMode&&"slide"!=f.displayMode&&(e=f.displayMode):e=f.displayMode,d){case"topleft":i={top:0-h};break;case"topcenter":i={top:0-h};break;case"topright":i={top:0-h};break;case"middleleft":i={left:0-g};break;case"middlecenter":i={top:0-h};break;case"middleright":i={right:0-g};break;case"bottomleft":i={bottom:0-h};break;case"bottomcenter":i={bottom:0-h};break;case"bottomright":i={bottom:0-h}}"slide"==e?b.animate(i,500,function(){c.hide(),a(this).hide().empty()}):"fade"==e?b.animate({opacity:0},500,function(){c.hide(),a(this).hide().empty()}):(b.hide().remove(),c.hide())},open:function(g,h,i){var l,m,o,p,q,r,j=this,k="",n=BJUI.alertMsg.alertTimeout;if(i)for(o=0;o<i.length;o++)p=i[o].call?"callback":"",q=i[o].cls?i[o].cls:"default",r=i[o].cls&&"green"==i[o].cls?"check":"close",k+=FRAG.alertBtnFrag.replace("#btnMsg#",'<i class="fa fa-'+r+'"></i> '+i[o].name).replace("#callback#",p).replace("#class#",q);l=a(FRAG.alertBoxFrag.replace("#type#",g).replace("#fa#",f.fas[g]).replace("#title#",this.getTitle(g)).replace("#message#",h).replace("#btnFragment#",k)).hide().appendTo("body"),b&&b.length&&b.remove(),b=l,j.openPosition(),d&&(clearTimeout(d),d=null),(f.mask||null==f.mask&&f.types.info!=g&&f.types.correct!=g)&&c.show(),null==f.autoClose&&(f.types.info==g||f.types.correct==g)&&(n?f.alertTimeout&&3e3!=f.alertTimeout&&(n=f.alertTimeout):n=f.alertTimeout,d=setTimeout(function(){j.close()},n)),m=b.find(".btn"),m.each(function(b){a(this).on("click",a.proxy(function(){e.tools.close();var a=i[b].call;"string"==typeof a&&(a=a.toFunc()),"function"==typeof a&&a.call()},e)),i[b].keyCode==BJUI.keyCode.ENTER&&a(document).on("keydown.bjui.alertmsg.ok",{target:m.eq(b)},j.keydownOk),i[b].keyCode==BJUI.keyCode.ESC&&a(document).on("keydown.bjui.alertmsg.esc",{target:m.eq(b)},j.keydownEsc)})},alert:function(b,c,d){var e,g;a.extend(f,"object"==typeof d&&d),e=a.extend({},{okName:BJUI.regional.alertmsg.btnMsg.ok,okCall:null},f),g=[{name:e.okName,call:e.okCall,cls:"default",keyCode:BJUI.keyCode.ENTER}],this.open(b,c,g)},close:function(){a(document).off("keydown.bjui.alertmsg.ok").off("keydown.bjui.alertmsg.esc"),this.closePosition()}};return g},e.prototype.error=function(a,b){this.tools.alert(this.options.types.error,a,b)},e.prototype.info=function(a,b){this.tools.alert(this.options.types.info,a,b)},e.prototype.warn=function(a,b){this.tools.alert(this.options.types.warn,a,b)},e.prototype.ok=function(a,b){this.tools.alert(this.options.types.correct,a,b)},e.prototype.correct=function(a,b){this.tools.alert(this.options.types.correct,a,b)},e.prototype.confirm=function(b,c){var d,e;a.extend(this.options,"object"==typeof c&&c),d=a.extend({},{okName:BJUI.regional.alertmsg.btnMsg.ok,okCall:null,cancelName:BJUI.regional.alertmsg.btnMsg.cancel,cancelCall:null},this.options),e=[{name:d.okName,call:d.okCall,cls:"green",keyCode:BJUI.keyCode.ENTER},{name:d.cancelName,call:d.cancelCall,cls:"red",keyCode:BJUI.keyCode.ESC}],this.tools.open(this.options.types.confirm,b,e)},g=a.fn.alertmsg,a.fn.alertmsg=f,a.fn.alertmsg.Constructor=e,a.fn.alertmsg.noConflict=function(){return a.fn.alertmsg=g,this},a(document).on("click.bjui.alertmsg.data-api",'[data-toggle="alertmsg"]',function(b){var g,c=a(this),d=c.data(),e=d.options;return e&&("string"==typeof e&&(e=e.toObj()),"object"==typeof e&&a.extend(d,e)),(g=d.type)?(f.call(c,g,d.msg||g,d),b.preventDefault(),void 0):!1})}(jQuery);
/**
 * B-JUI: bjui-pagination.js  v1.2
 */
+function(a){"use strict";function c(c){var d=arguments,e=c;return this.each(function(){var f=a(this),g=a.extend({},b.DEFAULTS,f.data(),"object"==typeof c&&c),h=f.data("bjui.pagination");h||f.data("bjui.pagination",h=new b(this,g)),"string"==typeof e&&a.isFunction(h[e])?([].shift.apply(d),d?h[e].apply(h,d):h[e]()):h.init()})}var d,b=function(b,c){this.$element=a(b),this.options=c,this.tools=this.TOOLS()};b.DEFAULTS={first:"li.j-first",prev:"li.j-prev",next:"li.j-next",last:"li.j-last",nums:"li.j-num > a",jump:"li.jumpto",pageNumFrag:'<li class="#liClass#"><a href="javascript:;">#pageNum#</a></li>',total:0,pageSize:10,pageNum:10,pageCurrent:1,callback:function(){return!1}},b.prototype.TOOLS=function(){var b=this.options,c={pageNums:function(){return Math.ceil(b.total/b.pageSize)},getInterval:function(){var a=Math.ceil(b.pageNum/2),c=this.pageNums(),d=c-b.pageNum,e=this.getCurrentPage()>a?Math.max(Math.min(this.getCurrentPage()-a,d),0):0,f=this.getCurrentPage()>a?Math.min(this.getCurrentPage()+a,c):Math.min(b.pageNum,c);return{start:e+1,end:f+1}},getCurrentPage:function(){var a=parseInt(b.pageCurrent);return isNaN(a)?1:a},hasPrev:function(){return this.getCurrentPage()>1},hasNext:function(){return this.getCurrentPage()<this.pageNums()}};return c},b.prototype.init=function(){function n(c,d){c.on("click",function(c){var e={pageCurrent:d,pageSize:b.options.pageSize};b.setClientPaging(e),a(this).bjuiajax("pageCallback",e,b.$element.closest(".bjui-layout")),c.preventDefault()})}var b,c,d,e,f,g,h,i,j,k,l,m;for(BJUI.ui.clientPaging&&!this.getClientPaging()&&this.setClientPaging({pageCurrent:this.options.pageCurrent,pageSize:this.options.pageSize}),b=this,c=this.options,d=this.tools,e=d.getInterval(),f="",g=FRAG.pagination,h=BJUI.regional.pagination,i=e.start;i<e.end;i++)f+=c.pageNumFrag.replaceAll("#pageNum#",i).replaceAll("#liClass#",i==d.getCurrentPage()?"selected j-num":"j-num");g=g.replaceAll("#pageNumFrag#",f).replaceAll("#pageCurrent#",d.getCurrentPage()).replaceAll("#first#",h.first).replaceAll("#last#",h.last).replaceAll("#prev#",h.prev).replaceAll("#next#",h.next).replaceAll("#jumpto#",h.jumpto).replaceAll("#jump#",h.jump),this.$element.html(g),j=this.$element.find(c.first),k=this.$element.find(c.prev),l=this.$element.find(c.next),m=this.$element.find(c.last),d.hasPrev()?(j.add(k).find("> span").hide(),n(k,d.getCurrentPage()-1),n(j,1)):j.add(k).addClass("disabled").find("> a").hide(),d.hasNext()?(l.add(m).find("> span").hide(),n(l,d.getCurrentPage()+1),n(m,d.pageNums())):l.add(m).addClass("disabled").find("> a").hide(),this.$element.find(c.nums).each(function(b){n(a(this),b+e.start)}),this.$element.find(c.jump).each(function(){var d=a(this).find(":text"),e=a(this).find(".goto");e.on("click",function(){var e=d.val(),f={pageCurrent:e,pageSize:c.pageSize};e&&e.isPositiveInteger()&&(b.setClientPaging(f),a(this).bjuiajax("pageCallback",f,b.$element.closest(".bjui-layout")))}),d.keyup(function(a){a.keyCode==BJUI.keyCode.ENTER&&e.trigger("click")})})},b.prototype.changePagesize=function(){var a=this,b=a.$element.val(),c={pageSize:b};isNaN(b)||(a.setClientPaging(c),a.$element.bjuiajax("pageCallback",c,a.$element.closest(".bjui-layout")))},b.prototype.orderBy=function(){var c=this;c.$element.css({cursor:"pointer"}).click(function(){var b=a(this).data("orderField"),d=a(this).data("orderDirection"),e={orderField:b,orderDirection:d};c.setClientPaging(e),a(this).bjuiajax("pageCallback",e,c.$element.closest(".bjui-layout"))})},b.prototype.destroy=function(){this.$element.removeData("bjui.pagination").empty()},b.prototype.getTarget=function(){var c,b=this;return c=b.$element.closest(".bjui-layout").length?b.$element.closest(".bjui-layout"):b.$element.closest(".navtab-panel").length?a.CurrentNavtab:a.CurrentDialog},b.prototype.getClientPaging=function(){return this.getTarget().data("bjui.clientPaging")},b.prototype.setClientPaging=function(b){if(BJUI.ui.clientPaging){var c=this.getTarget();c.data("bjui.clientPaging",a.extend({},c.data("bjui.clientPaging")||{},b))}},b.prototype.setClientOrder=function(a){if(BJUI.ui.clientPaging){var b=this.getClientPaging();b&&b.orderField||this.setClientPaging(a)}},b.prototype.setPagingAndOrderby=function(a){var b=a.data("bjui.clientPaging");a.find('[data-toggle="pagination"]').pagination("destroy").pagination(b),b.pageSize&&a.find('select[data-toggle-change="changepagesize"]').selectpicker("val",b.pageSize),b.orderField&&a.find('th[data-order-field="'+b.orderField+'"]').addClass(b.orderDirection).siblings().removeClass("asc desc")},d=a.fn.pagination,a.fn.pagination=c,a.fn.pagination.Constructor=b,a.fn.pagination.noConflict=function(){return a.fn.pagination=d,this},a(document).on(BJUI.eventType.initUI,function(b){var d=a(b.target).find('[data-toggle="pagination"]');d.length&&c.call(d)}),a(document).on("change.bjui.pagination.data-api",'select[data-toggle-change="changepagesize"]',function(b){var d=a(this);d.data(),c.call(d,"changePagesize"),b.preventDefault()})}(jQuery);
/**
 * B-JUI: bjui-util.date.js  v1.2
 */
+function($){"use strict";function LZ(a){return(0>a||a>9?"":"0")+a}function formatDate(a,b){var c,d,e,f,g,h,i,j,k,l,m,C;for(b+="",c="",d=0,e="",f="",g=a.getFullYear()+"",h=a.getMonth()+1,i=a.getDate(),j=a.getDay(),k=a.getHours(),l=a.getMinutes(),m=a.getSeconds(),C={},g.length<4&&(g=""+(g-0+1900)),C["y"]=""+g,C["yyyy"]=g,C["yy"]=g.substring(2,4),C["M"]=h,C["MM"]=LZ(h),C["MMM"]=MONTH_NAMES[h-1],C["NNN"]=MONTH_NAMES[h+11],C["d"]=i,C["dd"]=LZ(i),C["E"]=DAY_NAMES[j+7],C["EE"]=DAY_NAMES[j],C["H"]=k,C["HH"]=LZ(k),C["h"]=0==k?12:k>12?k-12:k,C["hh"]=LZ(C["h"]),C["K"]=k>11?k-12:k,C["k"]=k+1,C["KK"]=LZ(C["K"]),C["kk"]=LZ(C["k"]),C["a"]=k>11?"PM":"AM",C["m"]=l,C["mm"]=LZ(l),C["s"]=m,C["ss"]=LZ(m);d<b.length;){for(e=b.charAt(d),f="";b.charAt(d)==e&&d<b.length;)f+=b.charAt(d++);c+=null!=C[f]?C[f]:f}return c}function _isInteger(a){return new RegExp(/^\d+$/).test(a)}function _getInt(a,b,c,d){var e,f;for(e=d;e>=c;e--){if(f=a.substring(b,b+e),f.length<c)return null;if(_isInteger(f))return f}return null}function parseDate(a,b){var c,d,e,f,h,i,j,k,l,m,n,o,p,q,r,s,t;for(a+="",b+="",c=0,d=0,e="",f="",j=new Date(1900,0,1),k=j.getFullYear(),l=j.getMonth()+1,m=1,n=j.getHours(),o=j.getMinutes(),p=j.getSeconds(),q="";d<b.length;){for(e=b.charAt(d),f="";b.charAt(d)==e&&d<b.length;)f+=b.charAt(d++);if("yyyy"==f||"yy"==f||"y"==f){if("yyyy"==f&&(h=4,i=4),"yy"==f&&(h=2,i=2),"y"==f&&(h=2,i=4),k=_getInt(a,c,h,i),null==k)return 0;c+=k.length,2==k.length&&(k=k>70?1900+(k-0):2e3+(k-0))}else if("MMM"==f||"NNN"==f){for(l=0,r=0;r<MONTH_NAMES.length;r++)if(s=MONTH_NAMES[r],a.substring(c,c+s.length).toLowerCase()==s.toLowerCase()&&("MMM"==f||"NNN"==f&&r>11)){l=r+1,l>12&&(l-=12),c+=s.length;break}if(1>l||l>12)return 0}else if("EE"==f||"E"==f){for(r=0;r<DAY_NAMES.length;r++)if(t=DAY_NAMES[r],a.substring(c,c+t.length).toLowerCase()==t.toLowerCase()){c+=t.length;break}}else if("MM"==f||"M"==f){if(l=_getInt(a,c,f.length,2),null==l||1>l||l>12)return 0;c+=l.length}else if("dd"==f||"d"==f){if(m=_getInt(a,c,f.length,2),null==m||1>m||m>31)return 0;c+=m.length}else if("hh"==f||"h"==f){if(n=_getInt(a,c,f.length,2),null==n||1>n||n>12)return 0;c+=n.length}else if("HH"==f||"H"==f){if(n=_getInt(a,c,f.length,2),null==n||0>n||n>23)return 0;c+=n.length}else if("KK"==f||"K"==f){if(n=_getInt(a,c,f.length,2),null==n||0>n||n>11)return 0;c+=n.length}else if("kk"==f||"k"==f){if(n=_getInt(a,c,f.length,2),null==n||1>n||n>24)return 0;c+=n.length,n--}else if("mm"==f||"m"==f){if(o=_getInt(a,c,f.length,2),null==o||0>o||o>59)return 0;c+=o.length}else if("ss"==f||"s"==f){if(p=_getInt(a,c,f.length,2),null==p||0>p||p>59)return 0;c+=p.length}else if("a"==f){if("am"==a.substring(c,c+2).toLowerCase())q="AM";else{if("pm"!=a.substring(c,c+2).toLowerCase())return 0;q="PM"}c+=2}else{if(a.substring(c,c+f.length)!=f)return 0;c+=f.length}}if(c!=a.length)return 0;if(2==l)if(0==k%4&&0!=k%100||0==k%400){if(m>29)return 0}else if(m>28)return 0;return(4==l||6==l||9==l||11==l)&&m>30?0:(12>n&&"PM"==q?n=n-0+12:n>11&&"AM"==q&&(n-=12),new Date(k,l-1,m,n,o,p))}function replaceTmEval(data){return data.replace(RegExp("({[A-Za-z0-9_+-]*})","g"),function($1){return eval("("+$1.replace(/[{}]+/g,"")+")")})}var MONTH_NAMES=new Array("January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),DAY_NAMES=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat");Date.prototype.formatDate=function(a){return formatDate(this,a)},String.prototype.parseDate=function(a){return this.length<a.length&&(a=a.slice(0,this.length)),parseDate(this,a)},Date.prototype.formatDateTm=function(a){var f,g,h,i,b=this.getFullYear(),c=this.getMonth()+1,d=this.getDate(),e=a.replaceAll("%y",b).replaceAll("%M",c).replaceAll("%d",d);return e=replaceTmEval(e),f=1900,g=0,h=1,i=e.split("-"),i.length>0&&(f=i[0]),i.length>1&&(g=i[1]-1),i.length>2&&(h=i[2]),new Date(f,g,h).formatDate("yyyy-MM-dd")}}(jQuery);
/**
 * B-JUI: bjui-datepicker.js  v1.2
 * reference: util.date.js
 */
+function(g){"use strict";var s,j,u,v,o,i,k,t,q,d,p,m,b,e,h,f,l,n;g(function(){var w=function(){var z=BJUI.regional.datepicker;var y=FRAG.calendarFrag.replace("#close#",z.close).replace("#prev#",z.prev).replace("#next#",z.next).replace("#clear#",z.clear).replace("#ok#",z.ok);s=g(y).hide();g("body").append("<!-- datepicker -->").append(s);j=s.find("> .main");u=s.find("a.prev");v=s.find("a.next");o=s.find("select[name=year]");i=s.find("select[name=month]");k=s.find(".time");t=k.find(":text");q=k.find("ul > li");d=k.find(".hh");p=k.find(".mm");m=k.find(".ss");b=j.find("> .tm");e=s.find(".close");h=j.find("> .body > .days");f=j.find("> .body > .dayNames");l=s.find(".clearBtn");n=s.find(".okBtn");var A="",x=BJUI.regional.datepicker;g.each(x.dayNames,function(C,B){A+="<dt>"+B+"</dt>"});f.html(A);g.each(x.monthNames,function(D,C){var B=D+1;i.append('<option value="'+B+'">'+C+"</option>")});s.on("selectstart",function(){return false})};w()});var r=function(y,x){this.$element=g(y);this.options=x;this.tools=this.TOOLS();this.$dateBtn=null;var w=new Date();this.options.minDate=w.formatDateTm(this.options.minDate);this.options.maxDate=w.formatDateTm(this.options.maxDate);this.events={focus_time:"focus.bjui.datepicker.time",click_prev:"click.bjui.datepicker.prev",click_next:"click.bjui.datepicker.next",click_ok:"click.bjui.datepicker.ok",click_days:"click.bjui.datepicker.days",click_clear:"click.bjui.datepicker.clear",click_close:"click.bjui.datepicker.close",click_tm:"click.bjui.datepicker.tm",click_spinner:"click.bjui.datepicker.spinner",mousedown_sp:"mousedown.bjui.datepicker.spinner",mouseup_sp:"mouseup.bjui.datepicker.spinner",change_ym:"change.bjui.datepicker.ym",click_time:"click.bjui.datepicker.time",keydown_time:"keydown.bjui.datepicker.time",keyup_time:"keyup.bjui.datepicker.time"}};r.DEFAULTS={pattern:"yyyy-MM-dd",minDate:"1900-01-01",maxDate:"2099-12-31",mmStep:1,ssStep:1};r.EVENTS={afterChange:"afterchange.bjui.datepicker"};r.prototype.TOOLS=function(){var w=this;var x={changeTmMenu:function(y){b.removeClass("hh").removeClass("mm").removeClass("ss").find("> ul").hide();if(y){b.addClass(y);t.removeClass("slt").filter("."+y).addClass("slt")}},clickTmMenu:function(z,y){b.find("> ul").hide().filter("."+y).show().find("> li").off(w.events.click_tm).on(w.events.click_tm,function(){var B=g(this);var A=parseInt(B.text())<10?("0"+B.text()):B.text();z.val(A)})},keydownInt:function(y){if(!((y.keyCode>=48&&y.keyCode<=57)||(y.keyCode==BJUI.keyCode.DELETE||y.keyCode==BJUI.keyCode.BACKSPACE))){return false}},changeTm:function(F,D){var z=parseInt(F.val()),C=parseInt(F.data("start"))||0,B=parseInt(F.data("end"));var E=parseInt(F.data("step")||1);var A=D?(D.data("add")?D.data("add"):-1):0;var y=z;if(A==1){if(z<=B-E){y=z+E}}else{if(A==-1){if(z>=(C+E)){y=z-E}}else{if(z>B){y=B}else{if(z<C){y=C}}}}if(y<10){y="0"+y}F.val(y)},closeCalendar:function(y){x.changeTmMenu();if(y){g(document).off(w.events.click_close);s.hide()}},get:function(y){return w.options[y]},getDays:function(A,z){return z==2?(A%4||(!(A%100)&&A%400)?28:29):(/4|6|9|11/.test(z)?30:31)},minMaxDate:function(A){var z=A.split("-").length-1;var y="y-M-d";if(z==1){y="y-M"}else{if(z==0){y="y"}}return A.parseDate(y)},getMinDate:function(){return this.minMaxDate(w.options.minDate)},getMaxDate:function(){var B=w.options.maxDate;var z=B.split("-").length-1;var y=this.minMaxDate(B);if(z<2){var A=this.getDays(y.getFullYear(),y.getMonth()+1);y.setDate(A);if(z==0){y.setMonth(11)}}return y},getDateWrap:function(A){var B=w.options.currentMonth||0;if(!A){A=this.parseDate(w.sDate)||new Date(new Date().setMonth(new Date().getMonth()+B))}var D=A.getFullYear();var z=A.getMonth()+1;var C=this.getDays(D,z);return{year:D,month:z,day:A.getDate(),hour:A.getHours(),minute:A.getMinutes(),second:A.getSeconds(),days:C,date:A}},changeDate:function(D,z,C){var B=new Date(D,z,0).getDate();if(C>B){C=B}var A=new Date(D,z-1,C||1);w.sDate=this.formatDate(A);return A},changeDateTime:function(F,E,D,B,z,C){var A=new Date(F,E-1,D,B,z,C);w.sDate=this.formatDate(A);return A},changeDay:function(y,A){if(!A){A=0}var z=this.getDateWrap();return this.changeDate(z.year,z.month+parseInt(A),y)},changeMonth:function(z){var A=o.get(0).selectedIndex;var y=o.find("option").length;var B=(i.val()*1)+z;if(B==0){if(A==0){B=1}else{B=12;A--;o.get(0).selectedIndex=A}}else{if(B==13){if(A==(y-1)){B=12}else{B=1;A++;o.get(0).selectedIndex=A}}}i.val(B).change()},parseDate:function(y){if(!y){return null}return y.parseDate(w.options.pattern)},formatDate:function(y){return y.formatDate(w.options.pattern)},hasHour:function(){return w.options.pattern.indexOf("H")!=-1},hasMinute:function(){return w.options.pattern.indexOf("m")!=-1},hasSecond:function(){return w.options.pattern.indexOf("s")!=-1},hasTime:function(){return this.hasHour()||this.hasMinute()||this.hasSecond()},hasDate:function(){var z=["y","M","d","E"];for(var y=0;y<z.length;y++){if(w.options.pattern.indexOf(z[y])!=-1){return true}}return false},afterChange:function(y){w.$element.trigger(r.EVENTS.afterChange,{value:y})},noHolidays:function(y){if(y.getDay()==0||y.getDay()==6){if(typeof workweekends!="undefined"){for(var z=0;z<workweekends.length;z++){if(workweekends[z].getTime()==y.getTime()){return true}}}return false}if(typeof holidays!="undefined"){for(var z=0;z<holidays.length;z++){if(holidays[z].getTime()==y.getTime()){return false}}}return true}};return x};r.prototype.addBtn=function(){var y=this,x=y.$element;if(!this.$dateBtn&&!this.options.addbtn&&!x.parent().hasClass("wrap_bjui_btn_box")){this.$dateBtn=g(FRAG.dateBtn);this.$element.css({"paddingRight":"15px"}).wrap('<span class="wrap_bjui_btn_box"></span>');var z=this.$element.parent();var w=this.$element.addClass("form-control").innerHeight();z.css({"position":"relative","display":"inline-block"});this.$dateBtn.css({"height":w,"lineHeight":w+"px"}).appendTo(z);this.$dateBtn.on("selectstart",function(){return false})}};r.prototype.init=function(){if(this.$element.val()){this.sDate=this.$element.val().trim()}var D=this;var I=this.options;var C=this.tools;var w=C.getDateWrap();var B=C.getMinDate(),x=C.getMaxDate();var H=B.getFullYear(),F=x.getFullYear();var G=this.$element.closest(".bjui-pageContent")||g(window);var z=this.$element.parents();var A=z.filter(function(){if(z.is(".bjui-dialog")){return true}else{return this.scrollHeight>g(".bjui-pageContent").innerHeight()}});o.empty();for(var E=H;E<=F;E++){o.append('<option value="'+E+'"'+(w.year==E?" selected":"")+">"+E+"</option>")}i.val(w.month);o.add(i).off(this.events.change_ym).on(this.events.change_ym,function(){if(C.hasTime()){var J=h.find(".slt");var y=C.changeDateTime(o.val(),i.val(),J.data("day"),w.hour,w.minute,w.second);D.create(C.getDateWrap(y),B,x)}else{var J=h.find(".slt");var y=C.changeDate(o.val(),i.val(),J.data("day"));D.create(C.getDateWrap(y),B,x)}});u.off(this.events.click_prev).on(this.events.click_prev,function(){D.tools.changeMonth(-1)});v.off(this.events.click_prev).on(this.events.click_prev,function(){D.tools.changeMonth(1)});l.off(this.events.click_clear).on(this.events.click_clear,function(){D.$element.val("").trigger("validate");C.closeCalendar(true)});n.off(this.events.click_ok).on(this.events.click_ok,function(){var J=h.find("dd.slt");if(J.hasClass("disabled")){return false}var y=C.changeDay(J.data("day"),J.data("month"));if(C.hasTime()){y.setHours(Number(d.val()));y.setMinutes(Number(p.val()));y.setSeconds(Number(m.val()))}C.closeCalendar(true);D.$element.val(C.formatDate(y)).focus().trigger("validate");C.afterChange(y)});e.off(this.events.click_close).on(this.events.click_close,function(){C.closeCalendar(true)});g(window).on("resize",function(){C.closeCalendar(true)});G.on("scroll",function(){C.closeCalendar(true)});A.on("scroll",function(){C.closeCalendar(true)});g(document).on("bjui.beforeLoadDialog bjui.resizeGrid",function(J){var y=g(J.target)});g(document).on(this.events.click_close,function(J){var y=g(J.target);if(J.target==D.$element.get(0)){return}if(y.closest("#calendar").length){return}if(y.data("toggle")=="datepicker"||y.parent().data("toggle")=="datepickerbtn"||y.data("toggle")=="datepickerbtn"){C.closeCalendar(false)}else{C.closeCalendar(true)}});this.create(w,B,x)};r.prototype.create=function(w,A,x){var F=this;var L=this.options;var E=this.tools;var I=new Date(w.year,w.month-1,1);var G=I.getDay();var C="";if(G>0){I.setMonth(I.getMonth()-1);var D=E.getDateWrap(I);for(var J=D.days-G+1;J<=D.days;J++){var K=new Date(w.year,w.month-2,J);var z=(K>=A&&K<=x)?"":" disabled";if(!z&&L.noHolidays){z=E.noHolidays(K)?"":" disabled"}C+='<dd class="other'+z+'" data-month="-1" data-day="'+J+'">'+J+"</dd>"}}for(var J=1;J<=w.days;J++){var K=new Date(w.year,w.month-1,J);var z=(K>=A&&K<=x)?"":"disabled";if(!z&&L.noHolidays){z=E.noHolidays(K)?"":" disabled"}if(J==w.day){z+=" slt"}C+='<dd class="'+z+'" data-day="'+J+'">'+J+"</dd>"}for(var J=1;J<=42-G-w.days;J++){var K=new Date(w.year,w.month,J);var z=(K>=A&&K<=x)?"":" disabled";if(!z&&L.noHolidays){z=E.noHolidays(K)?"":" disabled"}C+='<dd class="other'+z+'" data-month="1" data-day="'+J+'">'+J+"</dd>"}var H=h.html(C).find("dd");H.not(".disabled").off(this.events.click_days).on(this.events.click_days,function(){var N=g(this);if(!E.hasTime()){var M=E.changeDay(N.data("day"),N.data("month"));E.closeCalendar(true);F.$element.val(E.formatDate(M)).focus().trigger("validate");E.afterChange(M)}else{H.removeClass("slt");N.addClass("slt")}});if(!E.hasDate()){j.addClass("nodate")}else{j.removeClass("nodate")}if(E.hasTime()){k.show();d.val(w.hour<10?("0"+w.hour):w.hour).off(this.events.focus_time).on(this.events.focus_time,function(){E.changeTmMenu("hh")});var B=parseInt(w.minute/L.mmStep)*L.mmStep;p.val(B<10?("0"+B):B).data("step",L.mmStep).off(this.events.focus_time).on(this.events.focus_time,function(){E.changeTmMenu("mm")});m.val(E.hasSecond()?(w.second<10?("0"+w.second):w.second):"00").data("step",L.ssStep).off(this.events.focus_time).on(this.events.focus_time,function(){E.changeTmMenu("ss")});s.off("click").on("click",function(M){if(g(M.target).closest(".time").length){return}b.find("> ul").hide();E.changeTmMenu()});t.off(this.events.keydown_time).on(this.events.keydown_time,E.keydownInt).each(function(){var M=g(this);M.off(F.events.keyup_time).on(F.events.keyup_time,function(){E.changeTm(M)})}).off(this.events.click_time).on(this.events.click_time,function(){E.clickTmMenu(g(this),g(this).data("type"))});var y=null;q.off(this.events.click_spinner).on(this.events.click_spinner,function(N){var M=g(this);t.filter(".slt").each(function(){E.changeTm(g(this),M)});N.preventDefault()}).off(this.events.mousedown_sp).on(this.events.mousedown_sp,function(N){var M=g(this);y=setInterval(function(){t.filter(".slt").each(function(){E.changeTm(g(this),M)})},150)}).off(this.events.mouseup_sp).on(this.events.mouseup_sp,function(M){clearTimeout(y)});if(!E.hasHour()){d.attr("disabled",true)}if(!E.hasMinute()){p.attr("disabled",true)}if(!E.hasSecond()){m.attr("disabled",true)}}else{k.hide()}this.show()};r.prototype.show=function(){var y=this.$element.offset();var x=y.top+this.$element.get(0).offsetHeight;var w=s.outerHeight(true);if(x>w&&x>g(window).height()-w){x=y.top-w}s.css({left:y.left,top:x}).show().click(function(z){z.stopPropagation()})};function c(x){var w=arguments;var y=x;return this.each(function(){var B=g(this);var z=g.extend({},r.DEFAULTS,B.data(),typeof x=="object"&&x);var A=B.data("bjui.datepicker");if(!A){B.data("bjui.datepicker",(A=new r(this,z)))}if(typeof y=="string"&&g.isFunction(A[y])){[].shift.apply(w);if(!w){A[y]()}else{A[y].apply(A,w)}}else{A.init()}})}var a=g.fn.datepicker;g.fn.datepicker=c;g.fn.datepicker.Constructor=r;g.fn.datepicker.noConflict=function(){g.fn.datepicker=a;return this};g(document).on(BJUI.eventType.initUI,function(x){var w=g(x.target).find('[data-toggle="datepicker"]');w.attr("autocomplete","off");if(!w.length){return}if(w.data("nobtn")){return}c.call(w,"addBtn")});g(document).on("click.bjui.datepicker.data-api",'[data-toggle="datepickerbtn"]',function(w){var x=g(this).prevAll('[data-toggle="datepicker"]');if(!x||!x.is(":text")){return}c.call(x,x.data());w.preventDefault()});g(document).on("click.bjui.datepicker.data-api",'[data-toggle="datepicker"]',function(x){var w=g(this);if(w.data("onlybtn")){return}if(!w.is(":text")){return}c.call(w,w.data());x.preventDefault()})}(jQuery);
/**
 * B-JUI: bjui-ajaxtab.js  v1.2
 */
+function(c){"use strict";var d=function(f,e){this.$element=c(f);this.options=e};d.DEFAULTS={url:undefined,target:undefined,reload:false};d.prototype.init=function(){var e=this.options;if(!(e.url)){BJUI.debug("Ajaxtab Plugin: Error trying to open a tab, url is undefined!");return}else{e.url=decodeURI(e.url).replacePlh(this.$element.closest(".unitBox"));if(!e.url.isFinishedTm()){this.$element.alertmsg("error",(e.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)));BJUI.debug("Ajaxtab Plugin: The new ajaxtab's url is incorrect, url: "+e.url);return}e.url=encodeURI(e.url)}if(!e.target){BJUI.debug("Ajaxtab Plugin: Attribute 'target' is not defined!");return}if(e.reload){this.load()}else{var f=this.$element.data("bjui.ajaxtab.reload");if(!f){this.load()}else{this.$element.tab("show")}}};d.prototype.load=function(){var e=this.$element;var f=this.options;e.data("bjui.ajaxtab.reload",true).tab("show");c(f.target).ajaxUrl({url:f.url,data:{},callback:function(){}})};function b(f){var e=arguments;var g=f;return this.each(function(){var j=c(this);var h=c.extend({},d.DEFAULTS,j.data(),typeof f=="object"&&f);var i=j.data("bjui.ajaxtab");if(!i){j.data("bjui.ajaxtab",(i=new d(this,h)))}if(typeof g=="string"&&c.isFunction(i[g])){[].shift.apply(e);if(!e){i[g]()}else{i[g].apply(i,e)}}else{i.init()}})}var a=c.fn.ajaxtab;c.fn.ajaxtab=b;c.fn.ajaxtab.Constructor=d;c.fn.ajaxtab.noConflict=function(){c.fn.ajaxtab=a;return this};c(document).on("click.bjui.ajaxtab.data-api",'[data-toggle="ajaxtab"]',function(h){var g=c(this);var f=g.data();if(!f.url){f.url=g.attr("href")}b.call(g,f);h.preventDefault()})}(jQuery);
/**
 * B-JUI: bjui-tablefixed.js  v1.2
 */
+function(d){"use strict";var b=function(f,e){this.$element=d(f);this.options=e;this.tools=this.TOOLS()};b.SCROLLW=18;b.DEFAULTS={width:"100%"};b.prototype.TOOLS=function(){var e=this;var f={getLeft:function(h){var g=0;h.prevAll().each(function(){g+=d(this).outerWidth()});return g},getRight:function(h){var g=0;h.prevAll().andSelf().each(function(){g+=d(this).outerWidth()});return g-1},getCellNum:function(g){return g.prevAll().andSelf().size()},getColspan:function(g){return g.attr("colspan")||1},getStart:function(h){var g=1;h.prevAll().each(function(){g+=parseInt(d(this).attr("colspan")||1)});return g},getPageCoord:function(g){var h={x:0,y:0};while(g){h.x+=g.offsetLeft;h.y+=g.offsetTop;g=g.offsetParent}return h},getOffset:function(n,k){if(!d.support.leadingWhitespace){var m=n.offset();var i={offsetX:k.pageX||k.screenX,offsetY:k.pageY||k.screenY};var l={offsetX:i.offsetX-m.left,offsetY:i.offsetY-m.top};return l}var j=k.target;if(j.offsetLeft==undefined){j=j.parentNode}var h=this.getPageCoord(j);var g={x:window.pageXOffset+k.clientX,y:window.pageYOffset+k.clientY};var l={offsetX:g.x-h.x,offsetY:g.y-h.y};return l}};return f};b.prototype.resetWidth=function(){var f=this.$element,h=f.width(),e=f.find("table"),k=e&&e.width(),g=e.eq(0)&&e.eq(0).find("tr:first-child > th"),i=e.eq(1)&&e.eq(1).find("tr:first-child > td");if(e&&((h-k)<b.SCROLLW)){var j=parseInt((h-k)/g.length);e.width(h-b.SCROLLW);g.each(function(m){var l=parseInt(d(this).css("width"));d(this).width(l+j);if(i.eq(m)){i.eq(m).width(l+j)}})}};b.prototype.init=function(){if(!this.$element.isTag("table")){return}this.$container=this.$element.parent().addClass("bjui-resizeGrid");this.$fixed=undefined;var f=this.$container.width();var e=this.options.height;if(this.$container.hasClass("tab-pane")){f=this.$container.parent().width()-20}if(this.$container.parent().hasClass("tab-pane")){f=this.$container.parents(".tab-content").width()-22}if(typeof this.options.width=="string"&&this.options.width.indexOf("%")){this.options.newWidth=f*(this.options.width.replace("%","")/100)}else{this.options.newWidth=parseInt(this.options.width)}this.options.styles=[];this.$element.wrap('<div class="bjui-tablefixed clearfix"></div>');this.$fixed=this.$element.parent();this.initHead();this.initBody();this.resizeCol();this.resizeGrid();if(e&&!this.$fixed.closest(".tab-content").length){this.$fixed.height(e).addClass("fixedH")}};b.prototype.initHead=function(){var q=this.options.styles=[];var g=this.$element.find("thead > tr");var h=g.eq(0).find("> th");var p=this.$element;var f=0;var o=[];var n=[];var k=-1;h.each(function(t){var v=d(this),y=parseInt(v.attr("colspan")||1),u=v.attr("width"),x=v.attr("align"),r="";for(var s=0;s<y;s++){if(y==1&&u){r=' width="'+u+'"'}if(x){v.removeAttr("align").addClass(x)}o.push("<th"+r+"></th>")}v.attr("colsNum",k+=y);n[t]=y});var i=o.length,j=d('<tr class="resize-head">'+o.join("")+"</tr>");if(g.length>1){k=0;var e=g.eq(1).find("> th");d.each(n,function(v,s){s=parseInt(s);if(s>1){var y=parseInt(h.eq(v).attr("colsnum"));for(var t=s-1;t>=0;t--){var z=e.eq(k++),w=y-t,r=z.attr("width"),x=z.attr("align");var u=j.find("> th").eq(w);if(z&&z.length){z.attr("colsnum",w)}if(r){u.attr("width",r)}if(x){z.addClass(x).removeAttr("align")}}}})}this.$fixed.html(this.$element.html());var l=this.$fixed.find("thead");l.prepend(j);j.find("> th").each(function(r){var u=d(this);var t=[],s=u.innerWidth();t[0]=parseInt(s);f+=t[0];q[q.length]=t});f=parseInt((this.options.newWidth-b.SCROLLW-f)/i);var m=l.find("> tr:eq(0) > th");this.options.$ths=m;m.each(function(s){var u=d(this),t=q[s],r=u.attr("width");u.removeAttr("align").width(t[0]+f);t[0]=(t[0]+f);if(r){t[0]=parseInt(r);u.width(r).removeAttr("width")}});l.find("> tr:gt(0) > th").each(function(){var r=d(this);r.html('<div class="fixedtableCol">'+r.html()+"</div>")});l.wrap('<div class="fixedtableHeader" style="width:'+(this.options.newWidth-b.SCROLLW)+'px;overflow:hidden;"><div class="fixedtableThead"><table class="table table-bordered" style="width:'+(this.options.newWidth-b.SCROLLW)+'px;"></table></div></div>');this.$fixed.append('<div class="resizeMarker" style="display:none; height:300px; left:57px;"></div><div class="resizeProxy" style="left:377px; display:none; height:300px;"></div>')};b.prototype.initBody=function(){var i=this;var f=this.$fixed.find("> tbody");var h=this.options.styles;var g,e;if(this.options.height){e=(this.options.height-this.$fixed.find(".fixedtableHeader").height())+"px"}else{e="100%";var j=function(){var k=i.$fixed.parent().height(),l=i.$fixed.find(".fixedtableHeader").height(),m=i.$fixed.prev("p.red").length?(i.$fixed.prev("p.red").height()+10):0;i.$fixed.parent().css("overflow","hidden");i.$fixed.height(k).find(".fixedtableScroller").height(k-l-m)};d(document).one(BJUI.eventType.afterInitUI,function(k){j()})}g='style="height:'+e+'; overflow-y:auto;"';f.wrap('<div class="fixedtableScroller"'+g+' style="width:'+(this.options.newWidth)+'px;"><div class="fixedtableTbody"><table style="width:'+(this.options.newWidth-b.SCROLLW)+'px;"></table></div></div>');if(!this.$element.attr("class")){f.parent().addClass("table table-striped table-bordered table-hover")}else{f.parent().addClass(this.$element.attr("class"))}if(typeof this.$element.attr("data-selected-multi")!="undefined"){f.parent().attr("data-selected-multi",this.$element.attr("data-selected-multi"))}f.before('<thead><tr class="resize-head">'+this.$fixed.find("thead > tr").html()+"</tr></thead>");this.options.$tds=f.prev().find("> tr:first-child > th");if(this.options.nowrap){f.parent().addClass("nowrap")}f.closest(".fixedtableScroller").scroll(function(l){var n=d(this);var m=n.scrollLeft();var k=n.prev().find("> .fixedtableThead");k.css({"position":"relative","left":-m});return false})};b.prototype.resizeCol=function(){var g=this;var e=this.$fixed;var f=this.options.$ths;var h=this.options.$tds;var i=this.tools;e.find("thead > tr:gt(0) > th").each(function(j){var k=d(this);k.mouseover(function(n){var l=parseInt(e.find(".fixedtableThead").css("left"))||0;var o=i.getOffset(k,n).offsetX;var m=f.eq(k.attr("colsnum"));if(k.outerWidth()-o<5){k.css("cursor","col-resize").off("mousedown.bjui.tablefixed.resize").on("mousedown.bjui.tablefixed.resize",function(p){e.find("> .resizeProxy").show().css({left:i.getRight(m)+l+e.position().left,top:e.position().top,height:e.height(),cursor:"col-resize"}).basedrag({scop:true,cellMinW:20,relObj:e.find(".resizeMarker"),move:"horizontal",event:p,stop:function(){var v=e.find(".resizeProxy").position().left;var r=e.find(".resizeMarker").position().left;var q=v-r-m.outerWidth();var u=i.getCellNum(m);var t=m.width();var s=h.eq(u-1);var x=e.find("> .fixedtableHeader .table").width();if(q>5||q<-5){var w=m.width()+q;m.width(w);s.width(w);e.find(".table").width(x+q);e.find(".resizeMarker, .resizeProxy").hide();if((x+q+b.SCROLLW)<g.options.newWidth){e.find(".fixedtableScroller").width(x+q+b.SCROLLW)}else{var w=e.closest(".bjui-resizeGrid").innerWidth();if((x+q+b.SCROLLW)<w){w=(x+q+b.SCROLLW)}e.find(".fixedtableHeader").width(w-b.SCROLLW);e.find(".fixedtableScroller").width(w);e.width(w)}e.data("resizeGrid",true)}else{e.find(".resizeMarker, .resizeProxy").hide()}}});e.find("> .resizeMarker").show().css({left:i.getLeft(m)+l+e.position().left,top:e.position().top,height:e.height()})})}else{k.css("cursor","default").off("mousedown.bjui.tablefixed.resize")}return false})})};b.prototype.setOrderBy=function(e){var f=this.$element,g=f.find(".fixedtableCol"),h=d(FRAG.orderby.replace("#asc#",BJUI.regional.orderby.asc).replace("#desc#",BJUI.regional.orderby.desc));e=e||this.options;f.addClass("orderby");if(e.orderDirection){if(!BJUI.ui.clientPaging){f.addClass(e.orderDirection)}f.pagination("setClientOrder",{orderField:e.orderField,orderDirection:e.orderDirection})}if(!g.length){g=d('<div class="fixedtableCol">'+f.html()+"</div>").appendTo(f.empty())}h.data("orderField",e.orderField).appendTo(g).pagination("orderBy")};b.prototype.resizeGrid=function(){var f=this;var e=function(){d("div.bjui-resizeGrid").each(function(){var n=d(this),i=n.closest(".navtabPage"),h=n.width(),q=n.height(),j=n.find(".bjui-tablefixed"),l=j.prev("p.red"),m=l.length?(l.height()+10):0,p=j.find(".fixedtableThead").height(),k=f.options.newWidth,o;if(n.length&&n.is(":hidden")){if(!n.hasClass("tab-pane")){i.show();h=n.innerWidth();q=n.height();p=j.find(".fixedtableHeader").height();i.hide()}}if(h){n.find(".bjui-tablefixed").each(function(){var r=d(this),s=r.find(".fixedtableScroller");if(!r.data("resizeGrid")){o=h}else{o=k}r.width(o);r.find(".table").width(o-b.SCROLLW);r.find(".fixedtableHeader").width(o-b.SCROLLW);if(s[0].scrollHeight>s[0].clientHeight){s.find(".fixedtableScroller").width(o)}else{s.width(o-b.SCROLLW)}})}n.css("overflow","hidden");j.height(q).find(".fixedtableScroller").height(q-p-m)});var g=function(){var h=f.$fixed.parent().height(),i=f.$fixed.find(".fixedtableHeader").height(),j=f.$fixed.prev("p.red").length?(f.$fixed.prev("p.red").height()+10):0;f.$fixed.parent().css("overflow","hidden");f.$fixed.height(h).find(".fixedtableScroller").height(h-i-_tip)}};d(window).on(BJUI.eventType.resizeGrid,e)};function c(f){var e=arguments;var g=f;return this.each(function(){var j=d(this);var h=d.extend({},b.DEFAULTS,j.data(),typeof f=="object"&&f);var i=j.data("bjui.tablefixed");if(!i){j.data("bjui.tablefixed",(i=new b(this,h)))}if(typeof g=="string"&&d.isFunction(i[g])){[].shift.apply(e);if(!e){i[g]()}else{i[g].apply(i,e)}}else{i.init()}})}var a=d.fn.tablefixed;d.fn.tablefixed=c;d.fn.tablefixed.Constructor=b;d.fn.tablefixed.noConflict=function(){d.fn.tablefixed=a;return this};d(document).on(BJUI.eventType.initUI,function(g){var f=d(g.target).find('table[data-toggle="tablefixed"]');if(!f.length){return}c.call(f)});d(document).on(BJUI.eventType.afterInitUI,function(g){var f=d(g.target).find("th[data-order-field]");if(!f.length){return}c.call(f,"setOrderBy")});d(document).on("click.bjui.tr.data-api","tr[data-id]",function(k){var j=d(this),g=j.closest("table"),i=g.data("selectedMulti"),l=j.attr("data-id"),h="selected",f=g.closest(".unitBox").find("#bjui-selected");j.toggleClass(h);if(i){l=[];j.siblings("."+h).add((j.hasClass(h)?j:"")).each(function(){l.push(d(this).attr("data-id"))});l=l.join(",")}else{j.siblings().removeClass(h);if(!j.hasClass(h)){l=""}}if(f&&f.length){f.val(l)}else{f=d('<input type="hidden" id="bjui-selected" value="'+l+'">');f.appendTo(g.closest(".unitBox"))}})}(jQuery);
/**
 * B-JUI: bjui-tabledit.js  v1.2
 */
+function($){"use strict";var Tabledit=function(element,options){this.$element=$(element);this.options=options;this.tools=this.TOOLS();this.$tbody=this.$element.find("> tbody");if(!this.$tbody.length){this.$tbody=$("<tbody></tbody>");this.$element.append(this.$tbody)}this.$numAdd=this.$btnAdd=null};Tabledit.DEFAULTS={singleNoindex:true};Tabledit.EVENTS={afterDelete:"afterdelete.bjui.tabledit"};Tabledit.prototype.TOOLS=function(){var that=this;var tools={initSuffix:function($tbody){var $trs=$tbody.find("> tr");$trs.each(function(i){var $tr=$(this);$tr.find(":input, :file, a, label, div").each(function(){var $child=$(this),name=$child.attr("name"),val=$child.val(),fors=$child.attr("for"),id=$child.attr("id"),href=$child.attr("href"),group=$child.attr("data-group"),suffix=$child.attr("data-suffix"),nextselect=$child.attr("data-nextselect"),dataparam=$child.attr("data-param"),datatagid=$child.attr("data-tagid");if(name){$child.attr("name",name.replaceSuffix(i))}if(fors){$child.attr("for",fors.replaceSuffix(i))}if(id){$child.attr("id",id.replaceSuffix(i).replaceSuffix2(i))}if(href){$child.attr("href",href.replaceSuffix(i))}if(group){$child.attr("data-group",group.replaceSuffix(i))}if(suffix){$child.attr("data-suffix",suffix.replaceSuffix(i))}if(nextselect){$child.attr("data-nextselect",nextselect.replaceSuffix(i))}if(dataparam){$child.attr("data-param",dataparam.replaceSuffix(i))}if(datatagid){$child.attr("data-tagid",datatagid.replaceSuffix(i))}if(val&&val.indexOf("#index#")>=0){$child.val(val.replace("#index#",i+1))}if($child.hasClass("no")){var prefix=$child.data("prefix")?$child.data("prefix"):"";$child.val(prefix+(i+1))}})})},initEnter:function($tbody){var $texts=$tbody.find(":text");$texts.each(function(i){$(this).bind("keydown",function(e){if(e.which==BJUI.keyCode.ENTER){var nexInd=i+1;if($texts.eq(nexInd)){$texts.eq(nexInd).focus()}e.preventDefault()}})});this.initInput($tbody)},initInput:function($tbody){$tbody.find("> tr > td").each(function(){var $span=$(this).find(".input-hold");if(!$span.length){$span=$('<span class="input-hold" style="display:block; padding:0 4px; height:0px;overflow:hidden; font-size:12px; visibility:hidden;"></span>');$(this).append($span)}if(!$.support.leadingWhitespace){$(this).on("propertychange",":text",function(e){$span.text($(this).val())})}else{$(this).on("input",":text",function(e){$span.text($(this).val())})}})},initTbody:function(){var $table=that.$element,$tbody=that.$tbody;$tbody.find("> tr").each(function(){var $tr=$(this),$tds=$tr.find("> td"),$ths=$table.data("bjui.tabledit.tr").clone().find("> th");$tr.data("bjui.tabledit.oldTds",$tr.html());$ths.each(function(i){var $td=$tds.eq(i),val=$td.data("val"),$th=$(this),$child=$th.children(),$pic=$th.find(".pic-box");if(typeof val=="undefined"){val=$td.html()}if(!$td.data("noedit")){if($child.length){if($child.is("input:checkbox")||$child.is("input:radio")){$child.filter('[value="'+val+'"]').attr("checked","checked")}else{if($child.isTag("select")){if($th.hasClass("select-group")){var val=eval($td.data("val"));$child.each(function(i){if($(this).data("nextselect")){$(this).data("val",val[0][i]);$(this).next().data("val",val[0][i+1]);$(this).next().append('<option value="'+val[0][i+1]+'">'+val[1][i+1]+"</option>")}$(this).find('option[value="'+val[0][i]+'"]').attr("selected","selected")})}else{if($th.hasClass("select-other")){$child.append('<option value="'+$td.data("val")+'" selected>'+$td.text()+"</option>")}else{$child.find('option[value="'+$td.data("val")+'"]').attr("selected","selected")}}}else{if($th.hasClass("tag-group")){var val=eval($td.data("val"));$child.attr("value",val[1]);$th.find("input[type='hidden']").val(val[0])}else{if($pic.length){if($td.data("val")){$th.find(".pic-name").val($td.data("val"))}$pic.html($td.html())}else{if($child.hasClass("wrap_bjui_btn_box")){$child.find("input[data-toggle]").attr("value",val+"")}else{if($child.is("textarea")){$child.html(val);if($child.attr("data-toggle")=="kindeditor"){$child.attr("data-toggle-old","kindeditor").removeAttr("data-toggle")}}else{$child.attr("value",val+"")}}}}}}$td.html($th.html())}}});that.tools.initSuffix($tbody);if(!$table.data("noread")){$tr.initui();_doRead($tr)}});$tbody.on("click.bjui.tabledit.readonly",'[data-toggle="doedit"]',function(e){var clickEvent=$(this).data("click");clickEvent&&clickEvent.toFunc();_doEdit($(this).closest("tr"))}).on("click.bjui.tabledit.readonly",'[data-toggle="dosave"]',function(e){var $tr=$(this).closest("tr"),index=$tr.index(),callback=that.options.callback,_this=this;if($.hasFlash.v>=9){var uploadQueue=$tr.find(".uploadify-queue")}else{var uploadQueue=$tr.find(".queue")}if(uploadQueue.length>0&&uploadQueue.html()!=""){return}if(that.options.action){$tr.wrap('<form action="" method="POST"></form>');if($tr.attr("data-id")){var name=$table.find("> thead > tr:eq(0)").data("idname")||"id";$tr.before('<input type="hidden" name="'+name.replaceSuffix(index)+'" value="'+$tr.attr("data-id")+'">')}var data=$tr.parent().serializeArray();if(that.options.singleNoindex){$.each(data,function(ii,nn){$.extend(nn,{name:nn.name.replaceSuffix(0)})})}$tr.prev("input").remove();$tr.unwrap().isValid(function(v){if(v){$(_this).addClass("disabled");if($tr.parents("form").data("validator")!=undefined){$tr.parents("form").data("validator").holdSubmit(true)}var _callback=function(json){if(json[BJUI.keys.statusCode]==BJUI.statusCode.ok){_doRead($tr);if(callback){callback.toFunc().apply(that,[json])}var act=$tr.find(".row-del").attr("data-action");$tr.find(".row-del").attr("href",act+json.id)}else{$(_this).removeClass("disabled");$tr.bjuiajax("ajaxDone",json)}};$tr.bjuiajax("doAjax",{url:that.options.action,data:data,type:that.options.type||"POST",callback:_callback})}})}else{_doRead($tr)}});that.tools.initEnter($tbody);function _doEdit($tr){$tr.removeClass("readonly").find("> td *").each(function(){var $this=$(this),$td=$this.closest("td"),val=$td.data("val"),toggle=$this.attr("data-toggle-old"),readonly=$td.data("readonly");if(typeof val=="undefined"){val=$td.html()}if($td.data("notread")){return true}if($this.isTag("select")){$this.nextAll(".bootstrap-select").removeClass("readonly").find("button").removeClass("disabled")}if($this.is(":checkbox")){$this.closest(".icheckbox_minimal-purple").removeClass("disabled");$this.closest(".icheckbox_minimal-purple").find("ins").removeClass("readonly")}if($this.is(":radio")){$this.closest(".iradio_minimal-purple").removeClass("disabled");$this.closest(".iradio_minimal-purple").find("ins").removeClass("readonly")}if(toggle){if(toggle=="dosave"){return true}else{$this.removeAttr("data-toggle-old").attr("data-toggle",toggle)}if(toggle=="spinner"){$this.spinner("destroy").spinner()}if(toggle=="kindeditor"){$td.initui()}if(toggle=="upload"){var maxFile=$this.attr("data-max-file");if(typeof maxFile!="undefined"&&typeof val!="undefined"){if(maxFile==val.split("|").length){$this.remove()}}}}if($this.is("textarea")){$this.text($this.siblings("span").text());$this.show();$this.siblings("span").remove()}if($this.is(":text")){$this.val($this.siblings("span").text());$this.show();$this.siblings("span").remove()}if($this.is(".bjui-tags")){$this.find("input").val($this.siblings("span").text());$this.show();$this.siblings("span").remove()}$this.is(".bjui-lookup, .bjui-spinner, .bjui-upload")&&$this.show();$this.children().is(".uploadify")&&$this.show()});$tr.find('[data-toggle="doedit"]').attr("data-toggle","dosave").text("保存")}function _doRead($tr){$tr.addClass("readonly").find("> td *").each(function(){var $this=$(this),$td=$this.closest("td"),toggle=$this.attr("data-toggle");if($td.data("notread")){return true}if($td.data("nohandle")){$td.html("")}if($this.isTag("select")){$this.nextAll(".bootstrap-select").addClass("readonly").find("button").addClass("disabled")}if($this.is(":checkbox")){$this.closest(".icheckbox_minimal-purple").addClass("disabled");$this.closest(".icheckbox_minimal-purple").find("ins").addClass("readonly")}if($this.is(":radio")){$this.closest(".iradio_minimal-purple").addClass("disabled");$this.closest(".iradio_minimal-purple").find("ins").addClass("readonly")}if(toggle){if(toggle=="doedit"||toggle=="dosave"){return true}else{$this.removeAttr("data-toggle").attr("data-toggle-old",toggle)}if(toggle=="kindeditor"){KindEditor.remove($this)}}if($this.is("textarea")){var span='<span class="tabledit-txt">'+$this.html()+"</span>";$this.hide();$this.parent().append(span)}if($this.is(":text")){var span='<span class="tabledit-txt">'+$this.val()+"</span>";$this.hide();$this.parent().append(span)}if($this.is(".bjui-tags")){var span='<span class="tabledit-txt">'+$this.find("input").val()+"</span>";$this.hide();$this.parent().append(span)}$this.is(".bjui-lookup, .bjui-spinner, .bjui-upload")&&$this.hide();$this.children().is(".uploadify")&&$this.hide()});$tr.find('[data-toggle="dosave"]').attr("data-toggle","doedit").text("编辑")}},doAdd:function(){var tool=this;var $table=that.$element;if(!that.$numAdd||!that.$btnAdd){return}$table.on("keydown.bjui.tabledit.add","thead .num-add",function(e){if(e.which==BJUI.keyCode.ENTER){that.$btnAdd.trigger("click.bjui.tabledit.add");e.preventDefault()}}).on("click.bjui.tabledit.add","thead .row-add",function(e){var rowNum=1;if(!isNaN(that.$numAdd.val())){rowNum=parseInt(that.$numAdd.val())}that.add($table,rowNum);e.preventDefault()})},doDel:function($tbody){var tool=this;var delEvent="click.bjui.tabledit.del";$tbody.off(delEvent).on(delEvent,".row-del",function(e){var $btnDel=$(this);if($btnDel.data("confirmMsg")){$btnDel.alertmsg("confirm",$btnDel.data("confirmMsg"),{okCall:function(){if($btnDel.data("okcallback")){$btnDel.attr("data-okcallback").toFunc().call(this,$btnDel)}tool.delData($btnDel)}})}else{tool.delData($btnDel)}e.preventDefault()})},delData:function($btnDel){var tool=this;var $tbody=$btnDel.closest("tbody");var options=$btnDel.data();var currentTr=$btnDel.closest("tr");var swfuploadInp=currentTr.find(".swfupload");var _delRow=function(json){if(options.nodel==undefined){currentTr.remove()}if(swfuploadInp.length>0){swfuploadInp.remove()}currentTr;tool.initSuffix($tbody);tool.afterDelete($tbody);if(options.callback){(options.callback.toFunc()).apply(that,[json])}};if($btnDel.attr("href")=="javascript:;"||$btnDel.attr("href")=="#"){_delRow()}else{$btnDel.bjuiajax("doAjax",{url:$btnDel.attr("href"),data:options.data,callback:_delRow})}},afterDelete:function($tbody){var deletedEvent=$.Event(Tabledit.EVENTS.afterDelete,{relatedTarget:$tbody[0]});that.$element.trigger(deletedEvent);if(deletedEvent.isDefaultPrevented()){return}}};return tools};Tabledit.prototype.init=function(){var that=this;var tools=this.tools;var $table=this.$element.addClass("bjui-tabledit"),$tr=$table.find("> thead > tr:first"),$tbody=this.$tbody;var trHtml=$table.find("> thead > tr:first").html();$tr.find("> th").each(function(){var $th=$(this);var title=$th.attr("title");var add=$th.data("addtool");var addBtn=$th.data("addbtn");var id=$table.attr("id");if(title){if(addBtn){$th.html('<button type="button" class="btn-green" data-toggle="tableditadd" data-target="#'+id+'" data-num="1" data-icon="plus">'+title+"</button>")}else{$th.html(title)}}if(add){var $addBox=$('<span style="position:relative;"></span>');$th.empty();that.$numAdd=$('<input type="text" value="1" class="form-control num-add" size="2" title="待添加的行数">');that.$btnAdd=$('<a href="javascript:;" class="row-add" title="添加行"><i class="fa fa-plus-square"></i></a>');$addBox.append(that.$numAdd).append(that.$btnAdd).appendTo($th)}});$table.data("bjui.tabledit.tr",$("<tr>"+trHtml+"</tr>"));tools.initTbody();tools.doAdd();tools.doDel($tbody)};Tabledit.prototype.add=function($table,num){var tools=this.tools;var $tbody=$table.find("> tbody");var $firstTr,$tr=$table.data("bjui.tabledit.tr");for(var i=0;i<num;i++){$tr.find("> th").each(function(){var attr="";if($(this).data("nohandle")){attr=' data-nohandle="true"'}$(this).replaceWith("<td"+attr+">"+$(this).html()+"</td>")});var $addTr=$tr.clone();if(i==0){$firstTr=$addTr}$addTr.hide().appendTo($tbody);tools.initSuffix($tbody);tools.initEnter($tbody);$addTr.show().css("display","").initui()}if($firstTr&&$firstTr.length){var $input=$firstTr.find(":text");$input.each(function(){var $txt=$(this);if(!$txt.prop("readonly")){$txt.focus();return false}})}};function Plugin(option){var args=arguments;var property=option;return this.each(function(){var $this=$(this);var options=$.extend({},Tabledit.DEFAULTS,$this.data(),typeof option=="object"&&option);var data=$this.data("bjui.tabledit");if(!data){$this.data("bjui.tabledit",(data=new Tabledit(this,options)))}if(typeof property=="string"&&$.isFunction(data[property])){[].shift.apply(args);if(!args){data[property]()}else{data[property].apply(data,args)}}else{data.init()}})}var old=$.fn.tabledit;$.fn.tabledit=Plugin;$.fn.tabledit.Constructor=Tabledit;$.fn.tabledit.noConflict=function(){$.fn.tabledit=old;return this};$(document).on(BJUI.eventType.initUI,function(e){var $this=$(e.target).find('table[data-toggle="tabledit"]');if(!$this.length){return}Plugin.call($this)});$(document).on(BJUI.eventType.afterInitUI,function(e){var $this=$(e.target).find('table[data-toggle="tabledit"]');$this.each(function(){if($(this).is("[data-initnum]")){var initNum=$(this).data("initnum");if(initNum>0){Plugin.call($(this),"add",$(this),initNum)}}})});$(document).on("click.bjui.tabledit.data-api",'[data-toggle="tableditadd"]',function(e){var $this=$(this);var num=$this.data("num")||1;var table=$this.data("target");if(!table||!$(table).length){return}if(!$(table).isTag("table")){return}Plugin.call($this,"add",$(table),num);e.preventDefault()})}(jQuery);
/**
 * B-JUI: bjui-spinner.js  v1.2
 */
+function(a){"use strict";function c(c){var d=arguments,e=c;return this.each(function(){var f=a(this),g=a.extend({},b.DEFAULTS,f.data(),"object"==typeof c&&c),h=f.data("bjui.spinner");h||f.data("bjui.spinner",h=new b(this,g)),"string"==typeof e&&a.isFunction(h[e])?([].shift.apply(d),d?h[e].apply(h,d):h[e]()):h.init()})}var d,b=function(b,c){this.$element=a(b),this.options=c,this.tools=this.TOOLS(),this.$spinner=null,this.height=this.$element.addClass("form-control").innerHeight(),this.ivalue=Number(this.$element.val())||0};b.DEFAULTS={min:0,max:100,step:1,decimalPlace:0},b.EVENTS={afterChange:"afterchange.bjui.spinner"},b.prototype.TOOLS=function(){var a=this,c={changeVal:function(c){var d=a.$element,e=Number(d.val())||Number(a.ivalue),f=c.data("add")||-1,g=a.options.min,h=a.options.max,i=a.options.step;1==f?h-i>=e&&(e+=i):-1==f?e>=g+i&&(e-=i):e>h?e=h:g>e&&(e=g),a.options.decimalPlace&&(e=new String(e.toFixed(a.options.decimalPlace))),a.ivalue=e,d.val(e).trigger(b.EVENTS.afterChange,{value:e})}};return c},b.prototype.init=function(){return this.$element,this.options,isNaN(this.options.min)||isNaN(this.options.max)||isNaN(this.options.step)?(BJUI.debug("Spinner Plugin: Parameter is non-numeric type!"),void 0):(this.addBtn(),void 0)},b.prototype.addBtn=function(){var d,e,b=this,c=b.$element;this.$lookBtn||c.parent().hasClass("wrap_bjui_btn_box")||(this.$spinner=a(FRAG.spinnerBtn),c.css({paddingRight:"13px"}).wrap('<span class="wrap_bjui_btn_box"></span>'),d=c.parent(),d.css("position","relative"),this.$spinner.css({height:this.height}).appendTo(d),this.$spinner.on("selectstart",function(){return!1}),e=null,b.$spinner.find("li").on("click",function(){b.tools.changeVal(a(this))}).on("mousedown",function(){var c=a(this);e=setInterval(function(){b.tools.changeVal(c)},150)}).on("mouseup",function(){clearTimeout(e)}))},b.prototype.destroy=function(){this.$element.parent().hasClass("wrap_bjui_btn_box")&&(this.$element.parent().find(".bjui-spinner").remove(),this.$element.unwrap())},d=a.fn.spinner,a.fn.spinner=c,a.fn.spinner.Constructor=b,a.fn.spinner.noConflict=function(){return a.fn.spinner=d,this},a(document).on(BJUI.eventType.initUI,function(b){var d=a(b.target).find('input[data-toggle="spinner"]');d.length&&c.call(d)})}(jQuery);
/**
 * B-JUI: bjui-lookup.js  v1.2
 */
+function(c){"use strict";function k(a){var b=arguments,d=a;return this.each(function(){var h=c(this),l=c.extend({},e.DEFAULTS,h.data(),"object"==typeof a&&a),g=h.data("bjui.lookup");g?h.data("newurl")&&(g.options.url=h.data("newurl"),h.data("bjui.dialog",null)):h.data("bjui.lookup",g=new e(this,l));if("string"==typeof d&&c.isFunction(g[d]))if([].shift.apply(b),b)g[d].apply(g,b);else g[d]();else g.init()})}var n,f,m,e=function(a,b){this.$element=c(a);this.options=b;this.$lookBtn=null};e.DEFAULTS={url:null,id:null,mask:!0,width:600,height:400,title:"Lookup",maxable:!0,resizable:!0};e.EVENTS={afterChange:"afterchange.bjui.lookup"};e.prototype.init=function(){var a=this.options;if(a.url){a.url=decodeURI(a.url).replacePlh(this.$element.closest(".unitBox"));if(!a.url.isFinishedTm())return this.$element.alertmsg("error",a.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),BJUI.debug("Lookup Plugin: The lookup's url is incorrect, url:"+a.url),!1;a.url=encodeURI(a.url)}else return BJUI.debug("Lookup Plugin: Error trying open a lookup dialog, url is undefined!"),!1;n=this.options.group||null;f=this.options.suffix||null;m=this.$element;f&&(f=f.trim());this.open(this.$element)};e.prototype.addBtn=function(){var a=this,b=a.$element;if(!this.$lookBtn&&!b.parent().hasClass("wrap_bjui_btn_box")){this.$lookBtn=c(FRAG.lookupBtn);this.$element.css({paddingRight:"15px"}).wrap('<span class="wrap_bjui_btn_box"></span>');var b=this.$element.parent(),d=this.$element.addClass("form-control").innerHeight();b.css({position:"relative",display:"inline-block"});c.each(a.options,function(b,c){"toggle"!=b&&a.$lookBtn.data(b,c)});this.$lookBtn.css({height:d,lineHeight:d+"px"}).appendTo(b);this.$lookBtn.on("selectstart",function(){return!1})}};e.prototype.open=function(a){var b=this.options;a.dialog({id:b.id||"lookup_dialog",url:b.url,title:b.title,width:b.width,height:b.height,mask:b.mask,maxable:b.maxable,resizable:b.resizable})};e.prototype.getField=function(a){return(n?n+".":"")+a+(f?f:"")};e.prototype.setSingle=function(a,b){"string"==typeof a&&(a=(new Function("return "+a))());this.setVal(a,b)};e.prototype.setMult=function(a,b){var d={};this.$element.closest(".unitBox").find('[name="'+a+'"]').filter(":checked").each(function(){var a=(new Function("return "+c(this).val()))(),b;for(b in a)d[b]=(d[b]?d[b]+",":"")+a[b]});c.isEmptyObject(d)?this.$element.alertmsg("error",this.$element.data("warn")||FRAG.alertSelectMsg):this.setVal(d,b)};e.prototype.setVal=function(a,b){var d=this,h=m.closest(".unitBox"),l;m.data("customEvent")?m.trigger("customEvent.bjui.lookup",[a]):h.find(":input").each(function(){var g=c(this),h=g.attr("name"),f;for(f in a)if(d.getField(f)==h){l=1==b?g.val()?g.val()+","+a[f]:a[f]:a[f];g.val(l).trigger(e.EVENTS.afterChange,a);break}});this.$element.dialog("closeCurrent")};var p=c.fn.lookup;c.fn.lookup=k;c.fn.lookup.Constructor=e;c.fn.lookup.noConflict=function(){c.fn.lookup=p;return this};c(document).on(BJUI.eventType.initUI,function(a){a=c(a.target).find('[data-toggle="lookup"]');a.length&&k.call(a,"addBtn")});c(document).on("click.bjui.lookup.data-api",'[data-toggle="lookupbtn"]',function(a){var b=c(this);b.attr("href")&&!b.data("url")&&b.attr("data-url",b.attr("href"));b.data("title")||b.attr("data-title",b.text());k.call(b);a.preventDefault()});c(document).on("click.bjui.lookupback.data-api",'[data-toggle="lookupback"]',function(a){var b=c(this),d=b.data("args"),e=b.data("lookupid"),f=c('input[name="lookupType"]:checked').val();d?k.call(b,"setSingle",d,f):e&&k.call(b,"setMult",e,f);a.preventDefault()})}(jQuery);
/**
 * B-JUI: bjui-tags.js  v1.2
 */
+function(d){"use strict";var a=function(f,e){this.$element=d(f).addClass("tag-input");this.options=e;this.tools=this.TOOLS();this.$box=d(this.$element.wrap('<div class="bjui-tags"></div>')).parent();this.timeout=null;this.$tagsArr={};this.tags=[]};a.DEFAULTS={width:300,url:"",global:false,type:"GET",tagname:"tag",max:0,clear:false,lightCls:"tags-highlight"};a.EVENTS={afterCreated:"aftercreated.bjui.tags"};a.prototype.TOOLS=function(){var f=this,e=this.options;var g={keyDown:function(h){if(h.which==13){return false}},keyUp:function(m){switch(m.which){case BJUI.keyCode.BACKSPACE:if(d.trim(f.$element.val()).length==0){f.tools.removeMenu();return false}break;case BJUI.keyCode.ESC:f.tools.removeMenu();break;case BJUI.keyCode.DOWN:if(!f.$menu||!f.$menu.length){return}var h=f.$menu.find("> ."+e.lightCls),k=f.$menu.find("> li:first-child");if(!h.length){k.addClass(e.lightCls)}else{var l=h.removeClass(e.lightCls).next();if(l.length){l.addClass(e.lightCls)}else{k.addClass(e.lightCls)}}return false;break;case BJUI.keyCode.UP:if(!f.$menu||!f.$menu.length){return}var h=f.$menu.find("> ."+e.lightCls),o=f.$menu.find("> li:last-child");if(!h.length){o.addClass(e.lightCls)}else{var j=h.removeClass(e.lightCls).prev();if(j.length){j.addClass(e.lightCls)}else{o.addClass(e.lightCls)}}return false;break;case BJUI.keyCode.ENTER:if(e.max>0&&f.$tagsArr.length>=e.max){return false}var p=false,q=false,r=null;var i=f.$menu&&f.$menu.find("> ."+e.lightCls);if(i&&i.length){p=i.text();r=i.data("item");q=r.value}else{p=d.trim(f.$element.val());if(!p.length){return false}if(e.clear){if(d.inArray(p,f.tags)==-1){f.$element.val("");return false}}q=p}if(!p){return}var n=false;f.$tagsArr.length&&f.$tagsArr.each(function(){if(d(this).val()==q){n=true;return}});if(n){f.$element.val("");return false}f.tools.removeMenu();f.$element.val("");d.proxy(f.tools.onAfterCreated(r,q),f);return false;break}},query:function(){if(f.timeout){clearTimeout(f.timeout)}f.timeout=setTimeout(f.tools.doQuery,300)},doQuery:function(){if(e.max>0&&f.$tagsArr.length>=e.max){return}var k=f.$element.val(),l=f.$box.find("> .tags-menu"),j=[],i=null;var h=f.$element.closest(".navtab-panel").length?d.CurrentNavtab:d.CurrentDialog;if(f.$element.closest(".bjui-layout").length){h=f.$element.closest(".bjui-layout")}if(k.length==0){return}d.ajax({url:e.url,global:e.global,type:e.type,data:{term:k},dataType:"json",success:function(n){if(n.length!=0){if(!l.length){l=d('<ul class="tags-menu"></ul>')}l.empty().hide().appendTo(f.$box);var o=[];for(var m=0;m<n.length;m++){i=d('<li class="tags-item">'+n[m].label+"</li>").data("item",n[m]);i.appendTo(l);j.push(n[m].label);o.push(n[m].label.length)}f.tags=j;l.css({"top":f.$element.position().top+(f.$element.outerHeight()),"left":f.$element.position().left,"width":(Math.max.apply(null,o)+2.5)+"em"}).fadeIn().find("> li").hover(function(){d(this).addClass(e.lightCls).siblings().removeClass(e.lightCls)},function(){d(this).removeClass(e.lightCls)}).click(function(){var p=d(this).text();var r=d(this).data("item");var s=r.value;var q=false;f.$box.find("input:hidden").each(function(){if(d(this).val()==s){q=true;return}});if(q){f.$element.val("");l.remove();return}l.remove();f.$element.val("");d.proxy(f.tools.onAfterCreated(r,s),f)});f.$menu=l}else{l.remove()}}})},createTag:function(h,j){var i=d('<span class="label label-tag" data-value="'+j+'" style="margin-left: 1px; margin-top: 1px;"><i class="fa fa-tag"></i> '+h+'&nbsp;&nbsp;<a href="#" class="close">&times;</a></span>');i.insertBefore(f.$element).find("a.close").click(function(){var l=i.data("value");f.$box.find("input:hidden").each(function(){if(d(this).val()==l){d(this).remove()}});i.remove();f.$tagsArr=f.$box.find('input[name="'+f.options.tagname+'"]')});var k=d('<input type="hidden" name="'+f.options.tagname+'">').val(j);k.appendTo(f.$box);f.$tagsArr=f.$box.find('input[name="'+f.options.tagname+'"]')},removeMenu:function(){if(f.$menu){f.$menu.remove()}},onAfterCreated:function(i,j){if(e.callback){f.$element.val(i.name);d("#"+f.options.tagid).val(j);e.callback.toFunc().apply(f,[j,f.$element.attr("id")])}var h=[];f.$tagsArr.length&&f.$tagsArr.each(function(){h.push(d(this).val())});f.$element.trigger(a.EVENTS.afterCreated,{item:i,value:j,tags:h.join(",")})}};return g};a.prototype.init=function(){var g=this;var e=this.$element;var f=this.options;if(!(f.url)){BJUI.debug("Tags Plugin: Do query tags, url is undefined!");return}else{f.url=decodeURI(f.url).replacePlh(e.closest(".unitBox"));if(!f.url.isFinishedTm()){e.alertmsg("error",(f.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)));BJUI.debug("Tags Plugin: The query tags url is incorrect, url: "+f.url);return}f.url=encodeURI(f.url)}if(isNaN(this.options.max)){BJUI.debug("Tags Plugin: Parameter 'max' is non-numeric type!");return}g.$box.width(f.width).on("click",function(){e.focus()});e.on("keydown",d.proxy(this.tools.keyDown,this)).on("keyup",d.proxy(this.tools.keyUp,this));if(!d.support.leadingWhitespace){e.on("keyup",d.proxy(this.tools.query,this))}else{e.on("input",d.proxy(this.tools.query,this))}d(document).on("click.bjui.tags",d.proxy(function(h){if(!d(h.target).closest(this.$box).length){this.tools.removeMenu()}},this))};a.prototype.destroy=function(){if(this.$tags){this.$element.upwrap();$tags.remove()}};function c(f){var e=arguments;var g=f;return this.each(function(){var j=d(this);var h=d.extend({},a.DEFAULTS,j.data(),typeof f=="object"&&f);var i=j.data("bjui.tags");if(!i){j.data("bjui.tags",(i=new a(this,h)))}if(typeof g=="string"&&d.isFunction(i[g])){[].shift.apply(e);if(!e){i[g]()}else{i[g].apply(i,e)}}else{i.init()}})}var b=d.fn.tags;d.fn.tags=c;d.fn.tags.Constructor=a;d.fn.tags.noConflict=function(){d.fn.tags=b;return this};d(document).on(BJUI.eventType.initUI,function(g){var f=d(g.target).find('input[data-toggle="tags"]');if(!f.length){return}c.call(f)})}(jQuery);
/**
 * B-JUI: bjui-upload.js  v1.2
 */
+function(d){"use strict";var b=function(f,e){this.$element=d(f);this.options=e;this.tools=this.TOOLS()};b.DEFAULTS={fileTypeExts:"*.jpg;*.png",uploader:"",auto:false,method:"POST",multi:false,formData:{},fileObjName:"file",fileSizeLimit:204800,previewImg:false,previewLoadimg:null,dragDrop:false,showUploadedPercent:true,showUploadedSize:true,buttonText:"选择上传文件",removeTimeout:500,itemTemplate:FRAG.uploadTemp,breakPoints:false,fileSplitSize:1024*1024,onUploadStart:null,onUploadSuccess:null,onUploadComplete:null,onUploadError:null,onInit:null,onCancel:null,onSelect:null};b.MIMETYPES={zip:["application/x-zip-compressed"],jpg:["image/jpeg"],png:["image/png"],gif:["image/gif"],swf:["application/x-shockwave-flash"],doc:["application/msword"],xls:["application/vnd.ms-excel"],docx:["application/vnd.openxmlformats-officedocument.wordprocessingml.document"],xlsx:["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],ppt:["application/vnd.ms-powerpoint"],pptx:["application/vnd.openxmlformats-officedocument.presentationml.presentation"],mp3:["audio/mpeg"],mp4:["video/mp4"],pdf:["application/pdf"],txt:["text/plain"],xml:["text/xml"]};b.prototype.TOOLS=function(){var f=this,e=this.options;var g={formatFileSize:function(h,i){if(h>1024*1024&&!i){h=(Math.round(h*100/(1024*1024))/100).toString()+"MB"}else{h=(Math.round(h*100/1024)/100).toString()+"KB"}return h},getFile:function(h,k){for(var j=0;j<k.length;j++){if(k[j].index==h){return k[j]}}return false},getFileTypes:function(l){var h=[];var j=l.split(";");for(var k=0;k<j.length;k++){h.push(j[k].split(".").pop())}return h},getMimetype:function(h){return b.MIMETYPES[h]},getAcceptString:function(m){var k=this.getFileTypes(m);var h=[];for(var j=0;j<k.length;j++){var l=this.getMimetype(k[j]);if(l){h.push(l)}else{h.push("."+k[j])}}return h.join(",")},filter:function(m){if(e.maxFile){var j=f.$element.next(".pic-name").val();var n=0;if(j){n=j.split("|").length}if(m.length>e.maxFile-n){f.$element.find("> .queue").hide();f.$element.alertmsg("error","只允许上传"+e.maxFile+"个文件！");return[]}}var h=[];var o=this.getFileTypes(e.fileTypeExts);if(o.length>0){for(var l=0;l<m.length;l++){var k=m[l];if(parseInt(this.formatFileSize(k.size,true))>e.fileSizeLimit){f.$element.alertmsg("error",'文件"'+k.name+'"大小超出限制！');continue}if(d.inArray(k.name.split(".").pop().toLowerCase(),o)>=0){h.push(k)}else{f.$element.alertmsg("error",'文件"'+k.name+'"类型不允许！')}}}return h},getFiles:function(k){var j=k.target.files||k.dataTransfer.files;j=this.filter(j);for(var h=0;h<j.length;h++){j[h].id=j[h].lastModifiedDate.getTime()+"_"+j[h].size+"_"+(j[h].type||"").replace(/\W/g,"");this.renderQueueItem(j[h]);f.queueData.files++}return j},renderQueueItem:function(h){var k=0;var j=d(e.itemTemplate.replace("{fileId}",h.id).replace("{fileName}",h.name).replace("#upConfirm#",BJUI.regional.upload.upConfirm).replace("#upPause#",BJUI.regional.upload.upPause).replace("#upCancel#",BJUI.regional.upload.upCancel).replace("{percent}","0.00%").replace("{uploadedSize}","0KB").replace("{fileSize}",this.formatFileSize(h.size)));if(e.auto){j.find("> .info > .up_confirm").remove()}j.data("upfile",h);f.$uploadFileList.append(j);if(e.breakPoints){k=this.getUploadedSize(h.id);if(k>h.size){k=h.size}}this.showProgress(h.id,k,h.size);if(e.previewImg&&h.type.indexOf("image")!=-1){var l=j.find("> .preview > .img");if(e.previewLoadimg){l.html('<img src="'+e.previewLoadimg+'" height="114">')}this.previewImg(h,l)}else{j.find("> .preview").remove()}if(e.showUploadedSize){var i=j.find("> .filesize");i.find("> .uploadedsize").html(this.formatFileSize(k));i.find("> .totalsize").html(this.formatFileSize(h.size))}else{j.find("> .filesize").remove()}if(e.showUploadedPercent){j.find("> .percent").html((k/h.size*100).toFixed(2)+"%")}else{j.find("> .percent").remove()}e.onSelect&&e.onSelect(files);if(e.auto){f.fileUpload(h,k)}j.on("click.bjui.upload.confirm",".up_confirm",function(o){var n=d(this),m=n.closest(".item");n.hide().next().show();f.fileUpload(m.data("upfile"),k)});j.on("click.bjui.upload.cancel",".up_cancel",this.removeQueueItem)},successQueueItem:function(h,i){g.showProgress(h.id,h.size,h.size);e.onUploadSuccess&&e.onUploadSuccess.toFunc().call(f,h,i.responseText,f.$element);setTimeout(function(){f.$element.find("#"+h.id).fadeOut("normal",function(){d(this).remove();var j=f.$element.find("> .queue > .item:visible").length;if(j==0){f.$element.find("> .queue").hide();f.$file.val("")}})},e.removeTimeout)},removeQueueItem:function(h,i){if(i){i.abort()}d(this).closest(".item").fadeOut("normal",function(){d(this).remove();var j=f.$element.find("> .queue > .item:visible").length;if(j==0){f.$element.find("> .queue").hide()}});h.preventDefault()},previewImg:function(i,j){if(i&&j.length){var h=new FileReader();h.onload=function(k){j.html('<img src="'+k.target.result+'">')};h.readAsDataURL(i)}},showProgress:function(i,m,h){var l=m/h*100+"%",k=f.tools.formatFileSize(m),j=(m/h*100).toFixed(2)+"%";f.$element.find("#"+i+" > .progress > .bar").css("width",l)},getUploadedSize:function(h){return localStorage.getItem(h)*1},saveUploadedSize:function(h,i){localStorage.setItem(h,i)},sendBlob:function(i,m,l,h){var k=new FormData();m.open(e.method,i,true);m.setRequestHeader("X-Requested-With","XMLHttpRequest");k.append(e.fileObjName,l);if(h){for(var j in h){k.append(j,h[j])}}m.send(k)}};return g};b.prototype.init=function(){var g=this;var e=this.$element;var f=this.options;if(!(f.uploader)){BJUI.debug("Upload Plugin: The options uploader is undefined!");return}else{f.uploader=decodeURI(f.uploader).replacePlh(e.closest(".unitBox"));if(!f.uploader.isFinishedTm()){e.alertmsg("error",(f.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)));BJUI.debug("Upload Plugin: The options uploader is incorrect: "+f.uploader);return}f.uploader=encodeURI(f.uploader)}if(e.hasClass("bjui-upload")){return}var h=d(FRAG.uploadFrag.replaceAll("#multi#",f.multi?"multiple":"").replaceAll("#accept#",g.tools.getAcceptString(f.fileTypeExts)).replaceAll("#btnTxt#",(f.icon?'<i class="fa fa-'+f.icon+'">&nbsp;&nbsp;':"")+f.buttonText));e.addClass("bjui-upload").append(h);this.$file=e.find("> .bjui-upload-select-file");this.$uploadFileList=e.find("> .queue");this.queueData={files:0,success:0,error:0};if(e.data("disabled")){e.off("click.bjui.upload")}else{e.on("change.bjui.upload",".bjui-upload-select-file",function(i){g.fileSelect(i)}).on("click.bjui.upload",".bjui-upload-select",function(i){g.$file.trigger("click")})}f.onInit&&f.onInit();if(f.dragDrop){e[0].ondragover=function(i){i.preventDefault();return true};e[0].ondrop=function(i){g.fileSelect(i);i.stopPropagation();i.preventDefault()}}};b.prototype.fileSelect=function(f){this.$uploadFileList.show();this.tools.getFiles(f)};b.prototype.fileUpload=function(h,l){var i=this,e=i.$element,f=i.options,j=i.tools;var k=false,g=h;k=new XMLHttpRequest();if(f.breakPoints){h=g.slice(l,l+f.fileSplitSize)}if(k.upload){k.upload.onprogress=function(m){i.onProgress(h,m.loaded,g.size)};k.onreadystatechange=function(o){if(k.readyState==4&&k.status==200){var n=JSON.parse(k.responseText),m=false;if(f.breakPoints){l+=f.fileSplitSize;j.saveUploadedSize(g.id,l);if(l<g.size){h=g.slice(l,l+f.fileSplitSize);j.sendBlob(f.uploader,k,h,f.formData)}else{m=true}}else{m=true}if(m){i.queueData.success++;j.successQueueItem(g,k);f.onUploadComplete&&f.onUploadComplete(g,k.responseText)}}else{i.queueData.error++;f.onUploadError&&f.onUploadError(g,k.responseText)}if(f.onQueueComplete){if(i.queueData.files=i.queueData.success+i.queueData.error){option.onQueueComplete(i.queueData)}}};f.onUploadStart&&f.onUploadStart();f.formData.fileName=g.name;f.formData.lastModifiedDate=g.lastModifiedDate.getTime();j.sendBlob(f.uploader,k,h,f.formData)}e.find("#"+g.id+" > .info > .up_pause").on("click.bjui.upload.pause",function(m){k.abort();d(this).hide().prev().show()});e.find("#"+g.id+" > .info > .up_cancel").off("click.bjui.upload.cancel").on("click.bjui.upload.cancel",d.proxy(function(m){this.tools.removeQueueItem(m,k)},this))};b.prototype.onProgress=function(f,i,n){var j=this,p=j.options;var m=j.$element.find("#"+f.id+" .progress");var o=i;if(p.breakPoints){var e=m.attr("lastLoaded")||0;i-=parseInt(e);if(i>f.size){i=f.size}}j.$progressBar=m.children(".bar");var g=p.breakPoints?parseFloat(j.$progressBar.get(0).style.width||0):0;var l=(i/n*100+g).toFixed(2);var h=l>100?"100%":l+"%";if(n-i<500000){i=n}if(p.showUploadedSize){var k=m.nextAll(".filesize");k.find("> .uploadedsize").text(j.tools.formatFileSize(i))}if(p.showUploadedPercent){m.nextAll(".percent").text(h)}j.$progressBar.css("width",h);if(p.breakPoints){if(o<p.fileSplitSize){m.attr("lastLoaded",o)}else{m.removeAttr("lastLoaded")}}};b.prototype.destroy=function(){};function c(f){var e=arguments;var g=f;if(d.hasFlash.v>=9){this.each(function(){if(!d.fn.uploadify){return}var k={swf:BJUI.PLUGINPATH+"uploadify/scripts/uploadify.swf",fileTypeExts:"*.jpg;*.png",id:"fileInput",fileObjName:"file",fileSizeLimit:204800,buttonText:"选择上传文件",auto:false,multi:false,height:24,queueSizeLimit:5,uploadLimit:5,removeTimeout:0.5};var j=d(this),l=j.data();if(!l.id){l.id=j.attr("id")}d.extend(k,l);if(!(k.uploader)){BJUI.debug("Upload Plugin: The options uploader is undefined!");return}else{k.uploader=decodeURI(k.uploader).replacePlh(j.closest(".unitBox"));if(!k.uploader.isFinishedTm()){j.alertmsg("error",(k.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)));BJUI.debug("Upload Plugin: The options uploader is incorrect: "+k.uploader);return}k.uploader=encodeURI(k.uploader)}if(k.id=="fileInput"){k.id=k.id+(new Date().getTime())}var i=d('<input type="file" name="'+k.name+'" id="'+k.id+'">');if(k.onInit&&typeof k.onInit=="string"){k.onInit=k.onInit.toFunc()}if(k.onCancel&&typeof k.onCancel=="string"){k.onCancel=k.onCancel.toFunc()}if(k.onSelect&&typeof k.onSelect=="string"){k.onSelect=k.onSelect.toFunc()}if(k.onUploadSuccess&&typeof k.onUploadSuccess=="string"){k.onUploadSuccess=k.onUploadSuccess.toFunc()}if(k.onUploadComplete&&typeof k.onUploadComplete=="string"){k.onUploadComplete=k.onUploadComplete.toFunc()}if(k.onUploadError&&typeof k.onUploadError=="string"){k.onUploadError=k.onUploadError.toFunc()}if(k.onDialogClose&&typeof k.onDialogClose=="string"){k.onDialogClose=k.onDialogClose.toFunc()}k.onDialogClose=function(n){if(k.maxFile){var m=j.next(".pic-name").val();var o=0;if(m){o=m.split("|").length}if(n.filesQueued>k.maxFile-o){j.alertmsg("error","只允许上传"+k.maxFile+"个文件！");i.uploadify("cancel","*")}}};i.appendTo(j);if(!k.auto){var h=d('<button class="btn btn-orange" data-icon="cloud-upload">开始上传</button>');h.hide().insertAfter(j).click(function(){i.uploadify("upload","*");d(this).hide()});k.onSelect=function(){h.show()}}i.uploadify(k)})}else{if(window.FileReader){return this.each(function(){var j=d(this);var h=d.extend({},b.DEFAULTS,j.data(),typeof f=="object"&&f);var i=j.data("bjui.upload");if(!i){j.data("bjui.upload",(i=new b(this,h)))}if(typeof g=="string"&&d.isFunction(i[g])){[].shift.apply(e);if(!e){i[g]()}else{i[g].apply(i,e)}}else{i.init()}})}}}var a=d.fn.upload;d.fn.upload=c;d.fn.upload.Constructor=b;d.fn.upload.noConflict=function(){d.fn.upload=a;return this};d(document).on(BJUI.eventType.initUI,function(g){var f=d(g.target).find('[data-toggle="upload"]');if(!f.length){return}c.call(f)})}(jQuery);
/**
 * B-JUI: bjui-initui.js  v1.2
 */
+function(f){"use strict";var c=function(h,g){var i=this;this.$element=f(h);this.options=g};c.DEFAULTS={};c.prototype.init=function(){var h=this,g=h.$element;f.when(h.initUI()).done(function(){g.trigger(BJUI.eventType.afterInitUI)})};c.prototype.initUI=function(){var g=this.$element;f.when(g.trigger(BJUI.eventType.beforeInitUI)).done(function(){g.trigger(BJUI.eventType.initUI)})};function d(h){var g=arguments;var i=h;return this.each(function(){var l=f(this);var j=f.extend({},c.DEFAULTS,l.data(),typeof h=="object"&&h);var k=l.data("bjui.initui");if(!k){l.data("bjui.initui",(k=new c(this,j)))}if(typeof i=="string"&&f.isFunction(k[i])){[].shift.apply(g);if(!g){k[i]()}else{k[i].apply(k,g)}}else{k.init()}})}var a=f.fn.initui;f.fn.initui=d;f.fn.initui.Constructor=c;f.fn.initui.noConflict=function(){f.fn.initui=a;return this};f(document).on("click.bjui.initui.data-api",'[data-toggle="initui"]',function(g){d.call($this,$this.data());g.preventDefault()});f(document).on(BJUI.eventType.beforeInitUI,function(h){var g=f(h.target);var j=[];var i=g.find("[data-noinit]");i.each(function(k){var l=f(this);var m={};m.$target=l;m.$next=l.next();m.$prev=l.prev();m.$parent=l.parent();m.visible=l.is(":visible")?true:false;j.push(m);l.remove()});g.data("bjui.noinit",j)});f(document).on(BJUI.eventType.initUI,function(h){var g=f(h.target);g.find("> .bjui-maskProgress").find(".progress").stop().animate({width:"95%"},"fast")});f(document).on(BJUI.eventType.afterInitUI,function(k){var j=f(k.target);var l=j.data("bjui.noinit");var h=j.find("> .bjui-pageContent").find("form");if(l){f.each(l,function(m,o){if(o.$next.length){o.$next.before(o.$target)}else{if(o.$prev.length){o.$prev.after(o.$target)}else{if(o.$parent.length){o.$parent.append(o.$target)}}}if(o.visible){o.$target.show()}j.removeData("bjui.noinit")})}j.resizePageH();if(h.length){j.find("> .bjui-pageFooter").find(":submit").on("click.bjui.submit",function(m){m.preventDefault();h.submit()})}if(f.support.leadingWhitespace){j.find(".bjui-maskProgress").find(".progress").stop().animate({width:"100%"},"fast",function(){j.find(".bjui-ajax-mask").fadeOut("normal",function(){f(this).remove()})})}else{j.find(".bjui-maskProgress").find(".progress").stop().animate({width:"100%"},"fast");j.find(".bjui-ajax-mask").remove()}var g=j.find(".bjui-moreSearch"),i=j.find('[data-toggle="moresearch"]');if(g.is(":visible")){i.trigger("click")}});f(document).one(BJUI.eventType.afterInitUI,function(h){var i=f("#bjui-hnav-navbar"),g=i.find("> li.active");if(g.length&&g.find("> .items").length){g.find("> a").trigger("click")}});var b=function(h){var l=h;var o=l;var j=l.css("position");if(j=="static"){o=l.offsetParent()}var m=parseInt(o.css("zIndex"))||0;var g=l.find("> .bjui-maskBackground");var k=l.find("> .bjui-maskProgress");if(!g.length){g=f(FRAG.maskBackground);k=f(FRAG.maskProgress.replace("#msg#",BJUI.regional.progressmsg));l.prepend(g).prepend(k)}var i=parseInt(g.css("zIndex"))||0;var n=parseInt(k.css("zIndex"))||0;g.css("zIndex",m+1);k.css("zIndex",m+2);return{$bg:g,$pr:k}};f(document).on("bjui.ajaxStart",function(i,h,j){var g=b(f(i.target));if(f.support.leadingWhitespace){g.$bg.fadeIn();g.$pr.fadeIn()}else{g.$bg.show();g.$pr.show()}g.$pr.find(".progress").animate({width:"80%"},h||500);if(j){setTimeout(function(){j.toFunc().call(this)},25)}}).on("bjui.ajaxStop",function(h){var g=b(f(h.target));if(f.support.leadingWhitespace){g.$pr.find(".progress").animate({width:"100%"},"fast",function(){g.$bg.remove();g.$pr.remove()})}else{g.$pr.find(".progress").animate({width:"100%"},"fast");g.$bg.remove();g.$pr.remove()}}).on("bjui.ajaxError",function(h){var g=b(f(h.target));g.$bg.remove();g.$pr.remove()});f(document).on(BJUI.eventType.ajaxStatus,function(i){var g=f(i.target),h=b(g);g.one("ajaxStart",function(){if(f.support.leadingWhitespace){h.$bg.fadeIn();h.$pr.fadeIn()}else{h.$bg.show();h.$pr.show()}h.$pr.find(".progress").animate({width:"10%"},"fast")}).one("ajaxStop",function(){}).one("ajaxError",function(){h.$bg.remove();h.$pr.remove()})});var e=function(g){g.find('select[data-toggle="selectpicker"]').selectpicker("destroyMenu");g.find('[data-toggle="selectztree"]').trigger("destroy.bjui.selectztree")};f(document).on(BJUI.eventType.beforeLoadDialog,function(g){}).on(BJUI.eventType.beforeAjaxLoad,function(g){e(f(g.target))}).on(BJUI.eventType.beforeCloseNavtab,function(g){e(f(g.target))}).on(BJUI.eventType.beforeCloseDialog,function(g){e(f(g.target))});f(function(){f(document).on("keydown keyup",function(g){if(g.which===BJUI.keyCode.CTRL){BJUI.KeyPressed.ctrl=g.type=="keydown"?true:false}if(g.which===BJUI.keyCode.SHIFT){BJUI.KeyPressed.shift=g.type=="keydown"?true:false}})})}(jQuery);
/**
 * B-JUI: bjui-plugins.js  v1.2
 */
+function($){"use strict";$(document).on(BJUI.eventType.initUI,function(e){var $box=$(e.target),$inp=$box.find(":text, :password, textarea, :button, a.btn"),$autoheight=$box.find('[data-auto-height="true"]'),$wrap=$autoheight.closest(".bjui-pageContent"),$icheck=$box.find('[data-toggle="icheck"]'),$validate=$box.find('form[data-toggle="validate"]'),$lookup=$box.find('[data-toggle="lookup"]'),$digitUppercase=$box.find(".digitUppercase"),$moresearch=$box.find('[data-toggle="moresearch"]'),$selectpicker=$box.find('select[data-toggle="selectpicker"]'),$ztree=$box.find('[data-toggle="ztree"]'),$selectzTree=$box.find('[data-toggle="selectztree"]'),$accordion=$box.find('[data-toggle="accordion"]'),$kindeditor=$box.find('[data-toggle="kindeditor"]'),$tooltip=$box.find('[data-toggle="tooltip"]'),$dropdown=$box.find('[data-toggle="dropdown"]'),$echarts=$box.find('[data-toggle="echarts"]'),$tab=$box.find('[role="tab"]'),$subStr=$box.find(".substring"),$searchlookup=$box.find('[data-toggle="searchlookup"]'),$textOmit=$box.find(".text-omit");if($autoheight){$autoheight.height($wrap.height()-100).css("overflow","auto")}var $controlLabel=$box.find(".table-auto .control-label");$controlLabel.each(function(){var height=$(this).parents("td").height();var width=$(this).parents("td").width();if($(this).siblings("span").height()>28){$(this).css({"float":"left","lineHeight":height+"px","height":height});$(this).siblings("span").addClass("control-span").css({"width":width-$(this).width()-20})}});if($icheck){$icheck.each(function(i){var $element=$(this),id=$element.attr("id"),name=$element.attr("name"),label=$element.data("label");if(label){$element.after('<label for="'+id+'" class="ilabel">'+label+"</label>")}$element.on("ifCreated",function(e){var $parent=$(this).closest("div"),$ilabel=$parent.next('[for="'+id+'"]');$parent.attr("data-icheck",name);$ilabel.attr("data-icheck",name)}).iCheck({checkboxClass:"icheckbox_minimal-purple",radioClass:"iradio_minimal-purple",increaseArea:"20%"}).on("ifChanged",function(){$(this).trigger("validate")});if($element.prop("disabled")){$element.iCheck("disable")}});$icheck.filter(".checkboxCtrl").on("ifChanged",function(e){var checked=e.target.checked==true?"check":"uncheck";var group=$(this).data("group");$box.find(':checkbox[name="'+group+'"]').iCheck(checked)})}if($inp){$inp.each(function(){var $element=$(this),$tabledit=$element.closest("table.bjui-tabledit");if(($element.is(":text")||$element.is(":password")||$element.isTag("textarea"))&&!$element.hasClass("form-control")){$element.addClass("form-control")}if($element.is(":button")){var icon=$element.data("icon"),large=$element.data("large"),oldClass=$element.attr("class");if(!$element.hasClass("btn")){$element.removeClass().addClass("btn").addClass(oldClass)}if(icon){var _icon="fa-"+icon.replace("fa-","");if(!$element.data("bjui.icon")){$element.html('<i class="fa '+_icon+'"></i> '+$element.html()).data("bjui.icon",true)}}}if($element.isTag("a")){var icon=$element.data("icon"),large=$element.data("large");if(icon){var _icon="fa-"+icon.replace("fa-","");if(!$element.data("bjui.icon")){$element.html('<i class="fa '+_icon+'"></i> '+$element.html()).data("bjui.icon",true)}}}if($element.isTag("textarea")){var toggle=$element.data("toggle");if(toggle&&toggle=="autoheight"&&$.fn.autosize){$element.addClass("autosize").autosize()}}if(!$tabledit.length){var size=$element.attr("size")||$element.attr("cols"),width=size*10;if(!size){return}if(width){$element.css("width",width)}}})}if($validate){$validate.each(function(){var $element=$(this),alertmsg=(typeof $element.data("alertmsg")=="undefined")?true:$element.data("alertmsg");$(this).validator({valid:function(form){this.holdSubmit();$(form).bjuiajax("ajaxForm",$(form).data())},validClass:"ok",theme:"red_right_effect"}).on("invalid.form",function(e,form,errors){if(alertmsg){$(form).alertmsg("error",FRAG.validateErrorMsg.replace("#validatemsg#",BJUI.regional.validatemsg).replaceMsg(errors.length))}})})}if($lookup){$lookup.each(function(){var $element=$(this);$element.on("afterchange.bjui.lookup",function(e,data){$element.trigger("validate")})})}if($searchlookup){var bulid=function($element){$element.css({"paddingRight":"15px"}).wrap('<span class="wrap_bjui_btn_box" method="post"></span>');var $box=$element.parent();var height=$element.addClass("form-control").innerHeight();$box.css({"position":"relative","display":"inline-block"});$box.append('<a class="bjui-lookup" href="javascript:;" style="height:'+height+";line-height:"+height+'px;"><i class="fa fa-search"></i></a>')};var act=function($obj){var $box=$obj.parent();var refurl=$obj.data("refurl");if(refurl){var val=$obj.val();refurl=refurl+val}$obj.attr("data-refurl",refurl)};$searchlookup.each(function(){var $element=$(this);var callback=$element.data("callback");if(!$element.parent().hasClass("wrap_bjui_btn_box")){bulid($element)}act($element);var url=$element.attr("data-refurl");$element.on("input propertychange",function(){act($element);url=$element.attr("data-refurl")});$element.parent(".wrap_bjui_btn_box").on("click",".bjui-lookup",function(e){e.stopPropagation();$.ajax({type:"POST",dataType:"json",url:url,cache:false,data:{},success:function(json){if(!json){return}switch(json[BJUI.keys.statusCode]){case BJUI.statusCode.error:if(json[BJUI.keys.message]){$element.alertmsg("error",json[BJUI.keys.message])}break;case BJUI.statusCode.ok:if(json[BJUI.keys.message]){$element.alertmsg("ok",json[BJUI.keys.message]);if($element.parents("td").siblings("td").find('[data-hidden="true"]').length){$element.parents("td").siblings("td").find('[data-hidden="true"]').val(json["id"])}}break;case BJUI.statusCode.timeout:if($element.closest(".bjui-dialog").length){$element.dialog("closeCurrent")}if($element.closest(".navtab-panel").length){$element.navtab("closeCurrentTab")}$("body").alertmsg("warn",(json[BJUI.keys.message]||BJUI.regional.sessiontimeout));BJUI.loadLogin();break}},error:BJUI.ajaxError})})})}var bOk=true;if($digitUppercase){$digitUppercase.each(function(){var $element=$(this),$parents=$element.parents(),digit=$element.data("digit")?$element.data("digit"):2,digitReg="/^(-)*(\\d+)\\.(\\d{"+digit+"}).*$/";var $scroll=$parents.filter(function(){if($parents.is(".bjui-dialog")){return true}else{return this.scrollHeight>$(".bjui-pageContent").innerHeight()}});$element.attr("autocomplete","off");if(bOk){var spanHtml='<span class="digitUppercaseTip"></span>';$("body").append(spanHtml);bOk=false}var tip=$(".digitUppercaseTip");$element.on("keyup input",function(){if(!$element.hasClass("digitUppercase")){return}var w=$(this).width()+12;var h=$(this).height()+6;var left=$(this).offset().left;var top=$(this).offset().top+$(this).outerHeight();tip.css({top:top,left:left,minWidth:w,lineHeight:h+"px"}).show();var t=$element.val().charAt(0);$(this).val($element.val().replace(/[^\d.]/g,""));$(this).val($element.val().replace(/^\./g,""));$(this).val($element.val().replace(/\.{2,}/g,"."));$(this).val($element.val().replace(".","$#$").replace(/\./g,"").replace("$#$","."));$(this).val($element.val().replace(eval(digitReg),"$1$2.$3"));if(t=="-"){$(this).val("-"+$element.val())}if($(this).val()=="-"||$(this).val()=="."){tip.text("")}else{tip.text($.digitUppercase($element.val()))}if($(this).val()==""){tip.hide()}});$element.on("blur",function(){tip.hide()});$scroll.on("scroll",function(){tip.hide()})})}$box.on("bjui.afterDragDialog bjui.beforeCloseDialog",function(e){var $dialog=$(e.target);var tip=$(".digitUppercaseTip");if(tip){tip.hide()}});$box.on("bjui.beforeCloseDialog",function(e){var $dialog=$(e.target);var swfuploadBtn=$dialog.find(".swfupload");if(swfuploadBtn.length>0){swfuploadBtn.remove()}});$box.find("form").submit(function(){$(this).find("input").blur()});if($moresearch){$moresearch.each(function(){var $element=$(this),$parent=$element.closest(".bjui-pageHeader"),$more=$parent&&$parent.find(".bjui-moreSearch"),name=$element.data("name");if(!$element.attr("title")){$element.attr("title","更多查询条件")}$element.click(function(e){if(!$more.length){BJUI.debug("Not created 'moresearch' box[class=\"bjui-moreSearch\"]!");return}$more.css("top",$parent.outerHeight()-1);if($more.is(":visible")){$element.html('<i class="fa fa-angle-double-down"></i>');if(name){$("body").data("moresearch."+name,false)}}else{$element.html('<i class="fa fa-angle-double-up"></i>');if(name){$("body").data("moresearch."+name,true)}}$more.fadeToggle("slow","linear");e.preventDefault()});if(name&&$("body").data("moresearch."+name)){$more.css("top",$parent.outerHeight()-1).fadeIn();$element.html('<i class="fa fa-angle-double-up"></i>')}})}if($selectpicker){var bjui_select_linkage=function($obj,$next){var refurl=$obj.data("refurl");var _setEmpty=function($select){var $_nextselect=$($select.data("nextselect"));if($_nextselect&&$_nextselect.length){var emptytxt=$_nextselect.data("emptytxt")||"&nbsp;";var emptyval=$_nextselect.data("emptyval")||"";$_nextselect.html('<option value="'+emptyval+'">'+emptytxt+"</option>").selectpicker("refresh");_setEmpty($_nextselect)}};if(($next&&$next.length)&&refurl){var val=$obj.data("val"),nextVal=$next.data("val"),param=$obj.data("param");if(typeof val=="undefined"){val=$obj.val()}if(typeof param!="undefined"){for(var key in param){refurl=refurl.replace("{"+key+"}",encodeURIComponent($("#"+param[key]).val()))}}refurl=refurl.replace("{value}",encodeURIComponent(val));$.ajax({type:"POST",dataType:"json",url:refurl,cache:false,data:{},success:function(json){if(!json){return}var html="",selected="";$.each(json,function(i){var value,label;if(json[i]&&json[i].length){if(!json[BJUI.keys.statusCode]){value=json[i][0];label=json[i][1]}else{if(json[BJUI.keys.statusCode]==BJUI.statusCode.timeout){$("body").alertmsg("info",(json[BJUI.keys.message]||BJUI.regional.sessiontimeout));BJUI.loadLogin()}}}else{value=json[i].value;label=json[i].label}if(typeof nextVal!="undefined"){selected=value==nextVal?" selected":""}html+='<option value="'+value+'"'+selected+">"+label+"</option>"});$obj.removeAttr("data-val").removeData("val");$next.removeAttr("data-val").removeData("val");if(!html){html=$next.data("emptytxt")||"&nbsp;";html="<option>"+html+"</option>"}$next.html(html).selectpicker("refresh");_setEmpty($next)},error:BJUI.ajaxError})}};$selectpicker.each(function(){var $element=$(this);var options=$element.data();var $next=$(options.nextselect);$element.addClass("show-tick");if(!options.style){$element.data("style","btn-default")}if(!options.width){$element.data("width","auto")}if(!options.container){$element.data("container","body")}if(!options.noneResultsText){$element.data("noneResultsText","没有结果匹配")}else{if(options.container==true){$element.attr("data-container","false").data("container",false)}}$element.selectpicker();if($next&&$next.length&&(typeof $next.data("val")!="undefined")){bjui_select_linkage($element,$next)}});$selectpicker.change(function(){var $element=$(this);var $nextselect=$($element.data("nextselect"));bjui_select_linkage($element,$nextselect);$element.trigger("validate")})}if($ztree){$ztree.each(function(){var $this=$(this),op=$this.data(),options=op.options,_setting;if(options&&typeof options=="string"){options=options.toObj()}if(options){$.extend(op,typeof options=="object"&&options)}_setting=op.setting;if(!op.nodes){op.nodes=[];$this.find("> li").each(function(){var $li=$(this);var node=$li.data();if(node.pid){node.pId=node.pid}node.name=$li.html();op.nodes.push(node)});$this.empty()}else{if(typeof op.nodes=="string"){if(op.nodes.trim().startsWith("[")||op.nodes.trim().startsWith("{")){op.nodes=op.nodes.toObj()}else{op.nodes=op.nodes.toFunc()}}if(typeof op.nodes=="function"){op.nodes=op.nodes.call(this)}$this.removeAttr("data-nodes")}if(!op.showRemoveBtn){op.showRemoveBtn=false}if(!op.showRenameBtn){op.showRenameBtn=false}if(op.addHoverDom&&typeof op.addHoverDom!="function"){op.addHoverDom=(op.addHoverDom=="edit")?_addHoverDom:op.addHoverDom.toFunc()}if(op.removeHoverDom&&typeof op.removeHoverDom!="function"){op.removeHoverDom=(op.removeHoverDom=="edit")?_removeHoverDom:op.removeHoverDom.toFunc()}if(!op.maxAddLevel){op.maxAddLevel=2}var setting={view:{addHoverDom:op.addHoverDom||null,removeHoverDom:op.removeHoverDom||null,addDiyDom:op.addDiyDom?op.addDiyDom.toFunc():null},edit:{enable:op.editEnable,showRemoveBtn:op.showRemoveBtn,showRenameBtn:op.showRenameBtn},check:{enable:op.checkEnable,chkStyle:op.chkStyle,radioType:op.radioType},callback:{onClick:op.onClick?op.onClick.toFunc():null,beforeDrag:op.beforeDrag?op.beforeDrag.toFunc():_beforeDrag,beforeDrop:op.beforeDrop?op.beforeDrop.toFunc():_beforeDrop,onDrop:op.onDrop?op.onDrop.toFunc():null,onCheck:op.onCheck?op.onCheck.toFunc():null,beforeRemove:op.beforeRemove?op.beforeRemove.toFunc():null,onRemove:op.onRemove?op.onRemove.toFunc():null,onNodeCreated:_onNodeCreated,onCollapse:_onCollapse,onExpand:_onExpand},data:{simpleData:{enable:op.simpleData||true},key:{title:op.title||""}}};if(_setting&&typeof _setting=="string"){_setting=_setting.toObj()}if(_setting){$.extend(true,setting,typeof _setting=="object"&&_setting)}$.fn.zTree.init($this,setting,op.nodes);var IDMark_A="_a";var zTree=$.fn.zTree.getZTreeObj($this.attr("id"));if(op.expandAll){zTree.expandAll(true)}function _onNodeCreated(event,treeId,treeNode){if(treeNode.faicon){var $a=$("#"+treeNode.tId+"_a");if(!$a.data("faicon")){$a.data("faicon",true).addClass("faicon").find("> span.button").append('<i class="fa fa-'+treeNode.faicon+'"></i>')}}if(op.onNodeCreated){op.onNodeCreated.toFunc().call(this,event,treeId,treeNode)}}function _onCollapse(event,treeId,treeNode){if(treeNode.faiconClose){$("#"+treeNode.tId+"_ico").find("> i").attr("class","fa fa-"+treeNode.faiconClose)}console.log("11");if(op.onCollapse){op.onCollapse.toFunc().call(this,event,treeId,treeNode)}}function _onExpand(event,treeId,treeNode){if(treeNode.faicon&&treeNode.faiconClose){$("#"+treeNode.tId+"_ico").find("> i").attr("class","fa fa-"+treeNode.faicon)}if(op.onExpand){op.onExpand.toFunc().call(this,event,treeId,treeNode)}}function _addHoverDom(treeId,treeNode){var level=treeNode.level;var $obj=$("#"+treeNode.tId+IDMark_A);var $add=$("#diyBtn_add_"+treeNode.id);var $del=$("#diyBtn_del_"+treeNode.id);if(!$add.length){if(level<op.maxAddLevel){$add=$('<span class="tree_add" id="diyBtn_add_'+treeNode.id+'" title="添加"></span>');$add.appendTo($obj);$add.on("click",function(){zTree.addNodes(treeNode,{name:"新增Item"})})}}if(!$del.length){var $del=$('<span class="tree_del" id="diyBtn_del_'+treeNode.id+'" title="删除"></span>');$del.appendTo($obj).on("click",function(event){$del.alertmsg("confirm","确认要删除 "+treeNode.name+" 吗？",{okCall:function(){if(op.beforeRemove){var fn=op.beforeRemove.toFunc();var isdel=fn.call(fn,treeId,treeNode);if(isdel){zTree.removeNode(treeNode)}else{return}}else{zTree.removeNode(treeNode)}if(op.onRemove){var fn=op.onRemove.toFunc();if(fn){fn.call(this,event,treeId,treeNode)}}},cancelCall:function(){return}})})}}function _removeHoverDom(treeId,treeNode){var $add=$("#diyBtn_add_"+treeNode.id);var $del=$("#diyBtn_del_"+treeNode.id);if($add&&$add.length){$add.off("click").remove()}if($del&&$del.length){$del.off("click").remove()}}function _beforeDrag(treeId,treeNodes){for(var i=0;i<treeNodes.length;i++){if(treeNodes[i].drag===false){return false}}return true}function _beforeDrop(treeId,treeNodes,targetNode,moveType){return targetNode?targetNode.drop!==false:true}})}if($selectzTree){$selectzTree.each(function(){var $this=$(this);var options=$this.data(),$tree=$(options.tree),w=parseFloat($this.css("width")),h=$this.outerHeight();options.width=options.width||$this.outerWidth();options.height=options.height||"auto";if(!$tree||!$tree.length){return}var treeid=$tree.attr("id");var $box=$("#"+treeid+"_select_box");var setPosition=function($box){var top=$this.offset().top,left=$this.offset().left,$clone=$tree.clone().appendTo($("body")),treeHeight=$clone.outerHeight();$clone.remove();var offsetBot=$(window).height()-treeHeight-top-h,maxHeight=$(window).height()-top-h;if(options.height=="auto"&&offsetBot<0){maxHeight=maxHeight+offsetBot}$box.css({top:(top+h),left:left,"max-height":maxHeight})};$this.click(function(){if($box&&$box.length){setPosition($box);$box.show();return}var zindex=2;var dialog=$.CurrentDialog;if(dialog&&dialog.length){zindex=dialog.css("zIndex")+1}$box=$('<div id="'+treeid+'_select_box" class="tree-box"></div>').css({position:"absolute","zIndex":zindex,"min-width":options.width,height:options.height,overflow:"auto",background:"#FAFAFA",border:"1px #EEE solid"}).hide().appendTo($("body"));$tree.appendTo($box).css("width","100%").data("fromObj",$this).removeClass("hide").show();setPosition($box);$box.show()});$("body").on("mousedown",function(e){var $target=$(e.target);if(!($this[0]==e.target||($box&&$box.length>0&&$target.closest(".tree-box").length>0))){$box.hide()}});var $scroll=$this.closest(".bjui-pageContent");if($scroll&&$scroll.length){$scroll.scroll(function(){if($box&&$box.length){setPosition($box)}})}$this.on("destroy.bjui.selectztree",function(){$box.remove()})})}if($accordion){$accordion.each(function(){var $this=$(this),hBox=$this.data("heightbox"),height=$this.data("height");var initAccordion=function(hBox,height){var offsety=$this.data("offsety")||0,height=height||($(hBox).outerHeight()-(offsety*1)),$pheader=$this.find(".panel-heading"),h1=$pheader.outerHeight();h1=(h1+1)*$pheader.length;$this.css("height",height);height=height-h1;$this.find(".panel-collapse").find(".panel-body").css("height",height)};if($this.find("> .panel").length){if(hBox||height){initAccordion(hBox,height);$(window).resize(function(){initAccordion(hBox,height)});$this.on("hidden.bs.collapse",function(e){var $last=$(this).find("> .panel:last"),$a=$last.find("> .panel-heading > h4 > a");if($a.hasClass("collapsed")){$last.css("border-bottom","1px #ddd solid")}})}}})}if($kindeditor){$kindeditor.each(function(){var $editor=$(this),options=$editor.data();if(options.items&&typeof options.items=="string"){options.items=options.items.replaceAll("'","").replaceAll(" ","").split(",")}if(options.afterUpload){options.afterUpload=options.afterUpload.toFunc()}if(options.afterSelectFile){options.afterSelectFile=options.afterSelectFile.toFunc()}if(options.confirmSelect){options.confirmSelect=options.confirmSelect.toFunc()}var simpleItems=["fontname","fontsize","|","forecolor","hilitecolor","bold","italic","underline","removeformat","|","justifyleft","justifycenter","justifyright","insertorderedlist","insertunorderedlist","|","link"];var htmlTags={font:[],span:[".color",".background-color",".font-size",".font-family"],div:[".margin",".padding",".text-align"],table:["align","width"],"td,th":["align","valign","width","height","colspan","rowspan"],a:["href","target","name"],embed:["src","width","height","type","loop","autostart","quality",".width",".height","align","allowscriptaccess"],img:["src","width","height","border","alt","title","align",".width",".height",".border"],"p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6":["class","align",".text-align",".color",".font-weight",".font-style",".text-decoration",".vertical-align",".text-indent",".margin-left"],pre:["class"],hr:["class",".page-break-after"],"br,tbody,tr,strong,b,sub,sup,em,i,u,strike,s,del":[]};KindEditor.create($editor,{filterMode:options.filterMode!=undefined?options.filterMode:true,pasteType:options.pasteType,minHeight:options.minHeight||260,autoHeightMode:options.autoHeight||false,items:options.items||simpleItems,uploadJson:options.uploadJson,fileManagerJson:options.fileManagerJson,allowFileManager:options.allowFileManager!=undefined?options.allowFileManager:true,fillDescAfterUploadImage:options.fillDescAfterUploadImage!=undefined?options.fillDescAfterUploadImage:true,afterUpload:options.afterUpload,afterSelectFile:options.afterSelectFile,afterFocus:function(){$("body").trigger("click")},afterChange:function(){var limitNum=options.limitNum||50000;var pattern="还可以输入"+limitNum+"字";$(".word_surplus").html(pattern);if(this.count("text")>limitNum){pattern=("字数达到限制，可适当删除部分内容");var strValue=this.text();strValue=strValue.substring(0,limitNum);this.text(strValue);this.appendHtml("")}else{var result=limitNum-this.count("text");pattern="还可以输入"+result+"字"}$(".word_surplus").html(pattern)},X_afterSelect:options.confirmSelect,htmlTags:htmlTags,cssPath:[BJUI.PLUGINPATH+"kindeditor_4.1.10/editor-content.css",BJUI.PLUGINPATH+"kindeditor_4.1.10/plugins/code/prettify.css"],afterBlur:function(){this.sync()},readonlyMode:options.readonlyMode||false,resizeType:options.resizeType||0})})}$tab.on("show.bs.tab",function(e){var $prev=$(e.relatedTarget);var $active=$(e.target);var $activeCont=$tab.parents(".nav-tabs").siblings(".tab-content").find(".tab-pane.active");if($.hasFlash.v>=9){var uploadQueue=$activeCont.find(".uploadify-queue .uploadify-queue-item")}else{var uploadQueue=$activeCont.find(".queue .item")}if(uploadQueue.length){return false}});if($tooltip){$tooltip.each(function(){$(this).tooltip()})}if($dropdown){$dropdown.parent().on("show.bs.dropdown",function(e){var $this=$(this),width=$this.outerWidth(),$menu=$this.find("> .dropdown-menu"),menuWidth=$menu.outerWidth();if(width>menuWidth){$menu.css("min-width",width)}})}$box.find('form[data-toggle="ajaxform"]').each(function(){$(this).validator({ignore:":input"});$(this).validator("destroy")});if($echarts){$echarts.each(function(){var $element=$(this);var options=$element.data();var theme=options.theme?options.theme:"default";var typeArr=options.type.split(",");require.config({paths:{echarts:BJUI.PLUGINPATH+"echarts"}});require(["echarts","echarts/theme/"+theme,"echarts/chart/"+typeArr[0],typeArr[1]?"echarts/chart/"+typeArr[1]:"echarts"],function(ec,theme){var myChart=ec.init($element[0],theme);if(options.url){$.get(options.url,function(chartData){myChart.setOption(chartData)},"json")}if(options.options){myChart.setOption(eval("("+options.options+")"))}})})}if($subStr){$subStr.each(function(){var str=$(this).text(),len=$(this).data("length");var newStr=$(this).subStr(str,len,true);$(this).attr("title",str).text(newStr)})}if($textOmit){$textOmit.each(function(){var _this=this;var str=$(_this).text();var _resize=function(){var $textTit=$(_this).prev(".text-tit");if($textTit.length){var width=$(_this).parents("td").width()-$textTit.outerWidth()-1}else{var width=$(_this).parents("td").width()-1}$(_this).attr("title",str).text(str).width(width)};_resize();$(window).on(BJUI.eventType.resizeGrid,_resize)})}})}(jQuery);